"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("ethereumjs-util"),r=e(require("bn.js")),n=e(require("bignumber.js")),a=e(require("axios")),s=e(require("crypto-js/sha256")),o=require("ethereumjs-abi"),u=require("eth-sig-util"),i=require("ethers"),c=require("jsbn"),p=require("js-sha512"),l=require("web-encoding"),d=require("@ethereumjs/tx"),f=["ETH2x-FIL"];function m(e){if(!e)return{base:void 0,quote:void 0};if(e.startsWith("AMM-")&&(e=e.substr(4)),f.length>0)for(var t=0;t<f.length;t++){var r=e.indexOf(f[t]);if(r>=0)return 0===r?{base:f[t],quote:e.substr(e.lastIndexOf("-")+1)}:{base:e.substr(0,e.indexOf("-")),quote:f[t]}}return{base:e.substr(0,e.indexOf("-")),quote:e.substr(e.indexOf("-")+1)}}var x,h,_,v,T,I=function(e,t){if(e)try{return e[t]}catch(e){return}},y=function(e,t){return!!e&&!!e.includes(t)},E=function(e,t,r){var n=void 0,a=void 0,s=void 0;return t&&r&&(a=t,s=r,y(e,n=t+"-"+r)||(y(e,n=r+"-"+t)?(a=r,s=t):(n=void 0,a=void 0,s=void 0))),{market:n,amm:n?"AMM-"+n:void 0,baseShow:a,quoteShow:s}};(_=exports.ChainId||(exports.ChainId={}))[_.MAINNET=1]="MAINNET",_[_.GOERLI=5]="GOERLI",(v=exports.ConnectorNames||(exports.ConnectorNames={})).Unknown="Unknown",v.MetaMask="MetaMask",v.Network="Network",v.WalletConnect="WalletConnect",v.Gamestop="Gamestop",v.OtherExtension="OtherExtension",v.Coinbase="Coinbase",v.Ledger="Ledger",v.Trezor="Trezor",v.Authereum="Authereum",(T=exports.SigSuffix||(exports.SigSuffix={})).Suffix02="02",T.Suffix03="03";var g=((x={})[exports.ChainId.MAINNET]="0xc852aC7aAe4b0f0a0Deb9e8A391ebA2047d80026",x[exports.ChainId.GOERLI]="0x0ad87482a1bfd0B3036Bb4b13708C88ACAe1b8bA",x),S=((h={})[exports.ChainId.MAINNET]="0x97BE94250AEF1Df307749aFAeD27f9bc8aB911db",h[exports.ChainId.GOERLI]="0x0ad87482a1bfd0B3036Bb4b13708C88ACAe1b8bA",h);function k(e,t,r,n,a,s,o){try{var u=e[s](o),i=u.value}catch(e){return void r(e)}u.done?t(i):Promise.resolve(i).then(n,a)}function A(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var s=e.apply(t,r);function o(e){k(s,n,a,o,u,"next",e)}function u(e){k(s,n,a,o,u,"throw",e)}o(void 0)}))}}function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function O(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){if(null==e)return{};var r,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)t.indexOf(r=s[n])>=0||(a[r]=e[r]);return a}var N,G,w=["topic"],L=["topic"];(N=exports.WsOps||(exports.WsOps={})).Sub="sub",N.Unsub="unSub",(G=exports.WsTopicType||(exports.WsTopicType={})).account="account",G.order="order",G.trade="trade",G.mixtrade="mixtrade",G.ticker="ticker",G.candlestick="candlestick",G.ammpool="ammpool",G.orderbook="orderbook",G.mixorder="mixorder",G.cefiOrderBook="cefiOrderBook";var F,P,C,D=function(e){var t=e.topic,r={topic:void 0===t?exports.WsTopicType.orderbook:t,market:e.market,level:e.level,count:e.count,snapshot:e.snapshot,showOverlap:e.showOverlap};return Object.keys(r).forEach((function(e){return void 0===r[e]?delete r[e]:{}})),r};(F=exports.LOOPRING_URLs||(exports.LOOPRING_URLs={})).GET_AVAILABLE_BROKER="/api/v3/getAvailableBroker",F.GET_RELAYER_CURRENT_TIME="/api/v3/timestamp",F.API_KEY_ACTION="/api/v3/apiKey",F.GET_NEXT_STORAGE_ID="/api/v3/storageId",F.ORDER_ACTION="/api/v3/order",F.ORDER_CANCEL_HASH_LIST="/api/v3/orders/byHash",F.ORDER_CANCEL_CLIENT_ORDER_ID_LIST="/api/v3/orders/byClientOrderId",F.GET_MULTI_ORDERS="/api/v3/orders",F.GET_MARKETS="/api/v3/exchange/markets",F.GET_TOKENS="/api/v3/exchange/tokens",F.GET_EXCHANGE_INFO="/api/v3/exchange/info",F.GET_WITHDRAWAL_AGENTS="/api/v3/exchange/withdrawalAgents",F.GET_EXCHANGE_FEEINFO="/api/v3/exchange/feeInfo",F.GET_IGNORE_WITHDRAW="/api/v3/exchange/notWithdrawContractTokens",F.GET_MIX_MARKETS="/api/v3/mix/markets",F.GET_DEPTH="/api/v3/depth",F.GET_MIX_DEPTH="/api/v3/mix/depth",F.GET_TICKER="/api/v3/ticker",F.GET_MIX_TICKER="/api/v3/mix/ticker",F.GET_CANDLESTICK="/api/v3/candlestick",F.GET_MIX_CANDLESTICK="/api/v3/mix/candlestick",F.GET_FIAT_PRICE="/api/v3/price",F.GET_TRADES="/api/v3/trade",F.POST_INTERNAL_TRANSFER="/api/v3/transfer",F.ACCOUNT_ACTION="/api/v3/account",F.COUNTER_FACTUAL_INFO="/api/v3/counterFactualInfo",F.GET_USER_REG_TXS="/api/v3/user/createInfo",F.GET_PWD_RESET_TXS="/api/v3/user/updateInfo",F.GET_USER_EXCHANGE_BALANCES="/api/v3/user/balances",F.GET_USER_DEPOSITS_HISTORY="/api/v3/user/deposits",F.WITHDRAWALS_ACTION="/api/v3/user/withdrawals",F.POST_FORCE_WITHDRAWALS="/api/v3/user/forceWithdrawals",F.GET_USER_TRANSFERS_LIST="/api/v3/user/transfers",F.GET_USER_TRADE_HISTORY="/api/v3/user/trades",F.GET_USER_TXS="/api/v3/user/transactions",F.GET_USER_FEE_RATE="/api/v3/user/feeRates",F.GET_USER_ORDER_FEE_RATE="/api/v3/user/orderFee",F.GET_MINIMAL_ORDER_AMT="/api/v3/user/orderAmount",F.GET_MINIMUM_TOKEN_AMT="/api/v3/user/orderUserRateAmount",F.GET_OFFCHAIN_FEE_AMT="/api/v3/user/offchainFee",F.GET_USER_BILLS="/api/v3/user/bills",F.GET_ALLOWANCES="/api/v3/eth/allowances",F.GET_ETH_NONCE="/api/v3/eth/nonce",F.GET_ETH_BALANCES="/api/v3/eth/balances",F.GET_TOKEN_BALANCES="/api/v3/eth/tokenBalances",F.GET_AKK_TOKEN_BALANCES="/api/v3/eth/tokenBalances/all",F.GET_GAS_PRICE="/api/v3/eth/recommendedGasPrice",F.GET_GAS_PRICE_RANGE="/api/v3/eth/recommendedGasPriceRange",F.GET_RECOMENDED_MARKETS="/api/v3/exchange/recommended",F.GET_AMM_POOLS_CONF="/api/v3/amm/pools",F.GET_AMM_POOLS_SNAPSHOT="/api/v3/amm/balance",F.GET_AMM_POOLS_BALANCES="/api/v3/amm/balances",F.GET_AMM_POOL_STATS="/api/v3/amm/poolsStats",F.POST_JOIN_AMM_POOL="/api/v3/amm/join",F.POST_EXIT_AMM_POOL="/api/v3/amm/exit",F.GET_AMM_POOL_TXS="/api/v3/amm/transactions",F.GET_USER_AMM_POOL_TXS="/api/v3/amm/user/transactions",F.GET_AMM_POOL_TRADE_TXS="/api/v3/amm/trades",F.GET_AMM_ACTIVITY_RULES="/api/v3/sidecar/activityRules",F.GET_AMMPOOL_USER_REWARDS="/api/v3/amm/user/rewards",F.GET_AMMPOOL_REWARDS="/api/v3/amm/rewards",F.GET_AMMPOOL_GAME_RANK="/api/v3/game/rank",F.GET_AMMPOOL_GAME_USER_RANK="/api/v3/game/user/rank",F.GET_LIQUIDITY_MINING="/api/v3/sidecar/liquidityMining",F.GET_DELEGATE_GET_CODE="/api/v3/delegator/getCode",F.GET_DELEGATE_GET_IPFS="/api/v3/delegator/ipfs",F.GET_LIQUIDITY_MINING_USER_HISTORY="/api/v3/sidecar/liquidityMiningUserHistory",F.GET_PROTOCOL_PORTRAIT="/api/v3/sidecar/ProtocolPortrait",F.GET_AMM_ASSET_HISTORY="/api/v3/amm/assets",F.GET_ASSET_LOCK_RECORDS="api/v3/user/lockRecords",F.GET_DEFI_TOKENS="/api/v3/defi/tokens",F.GET_DEFI_MARKETS="/api/v3/defi/markets",F.POST_DEFI_ORDER="/api/v3/defi/order",F.GET_DEFI_REWARDS="/api/v3/defi/rewards",F.GET_DEFI_TRANSACTIONS="/api/v3/defi/transactions",F.SET_REFERRER="/api/v3/refer",F.GET_WS_KEY="/v3/ws/key",F.GET_LATEST_TOKEN_PRICES="/api/v3/datacenter/getLatestTokenPrices",F.GET_USER_TRADE_AMOUNT="/api/v3/datacenter/getUserTradeAmount",F.GET_USER_ASSETS="/api/wallet/v3/userAssets",F.GET_TOKEN_PRICES="/api/wallet/v3/tokenPrices",F.GET_GUARDIAN_APPROVE_LIST="/api/wallet/v3/getGuardianApproveList",F.GET_PROTECTORS="/api/wallet/v3/getProtects",F.GET_OPERATION_LOGS="/api/wallet/v3/operationLogs",F.GET_HEBAO_CONFIG="/api/wallet/v3/getAppConfigs",F.GET_WALLET_TYPE="/api/wallet/v3/wallet/type",F.GET_WALLET_MODULES="/api/wallet/v3/walletModules",F.GET_WALLET_CONTRACTVERSION="/api/wallet/v3/contractVersion",F.RESOLVE_ENS="/api/wallet/v3/resolveEns",F.RESOLVE_NAME="/api/wallet/v3/resolveName",F.SUBMIT_APPROVE_SIGNATURE="/api/wallet/v3/submitApproveSignature",F.REJECT_APPROVE_SIGNATURE="/api/wallet/v3/rejectApproveSignature",F.SEND_META_TX="/api/wallet/v3/sendMetaTx",F.GET_ACCOUNT_SERVICES="/api/v3/spi/getAccountServices",F.GET_USER_VIP_INFO="/api/v3/user/vipInfo",F.GET_USER_VIP_ASSETS="/api/v3/datacenter/getUserAssets",F.GET_USER_NFT_BALANCES="/api/v3/user/nft/balances",F.GET_USER_NFT_BALANCES_BY_COLLECTION="/api/v3/user/nft/collection/balances",F.GET_NFT_OFFCHAIN_FEE_AMT="/api/v3/user/nft/offchainFee",F.POST_NFT_INTERNAL_TRANSFER="/api/v3/nft/transfer",F.POST_NFT_WITHDRAWALS="/api/v3/nft/withdrawal",F.POST_NFT_MINT="/api/v3/nft/mint",F.POST_NFT_TRADE="/api/v3/nft/trade",F.POST_NFT_VALIDATE_ORDER="/api/v3/nft/validateOrder",F.POST_NFT_EDIT_COLLECTION="/api/v3/nft/collection/edit",F.POST_NFT_CREATE_LEGACY_COLLECTION="/api/v3/nft/collection/legacy/tokenAddress",F.POST_NFT_VALIDATE_REFRESH_NFT="/api/v3/nft/image/refresh",F.POST_DEPLOY_COLLECTION="/api/v3/collection/deployTokenAddress",F.POST_NFT_LEGACY_UPDATE_COLLECTION="/api/v3/nft/collection/legacy/updateNftCollection",F.POST_NFT_UPDATE_NFT_GROUP="/api/v3/user/nft/updateNftPreference",F.GET_NFT_COLLECTION="/api/v3/nft/collection",F.POST_NFT_CREATE_COLLECTION="/api/v3/nft/collection",F.DELETE_NFT_CREATE_COLLECTION="/api/v3/nft/collection",F.GET_COLLECTION_WHOLE_NFTS="/api/v3/nft/public/collection/items",F.GET_NFT_COLLECTION_PUBLISH="/api/v3/nft/public/collection",F.GET_NFT_COLLECTION_HASNFT="/api/v3/user/collection/details",F.GET_NFT_LEGACY_COLLECTION="/api/v3/nft/collection/legacy",F.GET_NFT_LEGACY_TOKENADDRESS="/api/v3/nft/collection/legacy/tokenAddress",F.GET_NFT_LEGACY_BALANCE="/api/v3/nft/collection/legacy/balance",F.GET_NFTs_INFO="/api/v3/nft/info/nfts",F.GET_USER_NFT_TRANSFER_HISTORY="/api/v3/user/nft/transfers",F.GET_USER_NFT_DEPOSIT_HISTORY="/api/v3/user/nft/deposits",F.GET_USER_NFT_WITHDRAW_HISTORY="/api/v3/user/nft/withdrawals",F.GET_USER_NFT_TRANSACTION_HISTORY="/api/v3/user/nft/transactions",F.GET_USER_NFT_TRADE_HISTORY_OLD="/api/v3/user/nft/trades",F.GET_USER_NFT_TRADE_HISTORY="/api/v3/new/user/nft/trades",F.GET_USER_NFT_MINT_HISTORY="/api/v3/user/nft/mints",F.GET_DEPLOY_TOKEN_ADDRESS="/api/v3/nft/deployTokenAddress",F.IPFS_META_URL="https://ipfs.loopring.io/ipfs/",F.GET_DUAL_INDEX="/api/v3/dual/index",F.GET_DUAL_PRICES="/api/v3/dual/prices",F.GET_DUAL_INFOS="/api/v3/dual/infos",F.GET_DUAL_TRANSACTIONS="/api/v3/dual/transactions",F.GET_DUAL_BALANCE="/api/v3/dual/balance",F.GET_DUAL_RULE="/api/v3/dual/rules",F.POST_DUAL_ORDER="/api/v3/dual/order",F.GET_DUAL_USER_LOCKED="/api/v3/dual/lockRecordAmount",F.GET_LUCK_TOKEN_AGENTS="/api/v3/luckyToken/agents",F.GET_LUCK_TOKEN_AUTHORIZEDSIGNERS="/api/v3/luckyToken/authorizedSigners",F.GET_LUCK_TOKEN_CLAIMHISTORY="/api/v3/luckyToken/user/claimHistory",F.GET_LUCK_TOKEN_LUCKYTOKENS="/api/v3/luckyToken/user/luckyTokens",F.GET_LUCK_TOKEN_LUCKYTOKENDETAIL="/api/v3/luckyToken/user/luckyTokenDetail",F.GET_LUCK_TOKEN_BLINDBOXDETAIL="/api/v3/luckyToken/user/blindBoxDetail",F.GET_LUCK_TOKEN_WITHDRAWALS="/api/v3/luckyToken/user/withdraws ",F.GET_LUCK_TOKEN_BALANCES="/api/v3/luckyToken/user/balances",F.GET_LUCK_TOKEN_CLAIMEDLUCKYTOKENS="/api/v3/luckyToken/user/claimedLuckyTokens",F.GET_LUCK_TOKEN_CLAIMEDBLINDBOX="/api/v3/luckyToken/user/claimBlindBoxHistory",F.GET_LUCK_TOKEN_SUMMARY="/api/v3/luckyToken/user/summary",F.POST_LUCK_TOKEN_SENDLUCKYTOKEN="/api/v3/luckyToken/sendLuckyToken",F.POST_LUCK_TOKEN_CLAIMLUCKYTOKEN="/api/v3/luckyToken/claimLuckyToken",F.POST_LUCK_TOKEN_CLAIMBLINDBOX="/api/v3/luckyToken/claimBlindBox",F.POST_LUCK_TOKEN_WITHDRAWALS="/api/v3/luckyToken/user/withdrawals",F.GET_BANXA_API_KEY="/api/v3/hmacAuthentication",F.GET_STAKE_PRODUCTS="/api/v3/stake/products",F.POST_STAKE_CLAIM="/api/v3/stake/claim",F.POST_STAKE="/api/v3/stake/stake",F.POST_STAKE_REDEEM="/api/v3/stake/redeem",F.GET_STAKE_SUMMARY="/api/v3/stake/user/summary",F.GET_STAKE_TRANSACTIONS="/api/v3/stake/user/transactions",F.GET_CONTACTS="/api/v3/user/contact",F.CREATE_CONTACT="/api/v3/user/contact/add",F.UPDATE_CONTACT="/api/v3/user/contact/update",F.DELETE_CONTACT="/api/v3/user/contact",F.GET_CEFI_MARKETS="api/v3/cefi/markets",F.GET_CEFI_DEPTH="api/v3/cefi/depth",F.GET_CEFI_ORDERS="api/v3/cefi/orders",F.POST_CEFI_ORDER="api/v3/cefi/order",(P=exports.HEBAO_LOCK_STATUS||(exports.HEBAO_LOCK_STATUS={})).LOCK_FAILED="LOCK_FAILED",P.CREATED="CREATED",P.LOCK_WAITING="LOCK_WAITING",P.UNLOCK_FAILED="UNLOCK_FAILED",P.LOCKED="LOCKED",P.UNLOCK_WAITING="UNLOCK_WAITING",(C=exports.HEBAO_META_TYPE||(exports.HEBAO_META_TYPE={}))[C.recovery=16]="recovery",C[C.transfer=18]="transfer",C[C.add_guardian=34]="add_guardian",C[C.remove_guardian=35]="remove_guardian",C[C.unlock_wallet=37]="unlock_wallet",C[C.deposit_wallet=202]="deposit_wallet";var q,U,M,K,B,W,H,Y,j,V,X,J,z,Q,Z,$,ee,te,re,ne,ae,se,oe,ue,ie,ce,pe,le,de,fe,me,xe,he,_e,ve,Te,Ie,ye,Ee,ge,Se,ke,Ae,Re,Oe,be,Ne,Ge,we,Le,Fe,Pe,Ce,De,qe,Ue="https://static.loopring.io/assets/";(q=exports.ReqMethod||(exports.ReqMethod={})).GET="GET",q.POST="POST",q.DELETE="DELETE",(exports.SigPatchField||(exports.SigPatchField={})).EddsaSignature="eddsaSignature",(U=exports.MarketStatus||(exports.MarketStatus={}))[U.AMM=1]="AMM",U[U.ORDER_BOOK=2]="ORDER_BOOK",U[U.ALL=3]="ALL",(M=exports.VipCatergory||(exports.VipCatergory={})).ORDERBOOK_TRADING_FEES_STABLECOIN="ORDERBOOK_TRADING_FEES_STABLECOIN",M.ORDERBOOK_TRADING_FEES="ORDERBOOK_TRADING_FEES",M.AMM_TRADING_FEES="AMM_TRADING_FEES",M.OTHER_FEES="OTHER_FEES",(K=exports.TradeChannel||(exports.TradeChannel={})).BLANK="",K.ORDER_BOOK="ORDER_BOOK",K.AMM_POOL="AMM_POOL",K.MIXED="MIXED",(B=exports.OrderType||(exports.OrderType={})).LimitOrder="LIMIT_ORDER",B.TakerOnly="TAKER_ONLY",B.MakerOnly="MAKER_ONLY",B.ClassAmm="AMM",(W=exports.OrderTypeResp||(exports.OrderTypeResp={})).LimitOrder="LIMIT_ORDER",W.TakerOnly="TAKER_ONLY",W.MakerOnly="MAKER_ONLY",W.ClassAmm="CLASS_AMM",(H=exports.Currency||(exports.Currency={})).usd="usd",H.cny="cny",(Y=exports.OffchainFeeReqType||(exports.OffchainFeeReqType={}))[Y.ORDER=0]="ORDER",Y[Y.OFFCHAIN_WITHDRAWAL=1]="OFFCHAIN_WITHDRAWAL",Y[Y.UPDATE_ACCOUNT=2]="UPDATE_ACCOUNT",Y[Y.TRANSFER=3]="TRANSFER",Y[Y.FAST_OFFCHAIN_WITHDRAWAL=4]="FAST_OFFCHAIN_WITHDRAWAL",Y[Y.OPEN_ACCOUNT=5]="OPEN_ACCOUNT",Y[Y.AMM_EXIT=6]="AMM_EXIT",Y[Y.DEPOSIT=7]="DEPOSIT",Y[Y.AMM_JOIN=8]="AMM_JOIN",Y[Y.TRANSFER_AND_UPDATE_ACCOUNT=15]="TRANSFER_AND_UPDATE_ACCOUNT",Y[Y.DEFI_JOIN=21]="DEFI_JOIN",Y[Y.DEFI_EXIT=22]="DEFI_EXIT",Y[Y.FORCE_WITHDRAWAL=23]="FORCE_WITHDRAWAL",(j=exports.OffchainNFTFeeReqType||(exports.OffchainNFTFeeReqType={}))[j.NFT_MINT=9]="NFT_MINT",j[j.NFT_WITHDRAWAL=10]="NFT_WITHDRAWAL",j[j.NFT_TRANSFER=11]="NFT_TRANSFER",j[j.NFT_DEPLOY=13]="NFT_DEPLOY",j[j.NFT_TRANSFER_AND_UPDATE_ACCOUNT=19]="NFT_TRANSFER_AND_UPDATE_ACCOUNT",(V=exports.TradingInterval||(exports.TradingInterval={})).min1="1min",V.min5="5min",V.min15="15min",V.min30="30min",V.hr1="1hr",V.hr2="2hr",V.hr4="4hr",V.hr12="12hr",V.d1="1d",V.w1="1w",(X=exports.TxStatus||(exports.TxStatus={})).processing="processing",X.processed="processed",X.received="received",X.failed="failed",(J=exports.OrderStatus||(exports.OrderStatus={})).processing="processing",J.processed="processed",J.failed="failed",J.cancelled="cancelled",J.cancelling="cancelling",J.expired="expired",(z=exports.Side||(exports.Side={})).Buy="BUY",z.Sell="SELL",(Q=exports.WithdrawalTypes||(exports.WithdrawalTypes={})).OFFCHAIN_WITHDRAWAL="OFFCHAIN_WITHDRAWAL",Q.ONCHAIN_WITHDRAWAL="ONCHAIN_WITHDRAWAL",Q.FORCE_WITHDRAWAL="FORCE_WITHDRAWAL",(Z=exports.UserTxTypes||(exports.UserTxTypes={})).DEPOSIT="deposit",Z.TRANSFER="transfer",Z.OFFCHAIN_WITHDRAWAL="offchain_withdrawal",Z.FORCE_WITHDRAWAL="force_withdrawal",Z.DELEGATED_FORCE_WITHDRAW="delegated_force_withdraw",Z.SEND_LUCKY_TOKEN="send_lucky_token",Z.WITHDRAW_LUCKY_TOKEN="withdraw_lucky_token",Z.WITHDRAW="onchain_withdrawal",Z.SEND_BACK_LUCKY_TOKEN="send_back_lucky_token",Z.DUAL_INVESTMENT="dual_investment",Z.L2_STAKING="l2_staking",($=exports.UserBillTypes||(exports.UserBillTypes={}))[$.DEPOSIT=0]="DEPOSIT",$[$.ONCHAIN_WITHDRAWAL=1]="ONCHAIN_WITHDRAWAL",$[$.TRANSFER=2]="TRANSFER",(ee=exports.UserNFTTxTypes||(exports.UserNFTTxTypes={})).DEPOSIT="deposit",ee.TRANSFER="transfer",ee.WITHDRAW="onchain_withdrawal",ee.MINT="mint",(te=exports.TransferType||(exports.TransferType={})).transfer="transfer",te.transfer_red="transfer_red",(re=exports.BillType||(exports.BillType={})).ORDER="order",re.DEPOSIT="deposit",re.ONCHAIN_WITHDRAWAL="onchain_withdrawal",re.OFFCHAIN_WITHDRAWAL="offchain_withdrawal",re.TRANSFER="transfer",re.TRANSFER_RED="transfer_red",(ne=exports.FilledType||(exports.FilledType={})).dex="dex",ne.amm="amm",(ae=exports.TxType||(exports.TxType={})).TRANSFER="TRANSFER",ae.DEPOSIT="DEPOSIT",ae.OFFCHAIN_WITHDRAWAL="OFFCHAIN_WITHDRAWAL",(se=exports.TxNFTType||(exports.TxNFTType={})).TRANSFER="TRANSFER",se.DEPOSIT="DEPOSIT",se.WITHDRAW="WITHDRAW",se.ALL="ALL",se.MINT="MINT",(oe=exports.AmmTxType||(exports.AmmTxType={})).JOIN="AMM_JOIN",oe.EXIT="AMM_EXIT",(ue=exports.SortOrder||(exports.SortOrder={}))[ue.ASC=0]="ASC",ue[ue.DESC=1]="DESC",(ie=exports.RuleType||(exports.RuleType={})).AMM_MINING="AMM_MINING",ie.SWAP_VOLUME_RANKING="SWAP_VOLUME_RANKING",ie.ORDERBOOK_MINING="ORDERBOOK_MINING",(ce=exports.AmmPoolActivityStatus||(exports.AmmPoolActivityStatus={})).NotStarted="NotStarted",ce.InProgress="InProgress",ce.EndOfGame="EndOfGame",(pe=exports.SIG_FLAG||(exports.SIG_FLAG={}))[pe.NO_SIG=0]="NO_SIG",pe[pe.EDDSA_SIG=1]="EDDSA_SIG",pe[pe.EDDSA_SIG_POSEIDON=2]="EDDSA_SIG_POSEIDON",(le=exports.AssetType||(exports.AssetType={}))[le.LEVEL_ONE=0]="LEVEL_ONE",le[le.DEX=1]="DEX",(de=exports.IntervalType||(exports.IntervalType={}))[de.HOUR=0]="HOUR",de[de.DAY=1]="DAY",(fe=exports.NetworkWallet||(exports.NetworkWallet={})).ETHEREUM="ETHEREUM",fe.ARBITRUM="ARBITRUM",fe.GOERLI="GOERLI",fe.TAIKO="TAIKO",(me=exports.DefiMarketStatus||(exports.DefiMarketStatus={}))[me.hide=0]="hide",me[me.show=1]="show",me[me.depositOnly=3]="depositOnly",me[me.depositAll=7]="depositAll",me[me.withdrawOnly=9]="withdrawOnly",me[me.depositAllAndWithdraw=15]="depositAllAndWithdraw",me[me.withdrawAll=25]="withdrawAll",me[me.WithdrawAllAndDeposit=27]="WithdrawAllAndDeposit",me[me.depositAndWithdraw=11]="depositAndWithdraw",me[me.all=31]="all",(xe=exports.AMMtxTypes||(exports.AMMtxTypes={}))[xe.JOIN=0]="JOIN",xe[xe.EXIT=1]="EXIT",(he=exports.OrderMakerType||(exports.OrderMakerType={})).taker="taker",he.maker="maker",(_e=exports.TradesFillTypes||(exports.TradesFillTypes={})).dex="dex",_e.amm="amm",(ve=exports.LegacyNFT||(exports.LegacyNFT={})).inside="inside",ve.outside="outside",ve.undecided="undecided",(Te=exports.DEPLOYMENT_STATUS||(exports.DEPLOYMENT_STATUS={})).NOT_DEPLOYED="NOT_DEPLOYED",Te.DEPLOY_FAILED="DEPLOY_FAILED",Te.DEPLOYING="DEPLOYING",Te.DEPLOYED="DEPLOYED",(Ie=exports.NFT_IMAGE_SIZES||(exports.NFT_IMAGE_SIZES={})).small="240-240",Ie.large="332-332",Ie.original="original",(ye=exports.DefiAction||(exports.DefiAction={})).Deposit="deposit",ye.Withdraw="withdraw",(Ee=exports.NFT_PREFERENCE_TYPE||(exports.NFT_PREFERENCE_TYPE={})).fav="fav",Ee.hide="hide",(ge=exports.DUAL_TYPE||(exports.DUAL_TYPE={})).DUAL_BASE="DUAL_BASE",ge.DUAL_CURRENCY="DUAL_CURRENCY",(Se=exports.LABEL_INVESTMENT_STATUS||(exports.LABEL_INVESTMENT_STATUS={})).PROCESSED="processed",Se.FAILED="failed",Se.PROCESSING="processing",Se.CANCELLED="cancelled",(ke=exports.SETTLEMENT_STATUS||(exports.SETTLEMENT_STATUS={})).UNSETTLED="UNSETTLED",ke.SETTLED="SETTLED",ke.PAID="PAID",(Ae=exports.LuckyTokenItemStatusIndex||(exports.LuckyTokenItemStatusIndex={}))[Ae.SUBMITTING=0]="SUBMITTING",Ae[Ae.NOT_EFFECTIVE=1]="NOT_EFFECTIVE",Ae[Ae.PENDING=2]="PENDING",Ae[Ae.COMPLETED=3]="COMPLETED",Ae[Ae.OVER_DUE=4]="OVER_DUE",Ae[Ae.FAILED=5]="FAILED",(Re=exports.LuckyTokenWithdrawStatus||(exports.LuckyTokenWithdrawStatus={}))[Re.RECEIVED=0]="RECEIVED",Re[Re.PROCESSING=1]="PROCESSING",Re[Re.PROCESSED=2]="PROCESSED",Re[Re.WITHDRAW_FAILED=3]="WITHDRAW_FAILED",Re[Re.PREPARE_FAILED=4]="PREPARE_FAILED",(Oe=exports.LuckyTokenItemStatus||(exports.LuckyTokenItemStatus={})).SUBMITTING="SUBMITTING",Oe.NOT_EFFECTIVE="NOT_EFFECTIVE",Oe.PENDING="PENDING",Oe.COMPLETED="COMPLETED",Oe.OVER_DUE="OVER_DUE",Oe.FAILED="FAILED",(be=exports.LuckyTokenAmountType||(exports.LuckyTokenAmountType={}))[be.RANDOM=0]="RANDOM",be[be.AVERAGE=1]="AVERAGE",(Ne=exports.LuckyTokenViewType||(exports.LuckyTokenViewType={}))[Ne.PUBLIC=0]="PUBLIC",Ne[Ne.PRIVATE=1]="PRIVATE",(Ge=exports.LuckyTokenClaimType||(exports.LuckyTokenClaimType={}))[Ge.RELAY=0]="RELAY",Ge[Ge.COMMON=1]="COMMON",Ge[Ge.BLIND_BOX=2]="BLIND_BOX",(we=exports.ClaimRecordStatus||(exports.ClaimRecordStatus={})).WAITING_CLAIM="WAITING_CLAIM",we.CLAIMED="CLAIMED",we.EXPIRED="EXPIRED",(Le=exports.BlindBoxStatus||(exports.BlindBoxStatus={})).NOT_OPENED="NOT_OPENED",Le.OPENED="OPENED",Le.EXPIRED="EXPIRED",(Fe=exports.StakeStatus||(exports.StakeStatus={})).received="received",Fe.locked="locked",Fe.partial_unlocked="partial_unlocked",Fe.completely_unlocked="completely_unlocked",Fe.failed="failed",(Pe=exports.StakeTransactionType||(exports.StakeTransactionType={})).subscribe="subscribe",Pe.redeem="redeem",Pe.claim="claim",(Ce=exports.AddressType||(exports.AddressType={}))[Ce.UNKNOWN_ADDRESS=0]="UNKNOWN_ADDRESS",Ce[Ce.LOOPRING_HEBAO_CF=100]="LOOPRING_HEBAO_CF",Ce[Ce.LOOPRING_HEBAO_CONTRACT_1_1_6=2e3]="LOOPRING_HEBAO_CONTRACT_1_1_6",Ce[Ce.LOOPRING_HEBAO_CONTRACT_1_2_0=2001]="LOOPRING_HEBAO_CONTRACT_1_2_0",Ce[Ce.LOOPRING_HEBAO_CONTRACT_2_0_0=2002]="LOOPRING_HEBAO_CONTRACT_2_0_0",Ce[Ce.LOOPRING_HEBAO_CONTRACT_2_1_0=2003]="LOOPRING_HEBAO_CONTRACT_2_1_0",Ce[Ce.LOOPRING_DEX_EOA=300]="LOOPRING_DEX_EOA",Ce[Ce.EXCHANGE_OTHER=4e3]="EXCHANGE_OTHER",Ce[Ce.EXCHANGE_BINANCE=4001]="EXCHANGE_BINANCE",Ce[Ce.EXCHANGE_OKX=4002]="EXCHANGE_OKX",Ce[Ce.EXCHANGE_HUOBI=4003]="EXCHANGE_HUOBI",Ce[Ce.EXCHANGE_COINBASE=4004]="EXCHANGE_COINBASE",Ce[Ce.EOA=5e3]="EOA",Ce[Ce.EOA_METAMASK=5001]="EOA_METAMASK",Ce[Ce.EOA_COINBASE=5002]="EOA_COINBASE",Ce[Ce.EOA_LEDGER=5003]="EOA_LEDGER",Ce[Ce.CONTRACT=600]="CONTRACT",(De=exports.LoopringErrorCode||(exports.LoopringErrorCode={}))[De.Unknown_Error=1e5]="Unknown_Error",De[De.Invalid_Args=100001]="Invalid_Args",De[De.Address_Not_Found=101001]="Address_Not_Found",De[De.User_Not_Found=101002]="User_Not_Found",De[De.ExchangeId_Incorrect=102001]="ExchangeId_Incorrect",De[De.Unsupported_TokenId=102002]="Unsupported_TokenId",De[De.Invalid_AccountId=102003]="Invalid_AccountId",De[De.Invalid_OrderId=102004]="Invalid_OrderId",De[De.Market_Not_Supported=102005]="Market_Not_Supported",De[De.Illegal_Rate=102006]="Illegal_Rate",De[De.Order_Already_Existed=102007]="Order_Already_Existed",De[De.Order_Already_Expired=102008]="Order_Already_Expired",De[De.Order_Missing_Sig=102010]="Order_Missing_Sig",De[De.Invalid_User_Balance=102011]="Invalid_User_Balance",De[De.Order_Amount_Too_Small=102012]="Order_Amount_Too_Small",De[De.Failed_To_Freeze_Amt=102014]="Failed_To_Freeze_Amt",De[De.Exceed_Max_Order_Amt=102020]="Exceed_Max_Order_Amt",De[De.Invalid_Nonce=102021]="Invalid_Nonce",De[De.Invalid_Transfer_Sender=102022]="Invalid_Transfer_Sender",De[De.Invalid_Transfer_Receiver=102023]="Invalid_Transfer_Receiver",De[De.Unsuported_Fee_Token=102024]="Unsuported_Fee_Token",De[De.Transfer_Token_Is_Not_Consistent_With_Fee_Token=102025]="Transfer_Token_Is_Not_Consistent_With_Fee_Token",De[De.Sumbit_Order_Failed=102027]="Sumbit_Order_Failed",De[De.No_Order_To_Cancel=102117]="No_Order_To_Cancel",De[De.Fail_To_Cancel_Order=102118]="Fail_To_Cancel_Order",De[De.Order_Is_Not_Valid=102120]="Order_Is_Not_Valid",De[De.Empty_Apikey=104001]="Empty_Apikey",De[De.Invalid_Apikey=104002]="Invalid_Apikey",De[De.Invalid_AccountID=104003]="Invalid_AccountID",De[De.No_Sig_Provided=104004]="No_Sig_Provided",De[De.Wrong_Sig=104005]="Wrong_Sig",De[De.User_Cannot_Be_Empty=107001]="User_Cannot_Be_Empty",De[De.Orderhash_Cannot_Be_Empty=107002]="Orderhash_Cannot_Be_Empty",De[De.Order_Not_Exist=107003]="Order_Not_Exist",De[De.Unsupported_Market=108e3]="Unsupported_Market",De[De.Unsupported_Depth_Level=108001]="Unsupported_Depth_Level",De[De.SKD_UNKNOW=5e5]="SKD_UNKNOW",De[De.CONTRACTNFT_URI=500001]="CONTRACTNFT_URI",De[De.CONTRACTNFT_BALANCE=500002]="CONTRACTNFT_BALANCE",De[De.CONTRACTNFT_IS_APPROVE=500003]="CONTRACTNFT_IS_APPROVE",De[De.CONTRACTNFT_SET_APPROVE=500004]="CONTRACTNFT_SET_APPROVE",De[De.NOT_SUPPORT_ERROR=500005]="NOT_SUPPORT_ERROR",De[De.USER_DENIED=500006]="USER_DENIED",De[De.USER_DENIED_2=500007]="USER_DENIED_2",De[De.NO_EDDSA_KEY=500008]="NO_EDDSA_KEY",De[De.HTTP_ERROR=500009]="HTTP_ERROR",De[De.CEX_NO_DEPTH_ERROR=500010]="CEX_NO_DEPTH_ERROR",De[De.CEX_NO_PRODUCT=500011]="CEX_NO_PRODUCT",(qe=exports.ConnectorError||(exports.ConnectorError={})).NOT_SUPPORT_ERROR="Not supported on this device",qe.USER_DENIED="User denied message signature",qe.USER_DENIED_2="personalSign err before Validate",qe.CONTRACTNFT_URI="contract nft uri Error",qe.CONTRACTNFT_BALANCE="contract nft balance error",qe.CONTRACTNFT_IS_APPROVE="ContractNFT is Approve error",qe.CONTRACTNFT_SET_APPROVE="ContractNFT set Approve error",qe.NO_EDDSA_KEY="No EDDSA KEY",qe.HTTP_ERROR="HTTP Request Failed!",qe.CEX_NO_DEPTH_ERROR="NO Depth for CEX",qe.CEX_NO_PRODUCT="NO Market for CEX";var Me,Ke={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)||navigator.userAgent.match(/WPDesktop/i)},Ethereum:function(){var e,t;return(null==(e=window)?void 0:e.ethereum)&&(null==(t=window)?void 0:t.ethereum.isImToken)},any:function(){return void 0===global.navigator||"undefined"==typeof navigator?(console.log("IsMobile any navigator is undefined"),!1):Ke.Android()||Ke.BlackBerry()||Ke.iOS()||Ke.Opera()||Ke.Windows()||Ke.Ethereum()}};function Be(e){if("string"==typeof e)return e.startsWith("0x")?e:"0x"+e;throw new Error("Unsupported type")}function We(e){return e instanceof Buffer?e:t.toBuffer(e)}function He(e){if("number"==typeof e||e instanceof n||e instanceof r)return Be(e.toString(16));if(e instanceof Buffer||e instanceof Uint8Array)return Be(e.toString("hex"));if("string"==typeof e)return new RegExp(/^0x[0-9a-fA-F]*$/).test(e)?e:Be(We(e).toString("hex"));throw new Error("Unsupported type")}function Ye(e){if("number"==typeof e)return e;if(e instanceof n||e instanceof r)return e.toNumber();if("string"==typeof e)return Number(e);if(e instanceof Buffer||e instanceof Uint8Array)return Number(e.toString("hex"));throw new Error("Unsupported type")}function je(e){if(e instanceof n)return e;if("number"==typeof e)return new n(e.toString());if("string"==typeof e)return new n(e);if(e instanceof Buffer||e instanceof Uint8Array)return new n(e.toString("hex"));throw new Error("Unsupported type")}function Ve(e){return e instanceof r?e:new r(je(e).toString(10),10)}function Xe(e){return new n(je(e).times(1e9).toFixed(0))}function Je(e){if("string"==typeof e)return e.startsWith("0x")?e.slice(2):e;throw new Error("Unsupported type")}function ze(e,t,r){if(t=t||0,e instanceof n)return e.toFixed(t,r?0:1);if("number"==typeof e)return r?(Math.ceil(e*Number("1e"+t))/Number("1e"+t)).toFixed(t):(Math.floor(e*Number("1e"+t))/Number("1e"+t)).toFixed(t);throw new Error("Unsupported type")}function Qe(e){var t=Je(e);return Be(String(t).padStart(64,"0"))}function Ze(e){var t=new Map;return e&&Reflect.ownKeys(e).sort((function(e,t){return e.toString().localeCompare(t.toString())})).forEach((function(r){t.set(r.toString(),e[r.toString()])})),t}function $e(e){var t={},r={},n={},a={},s={};return e instanceof Array&&e.forEach((function(e){e.isLpToken=!!e.symbol.startsWith("LP-"),s[e.symbol]=e;var o={icon:Ue+"ethereum/assets/"+e.address+"/logo.png",name:e.name,simpleName:e.symbol,description:e.type,company:e.name};e.symbol.startsWith("LP-")||(t[e.symbol]=o),r[e.symbol]=o,n[e.address.toLowerCase()]=e.symbol,a[e.tokenId]=e.symbol})),{tokensMap:s,coinMap:t,totalCoinMap:r,idIndex:a,addressIndex:n}}function et(e){var t={},r={};return(null==e?void 0:e.pools)instanceof Array&&e.pools.forEach((function(e){var n=e.market;t[n]=e;var a,s,o=n.indexOf("-"),u=n.lastIndexOf("-");a=n.substring(o+1,u),s=n.substring(u+1,n.length),r[a]?r[a].tokenList=[].concat(r[a].tokenList,[s]):r[a]={tokenId:e.tokens.pooled[0],tokenList:[s]},r[s]?r[s].tokenList=[].concat(r[s].tokenList,[a]):r[s]={tokenId:e.tokens.pooled[1],tokenList:[a]}})),{ammpools:t,pairs:r}}function tt(e,t){void 0===t&&(t=exports.LOOPRING_URLs.GET_MARKETS);var r={},n={},a=t===exports.LOOPRING_URLs.GET_MIX_MARKETS;(null==e?void 0:e.markets)instanceof Array&&e.markets.forEach((function(e){var t={baseTokenId:e.baseTokenId,enabled:e.enabled,market:e.market,orderbookAggLevels:e.orderbookAggLevels,precisionForPrice:e.precisionForPrice,quoteTokenId:e.quoteTokenId};if(a&&(t.status=e.status,t.isSwapEnabled=t.status===exports.MarketStatus.ALL||t.status===exports.MarketStatus.AMM,t.createdAt=parseInt(e.createdAt)),r[e.market]=t,e.enabled){var s=e.market,o=s.indexOf("-"),u=s.substring(0,o),i=s.substring(o+1,s.length);n[u]?n[u].tokenList=[].concat(n[u].tokenList,[i]):n[u]={tokenId:e.baseTokenId,tokenList:[i]},n[i]?n[i].tokenList=[].concat(n[i].tokenList,[u]):n[i]={tokenId:e.quoteTokenId,tokenList:[u]}}}));var s=Reflect.ownKeys(r),o=Reflect.ownKeys(n);return{markets:r,pairs:n,tokenArr:o,tokenArrStr:o.join(","),marketArr:s,marketArrStr:s.join(",")}}n.config({EXPONENTIAL_AT:100,RANGE:[-1e5,1e7],ROUNDING_MODE:1});var rt="undefined"!=typeof window&&null!=(Me=window)&&Me.___OhTrustDebugger___?console.log:function(e){return""},nt=je(0),at=je(1),st=je(10),ot=je(1e4),ut=function(e,t){if(!e)throw Error("no tokens list!");return e[t]};function it(e,t,r,n,a){try{var s=ut(e,t),o=n||s.precision;return ze(je(r).div("1e"+s.decimals),o,a)}catch(e){return}return"0"}function ct(e,t,r,n){void 0===n&&(n=void 0);var a=ut(e,t);if(void 0===a)return"0";var s=je(r).times("1e"+a.decimals);return void 0===n?s.toString():s.toFixed(0,n)}function pt(e){return!e||""===e.trim()}function lt(e,t,r,n){var a=je(e),s=je(r),o=je(n);if(a.lt(nt)||s.lt(nt)||o.lt(nt))return nt;var u=je(t),i=a.times(ot.minus(u)),c=i.times(o),p=s.times(ot).plus(i);return c.div(p)}function dt(e,t,r,n,a,s,o){var u="0",i=e,c=o.bids;if(!t||!r)return u;if(a)if(s){i=je(i).times(st.pow(t.decimals)).toString();for(var p=0;p<o.asks.length;p++){var l=o.asks[p],d=je(i).gte(je(l.vol))?l.vol:i;if(je(d).lte(nt))break;var f=je(l.amt).div("1e"+r.decimals);if(je(d).eq(je(l.vol)))u=je(u).plus(f).toString();else{var m=je(d).div(je(l.vol));u=je(u).plus(m.times(f)).toString()}i=je(i).minus(je(d)).toString()}}else{i=je(i).times("1e"+t.decimals).toString();for(var x=c.length-1;x>=0;x--){var h=c[x],_=je(i).gte(je(h.amt))?h.amt:i;if(je(_).lte(nt))break;var v=je(h.vol).div("1e"+r.decimals);if(je(_).eq(je(h.amt)))u=je(u).plus(v).toString();else{var T=je(_).div(je(h.amt));u=je(u).plus(T.times(v)).toString()}i=je(i).minus(je(_)).toString()}}else if(s){i=je(i).times(st.pow(r.decimals)).toString();for(var I=0;I<o.asks.length;I++){var y=o.asks[I],E=je(i).gte(je(y.amt))?y.amt:i;if(je(E).lte(nt))break;var g=je(y.vol).div(st.pow(t.decimals));if(je(E).eq(je(y.amt)))u=je(u).plus(g).toString();else{var S=je(E).div(je(y.amt));u=je(u).plus(S.times(g)).toString()}i=je(i).minus(je(E)).toString()}}else{i=je(i).times(st.pow(r.decimals)).toString();for(var k=c.length-1;k>=0;k--){var A=c[k],R=je(i).gte(je(A.vol))?A.vol:i;if(je(R).lte(nt))break;var O=je(A.amt).div(st.pow(t.decimals));if(je(R).eq(A.vol))u=je(u).plus(je(O)).toString();else{var b=je(R).div(je(A.vol));u=je(u).plus(b.times(O)).toString()}i=je(i).minus(je(R)).toString()}}return u}function ft(e,t,r,n,a,s){var o,u;void 0===s&&(s=void 0);var i=E(r,e,t),c=i.market,p=i.amm;if(!(pt(c)||pt(p)||Object.keys(a).indexOf(c)<0)){var l=a[c],d=I(n,e),f=I(n,t),m=!1,x=null==(o=s)?void 0:o.pooled[0],h=null==(u=s)?void 0:u.pooled[1],_="0",v="0";return void 0!==(null==d?void 0:d.tokenId)&&void 0!==(null==f?void 0:f.tokenId)&&void 0!==(null==x?void 0:x.tokenId)&&void 0!==(null==h?void 0:h.tokenId)?(null==d?void 0:d.tokenId)===(null==x?void 0:x.tokenId)?(_=x.volume,v=h.volume):(_=h.volume,v=x.volume,m=!0):c===t+"-"+e&&(m=!0),{reserveIn:_,reserveOut:v,sellToken:d,buyToken:f,coinA:x,coinB:h,isReverse:m,marketInfo:l}}}function mt(e,t){if(!e||!t)return"0";var r=je(t);if(r.eq(nt))return"0";var n=je(r).div(e);return at.minus(n).abs().toString()}function xt(e,t){if(!e||!t)return"0";e=e.trim(),t=t.trim();var r=je(e),n=je(t);return r.eq(nt)?"0":n.div(r).toString()}function ht(e,t){if(!e||!t)return"0";e=e.trim(),t=t.trim();var r=je(e),n=je(t);return r.eq(nt)?"0":n.div(r).toString()}function _t(e,t,r,n,a){var s=lt(r,n,e,t);return s=s.times(ot.minus(je(a))).div(ot),mt(xt(e,t),ht(r,s.toString()))}function vt(e,t,r,n,a,s,o,u,i,c,p,l){var d="0";if(pt(e)||pt(t)||pt(o))return"0";if(p)d=_t(e,t,r,o,"0");else{if(!l.mid_price)return"0";var f=c?s:n,m=c?n:s;d=mt(je(l.mid_price).times("1e"+m).div("1e"+f).toString(),c?ht(a,r):ht(r,a))}return d}function Tt(e,t,r){var n=je(e).times(ot.minus(je(r))).div(ot);return{minReceived:n.toFixed(0,0),minReceivedVal:n.div("1e"+t).toString(),minimumDecimal:t}}function It(e,t,r,n){var a=je(r.volume),s=je(n.volume),o=nt,u=nt;return t?a.eq(nt)||(o=(u=je(e).div(a)).times(s)):s.eq(nt)||(o=(u=je(e).div(s)).times(a)),{output:o.toFixed(0,0),ratio:u}}function yt(e){return e&&e.default||e}var Et,gt=(function(e){var t=function(e){var t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function i(e,t,r,n){var a=Object.create((t&&t.prototype instanceof l?t:l).prototype),s=new g(n||[]);return a._invoke=function(e,t,r){var n="suspendedStart";return function(a,s){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw s;return{value:void 0,done:!0}}for(r.method=a,r.arg=s;;){var o=r.delegate;if(o){var u=I(o,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var i=c(e,t,r);if("normal"===i.type){if(n=r.done?"completed":"suspendedYield",i.arg===p)continue;return{value:i.arg,done:r.done}}"throw"===i.type&&(n="completed",r.method="throw",r.arg=i.arg)}}}(e,r,s),a}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=i;var p={};function l(){}function d(){}function f(){}var m={};u(m,a,(function(){return this}));var x=Object.getPrototypeOf,h=x&&x(x(S([])));h&&h!==t&&r.call(h,a)&&(m=h);var _=f.prototype=l.prototype=Object.create(m);function v(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){var n;this._invoke=function(a,s){function o(){return new t((function(n,o){!function n(a,s,o,u){var i=c(e[a],e,s);if("throw"!==i.type){var p=i.arg,l=p.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(l).then((function(e){p.value=e,o(p)}),(function(e){return n("throw",e,o,u)}))}u(i.arg)}(a,s,n,o)}))}return n=n?n.then(o,o):o()}}function I(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,I(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=c(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,p;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function y(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function g(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(y,this),this.reset(!0)}function S(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,s=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return s.next=s}}return{next:k}}function k(){return{value:void 0,done:!0}}return d.prototype=f,u(_,"constructor",f),u(f,"constructor",d),d.displayName=u(f,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,u(e,o,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},v(T.prototype),u(T.prototype,s,(function(){return this})),e.AsyncIterator=T,e.async=function(t,r,n,a,s){void 0===s&&(s=Promise);var o=new T(i(t,r,n,a),s);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},v(_),u(_,o,"Generator"),u(_,a,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=S,g.prototype={constructor:g,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return o.type="throw",o.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],o=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var u=r.call(s,"catchLoc"),i=r.call(s,"finallyLoc");if(u&&i){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var s=a;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;E(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:S(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}(Et={exports:{}}),Et.exports),St=function(){};St.SNARK_SCALAR_FIELD=i.BigNumber.from("21888242871839275222246405745257275088548364400416034343698204186575808495617"),St.FR_ORDER=i.BigNumber.from("21888242871839275222246405745257275088614511777268538073601725287587578984328");var kt=function(){function e(e,t){void 0===t&&(t=St.SNARK_SCALAR_FIELD),this.m=t,this.n=e.mod(this.m)}var t=e.prototype;return t.add=function(t){return new e(this.n.add(t).mod(this.m),this.m)},t.mul=function(t){return new e(this.n.mul(t).mod(this.m),this.m)},t.sub=function(t){var r=t;return new e(this.n.gte(r)?this.n.sub(r).mod(this.m):this.n.sub(r).add(this.m).mod(this.m),this.m)},t.div=function(t){var r=t,n=this.m,a=i.BigNumber.from("2"),s=At(r,n.sub(a),n);return new e(this.n.mul(s).mod(this.m),this.m)},e.one=function(t){return void 0===t&&(t=St.SNARK_SCALAR_FIELD),new e(i.BigNumber.from("1"),t)},e.zero=function(t){return void 0===t&&(t=St.SNARK_SCALAR_FIELD),new e(i.BigNumber.from("0"),t)},e}();function At(e,t,r){var n=new c.BigInteger(e.toString()),a=new c.BigInteger(t.toString()),s=new c.BigInteger(r.toString()),o=n.modPow(a,s);return i.BigNumber.from(o.toString())}var Rt=function(){};Rt.JUBJUB_Q=St.SNARK_SCALAR_FIELD,Rt.JUBJUB_L=(Rt.JUBJUB_E=i.BigNumber.from("21888242871839275222246405745257275088614511777268538073601725287587578984328")).div(Rt.JUBJUB_C=i.BigNumber.from("8")),Rt.JUBJUB_A=i.BigNumber.from("168700"),Rt.JUBJUB_D=i.BigNumber.from("168696");var Ot,bt=function(){function e(e,t){this.x=e,this.y=t}e.generate=function(){var t=i.BigNumber.from("16540640123574156134436876038791482806971768689494387082833631921987005038935"),r=i.BigNumber.from("20819045374670962167435360035096875258406992893633759881276124905556507972311");return new e(new kt(t),new kt(r))};var t=e.prototype;return t.mul=function(t){for(var r=new e(this.x,this.y),n=e.infinity();!t.eq(i.BigNumber.from("0"));){t.and(i.BigNumber.from("1")).eq(i.BigNumber.from("0"))||(n=n.add(r));var a=new e(r.x,r.y),s=new e(r.x,r.y);r=a.add(s),t=t.div(i.BigNumber.from("2"))}return n},t.add=function(t){if(this.x.n.eq(i.BigNumber.from("0"))&&this.y.n.eq(i.BigNumber.from("0")))return t;var r=this.x,n=this.y,a=t.x,s=t.y,o=r.mul(s.n).add(n.mul(a.n).n),u=r.mul(a.n).mul(n.n).mul(s.n).mul(Rt.JUBJUB_D),c=kt.one().add(u.n),p=o.div(c.n),l=n.mul(s.n),d=r.mul(a.n).mul(Rt.JUBJUB_A),f=l.sub(d.n),m=kt.one().sub(u.n);return new e(p,f.div(m.n))},e.infinity=function(){return new e(new kt(i.BigNumber.from("0")),new kt(i.BigNumber.from("1")))},e}(),Nt=require("blake2b"),Gt=function(e,t,r,n,a,s,o,u,i){this.p=e,this.t=t,this.nRoundsF=r,this.nRoundsP=n,this.seed=a,this.e=s,this.constants_C=null==o?wt.poseidon_constants(e,a+"_constants",r+n):o,this.constants_M=null==u?wt.poseidon_matrix(e,a+"_matrix_0000",t):u,this.security_target=i},wt=function(){function e(){}return e.H=function(e){var t=(new l.TextEncoder).encode(e),r=Buffer.alloc(32);Nt(r.length,null).update(t).final(r);var n=r.toJSON().data,a=i.BigNumber.from("0"),s=0;for(s=0;s<n.length;s++){var o=i.BigNumber.from(n[s]).mul(i.BigNumber.from("256").pow(i.BigNumber.from(s)));a=a.add(o)}return a},e.H_Bigint=function(e){var t=new Uint8Array(Pt.to_bytes(e)),r=Buffer.alloc(32);Nt(r.length,null).update(t).final(r);var n=r.toJSON().data,a=i.BigNumber.from("0"),s=0;for(s=0;s<n.length;s++){var o=i.BigNumber.from(n[s]).mul(i.BigNumber.from("256").pow(i.BigNumber.from(s)));a=a.add(o)}return a},e.poseidon_constants=function(e,t,r){var n;n=[];var a=this.H(t),s=a.mod(e);n.push(s);for(var o=0;o<r-1;o++){var u=(a=this.H_Bigint(a)).mod(e);n.push(u)}return n},e.poseidon_matrix=function(e,t,r){var n,a=this.poseidon_constants(e,t,2*r);n=[];for(var s=0;s<r;s++){var o=void 0;o=[];for(var u=0;u<r;u++){var i=a[s],c=e,p=a[r+u].mod(c),l=At(i.sub(p),c.sub(2),c);o.push(l)}n.push(o)}return n},e.poseidon_sbox=function(e,t,r){var n=r.nRoundsF/2;if(t<n||t>=n+r.nRoundsP)for(var a=0;a<e.length;a++){var s=At(e[a],r.e,r.p);e[a]=s}else{var o=At(e[0],r.e,r.p);e[0]=o}return e},e.poseidon_mix=function(e,t,r){var n;n=[];for(var a=0;a<t.length;a++){for(var s=i.BigNumber.from(0),o=0;o<e.length;o++)s=s.add(t[a][o].mul(e[o]));n.push(s.mod(r))}return n},e.poseidon=function(e,t){var r;r=(r=[]).concat(e);for(var n=0;n<t.t-e.length;n++)r.push(i.BigNumber.from(0));for(n=0;n<t.constants_C.length;n++){for(var a=t.constants_C[n],s=0;s<r.length;s++)r[s]=r[s].add(a);r=this.poseidon_sbox(r,n,t),r=this.poseidon_mix(r,t.constants_M,t.p)}return r[0]},e}(),Lt=function(){function e(e,t){this.R=e,this.s=t}return e.prototype.toStr=function(){return this.R.x.n+" "+this.R.y.n+" "+this.s.n},e}(),Ft=function(){function e(e,t,r){this.A=e,this.sig=t,this.msg=r}return e.prototype.toStr=function(){return this.A.x.n+" "+this.A.y.n+" "+this.sig.toStr()+" "+this.msg.toString()},e}(),Pt=function(){function e(){}return e.to_bytes=function(e){var t=function(e){var t=BigInt(e).toString(16);t.length%2&&(t="0"+t);for(var r=t.length/2,n=new Uint8Array(r),a=0,s=0;a<r;)n[a]=parseInt(t.slice(s,s+2),16),a+=1,s+=2;return Array.from(n)}(e.toString()),r=32-t.length;if(r>0)for(var n=0;n<r;n++)t=[0].concat(t);else t=t.slice(0,32);return t.reverse()},e.prehash_message=function(e){return e},e.hash_secret_python=function(e,t){for(var r,n=this.to_bytes(e.n),a=this.to_bytes(t),s=n.concat(a),o=p.sha512.array(new Uint8Array(s).buffer),u=0;u<o.length;u++){var c=o[u].toString(16);1==c.length&&(c="0"+c),r=[c].concat(r)}var l=r.join("");return i.BigNumber.from("0x"+l).mod(Rt.JUBJUB_L)},e.B=function(){return bt.generate()},e.sign=function(e,t,r){var n=new kt(t.n,t.m),a=r.mul(n.n),s=this.prehash_message(e),o=this.hash_secret_python(t,s),u=i.BigNumber.from(o.toString()),c=r.mul(u),p=this.hash_public(c,a,s),l=t.n.mul(p),d=o.add(l).mod(Rt.JUBJUB_E),f=new Lt(c,new kt(d));return new Ft(a,f,e)},e.as_scalar=function(e){return[e.x.n,e.y.n]},e.hash_public=function(e,t,r){var n;n=this.as_scalar(e).concat(this.as_scalar(t)).concat([r]);var a=new Gt(St.SNARK_SCALAR_FIELD,6,6,52,"poseidon",i.BigNumber.from(5),null,null,128);return wt.poseidon(n,a)},e}(),Ct=function(){function e(){}return e.packPoint=function(t,r){var n=Pt.to_bytes(r).reverse();return e.lt(t,i.BigNumber.from("0"))&&(n[0]=128|n[0]),function(e){var t;t=[];for(var r=0;r<e.length;r++){var n=e[r].toString(16);1==n.length&&(n="0"+n),t.push(n)}return t.join("")}(n)},e.lt=function(e,t){var r,n,a=St.SNARK_SCALAR_FIELD.div(i.BigNumber.from("2")),s=St.SNARK_SCALAR_FIELD;return r=e.gt(a)?e.sub(s):e,n=t.gt(a)?t.sub(s):t,r.lt(n)},e.gt=function(e,t){var r,n,a=St.SNARK_SCALAR_FIELD.div(i.BigNumber.from("2")),s=St.SNARK_SCALAR_FIELD;return r=e.gt(a)?e.sub(s):e,n=t.gt(a)?t.sub(s):t,r.gt(n)},e}(),Dt=function(){function e(){}return e.sign=function(t,r){var n=i.BigNumber.from(t),a=i.BigNumber.from(r),s=new kt(n),o=Pt.B(),u=Pt.sign(a,s,o);return e.formatted(u.sig.R.x.n.toHexString().slice(2)),e.formatted(u.sig.R.y.n.toHexString().slice(2)),e.formatted(u.sig.s.n.toHexString().slice(2)),{Rx:u.sig.R.x.n.toString(),Ry:u.sig.R.y.n.toString(),s:u.sig.s.n.toString()}},e.formatted=function(e){var t=64-e.length;if(t>0)for(var r=0;r<t;r++)e="0"+e;else e=e.slice(0,64);return e},e.generateKeyPair=function(e){for(var t=i.BigNumber.from(0),r=0;r<e.length;r++){var n=i.BigNumber.from(e[r]),a=i.BigNumber.from("256").pow(i.BigNumber.from(r));t=t.add(n.mul(a))}var s=t.mod(Rt.JUBJUB_L),o=i.BigNumber.from(s.toString()),u=Pt.B().mul(o);return{publicKeyX:u.x.n.toString(),publicKeyY:u.y.n.toString(),secretKey:s.toString()}},e.pack=function(e,t){var r=i.BigNumber.from(e),n=i.BigNumber.from(t);return Ct.packPoint(r,n)},e}();(Ot=exports.GetEcDSASigType||(exports.GetEcDSASigType={}))[Ot.HasDataStruct=0]="HasDataStruct",Ot[Ot.WithoutDataStruct=1]="WithoutDataStruct",Ot[Ot.Contract=2]="Contract";var qt=new n("21888242871839275222246405745257275088548364400416034343698204186575808495617",10);function Ut(e){if(e.error)throw console.log("generateKeyPair personalSign error",e.error),Error(e.error);var r=t.sha256(We(e.sig)),n=function(e,t){var r=BigInt(e).toString(16);r.length%2&&(r="0"+r);for(var n=r.length/2,a=new Uint8Array(n),s=0,o=0;s<n;)a[s]=parseInt(r.slice(o,o+2),16),s+=1,o+=2;var u=Array.from(a),i=32-u.length;if(i>0)for(var c=0;c<i;c++)u=[0].concat(u);else u=u.slice(0,32);return u}(i.BigNumber.from("0x"+r.toString("hex")).toString()),a=Dt.generateKeyPair(n);return{keyPair:a,formatedPx:Qe(He(je(a.publicKeyX))),formatedPy:Qe(He(je(a.publicKeyY))),sk:He(je(a.secretKey)),counterFactualInfo:e.counterFactualInfo}}function Mt(e,t){return Kt.apply(this,arguments)}function Kt(){return(Kt=A(gt.mark((function e(t,r){var n,a,s,o,u,i,c,p,l,d,f,m,x,h,_,v,T,I;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.web3,a=t.address,s=t.walletType,o=t.keySeed,u=t.chainId,i=t.accountId,c=t.counterFactualInfo,p=t.isMobile,void 0===r&&(r=void 0),e.next=4,wn(n,a,"",o,s,u,i,c,void 0===p?Ke.any():p);case 4:if(l=e.sent,e.prev=5,d=Ut(l),f=d.keyPair,m=d.formatedPx,x=d.formatedPy,h=d.sk,_=d.counterFactualInfo,!(r&&l.sig.length>3&&r.x&&r.y)||je(m).eq(je(r.x))&&je(x).eq(je(r.y))){e.next=17;break}return v=l.sig.split(""),T=v.splice(l.sig.length-2,2).join(""),l.sig=v.concat((T="1c"==T?"01":"1c").split("")).join(""),I=Ut(l),console.log("personalSign ->","publicKey calc by sign","x",m,"y",x,"publicKey from server",r,"personalSign again->","publicKey calc by sign","x",T,I.formatedPx,"y",I.formatedPy),e.abrupt("return",{keyPair:I.keyPair,formatedPx:I.formatedPx,formatedPy:I.formatedPy,sk:I.sk,counterFactualInfo:_});case 17:return e.abrupt("return",{keyPair:f,formatedPx:m,formatedPy:x,sk:h,counterFactualInfo:_});case 18:e.next=23;break;case 20:throw e.prev=20,e.t0=e.catch(5),Error(e.t0);case 23:case"end":return e.stop()}}),e,null,[[5,20]])})))).apply(this,arguments)}var Bt=function(e,t){var r=Dt.sign(e,t),n=Je(He(Ve(r.Rx)));n.length<64&&(n=new Array(64-n.length).fill(0).join("").toString()+n);var a=Je(He(Ve(r.Ry)));a.length<64&&(a=new Array(64-a.length).fill(0).join("").toString()+a);var s=Je(He(Ve(r.s)));return s.length<64&&(s=new Array(64-s.length).fill(0).join("").toString()+s),"0x"+n+a+s};function Wt(e,t,r,a,o){var u,i=void 0;if("GET"===(e=e.toUpperCase().trim())||"DELETE"===e)i=function(e){var t=Array.from(e);t.sort((function(e,t){return e[0].localeCompare(t[0])}));var r=new Map(t.map((function(e){return[e[0],e[1]]}))),n=[],a=Object.keys(Object.fromEntries(r));return a&&a.forEach((function(t){var r=e.get(t);void 0!==r&&""!==r&&n.push(t+"="+r)})),encodeURIComponent(n.join("&")).replace(/%2C/g,"%252C")}(a);else{if("POST"!==e&&"PUT"!==e)throw new Error(e+" is not supported yet!");u=JSON.stringify(Object.fromEntries(a)),i=encodeURIComponent(u).replace(/[!'()]/g,escape)}var c=e+"&"+encodeURIComponent(""+t+r)+"&"+i;rt("getEdDSASig",c);var p=new n(s(c).toString(),16),l=p.mod(qt).toFormat(0,0,{});return rt("getEdDSASig hash",c,"_hash",p,"hash",l),Bt(o,l)}var Ht=function(e,t){var r,n=new Gt(St.SNARK_SCALAR_FIELD,e.length+1,6,53,"poseidon",i.BigNumber.from(5),null,null,128);r=[];for(var a=0;a<e.length;a++)r.push(i.BigNumber.from(e[a]));var s=wt.poseidon(r,n);return{hash:s,result:Bt(t,s)}};function Yt(){return(Yt=A(gt.mark((function e(t,r,n,a){var s;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){var s;null==(s=t.currentProvider)||s.sendAsync({method:n,params:a,account:r},(function(t,r){e(t?{error:{message:t.message}}:r.error?{error:{message:r.error.message}}:{result:r.result})}))}));case 2:if(!(s=e.sent).result){e.next=7;break}return e.abrupt("return",s);case 7:throw new Error(s.error.message);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jt(e,t,r){return Vt.apply(this,arguments)}function Vt(){return(Vt=A(gt.mark((function e(t,r,n){var a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null==(a=t.currentProvider)?void 0:a.send("eth_signTypedData",[r,n]);case 3:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{error:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Xt(e,t,r,n,a,s,o,u,i){return Jt.apply(this,arguments)}function Jt(){return(Jt=A(gt.mark((function e(t,r,n,a,s,o,i,c,p){var l,d,f,m,x,h,_;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0===i&&(i=""),d=JSON.stringify(r),f=[n,d],e.t0=a,e.next=e.t0===exports.GetEcDSASigType.HasDataStruct?6:e.t0===exports.GetEcDSASigType.WithoutDataStruct?12:e.t0===exports.GetEcDSASigType.Contract?22:31;break;case 6:return e.next=8,new Promise((function(e){t.currentProvider.send({method:"eth_signTypedData_v4",params:f,address:n},(function(t,r){e(t?{error:{message:t.message}}:null!=r&&r.error?{error:{message:r.error.message}}:{result:r.result})}))}));case 8:if((m=e.sent).result){e.next=11;break}throw new Error(m.error.message);case 11:return e.abrupt("return",{ecdsaSig:m.result});case 12:if(x=He(x=u.TypedDataUtils.sign(r)),c){e.next=16;break}throw Error("no walletType set!");case 16:return e.next=18,wn(t,n,i,x,c,s,p?p.accountId:void 0,p,Ke.any());case 18:if(null==(l=_=e.sent)||!l.sig){e.next=21;break}return e.abrupt("return",{ecdsaSig:_.sig,counterFactualInfo:_.counterFactualInfo});case 21:throw new Error(_.error);case 22:return x=He(x=u.TypedDataUtils.sign(r)),rt("Contract Contract hash",x),e.next=27,jt(t,n,d);case 27:if(!(h=e.sent).error){e.next=30;break}throw Error("Contract sig error");case 30:return e.abrupt("return",{ecdsaSig:h});case 31:return e.abrupt("break",32);case 32:throw Error("getEcDSASig unsupported switch case:"+a);case 33:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zt(e){return new r(Dt.pack(e.x,e.y),16)}function Qt(e,t){var r={owner:e.owner,accountID:e.accountId,feeTokenID:e.maxFee.tokenId,maxFee:e.maxFee.volume,publicKey:Be(zt(e.publicKey).toString(16)),validUntil:e.validUntil,nonce:e.nonce};return{types:{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],AccountUpdate:[{name:"owner",type:"address"},{name:"accountID",type:"uint32"},{name:"feeTokenID",type:"uint16"},{name:"maxFee",type:"uint96"},{name:"publicKey",type:"uint256"},{name:"validUntil",type:"uint32"},{name:"nonce",type:"uint32"}]},primaryType:"AccountUpdate",domain:{name:"Loopring Protocol",version:"3.6.0",chainId:t,verifyingContract:e.exchange},message:r}}function Zt(e,t,r,n,a,s){return $t.apply(this,arguments)}function $t(){return($t=A(gt.mark((function e(t,r,n,a,s,o){var u;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=Qt(r,n),e.next=3,Xt(t,u,r.owner,exports.GetEcDSASigType.HasDataStruct,n,s,"",exports.ConnectorNames.Unknown,o);case 3:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function er(e,t,r,n,a,s){return tr.apply(this,arguments)}function tr(){return(tr=A(gt.mark((function e(t,r,n,a,s,o){var u;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=Qt(r,n),e.next=3,Xt(t,u,r.owner,exports.GetEcDSASigType.WithoutDataStruct,n,s,"",a,o);case 3:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rr(e,t,r,n,a){return nr.apply(this,arguments)}function nr(){return(nr=A(gt.mark((function e(t,r,n,a,s){var o;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Qt(r,n),e.next=3,Xt(t,o,r.owner,exports.GetEcDSASigType.Contract,n,a,"",exports.ConnectorNames.Unknown,s);case 3:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ar(e,n){var a=Be(o.soliditySHA3(["uint256","address","bytes"],[e.minGas,new r(Je(e.to),16),t.toBuffer(e.extraData)]).slice(0,20).toString("hex")),s=[new r(t.toBuffer(e.exchange)).toString(),e.accountId,e.token.tokenId,e.token.volume,e.maxFee.tokenId,e.maxFee.volume,a,e.validUntil,e.storageId];return Ht(s,n)}function sr(e,t){return{types:{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Withdrawal:[{name:"owner",type:"address"},{name:"accountID",type:"uint32"},{name:"tokenID",type:"uint16"},{name:"amount",type:"uint96"},{name:"feeTokenID",type:"uint16"},{name:"maxFee",type:"uint96"},{name:"to",type:"address"},{name:"extraData",type:"bytes"},{name:"minGas",type:"uint256"},{name:"validUntil",type:"uint32"},{name:"storageID",type:"uint32"}]},primaryType:"Withdrawal",domain:{name:"Loopring Protocol",version:"3.6.0",chainId:t,verifyingContract:e.exchange},message:{owner:e.owner,accountID:e.accountId,tokenID:e.token.tokenId,amount:e.token.volume,feeTokenID:e.maxFee.tokenId,maxFee:e.maxFee.volume,to:e.to,extraData:e.extraData?e.extraData:"",minGas:e.minGas,validUntil:e.validUntil,storageID:e.storageId}}}function or(e,t,r,n,a,s){return ur.apply(this,arguments)}function ur(){return(ur=A(gt.mark((function e(t,r,n,a,s,o){var u;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=sr(n,a),e.next=3,Xt(t,u,r,exports.GetEcDSASigType.HasDataStruct,a,s,"",exports.ConnectorNames.Unknown,o);case 3:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ir(e,t,r,n,a,s,o){return cr.apply(this,arguments)}function cr(){return(cr=A(gt.mark((function e(t,r,n,a,s,o,u){var i;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=sr(n,a),e.next=3,Xt(t,i,r,exports.GetEcDSASigType.WithoutDataStruct,a,o,"",s,u);case 3:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pr(e,t,r,n,a,s){return lr.apply(this,arguments)}function lr(){return(lr=A(gt.mark((function e(t,r,n,a,s,o){var u;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=sr(n,a),e.next=3,Xt(t,u,r,exports.GetEcDSASigType.Contract,a,s,"",exports.ConnectorNames.Unknown,o);case 3:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dr(e,n){var a=Be(o.soliditySHA3(["uint256","address","bytes"],[e.minGas,new r(Je(e.to),16),t.toBuffer(e.extraData)]).slice(0,20).toString("hex")),s=[new r(t.toBuffer(e.exchange)).toString(),e.accountId,e.token.tokenId,e.token.amount,e.maxFee.tokenId,e.maxFee.amount,a,e.validUntil,e.storageId];return Ht(s,n)}function fr(e){var t,n,a=new Gt(St.SNARK_SCALAR_FIELD,7,6,52,"poseidon",i.BigNumber.from(5),null,null,128),s=Je(e.nftId);s.length>32?(t=new r(s.substr(s.length-32,32),16).toString(10),n=new r(s.substr(0,s.length-32),16).toString(10)):(t=new r(s.substr(0,s.length),16).toString(10),n=0),rt("nftIdLo",t,"nftIdHi",n);var o,u=[e.minterAddress,e.nftType,e.tokenAddress,t,n,e.royaltyPercentage];o=[];for(var c=0;c<u.length;c++)o.push(i.BigNumber.from(u[c]));return wt.poseidon(o,a)}function mr(e,t,r){var n=e.nftId;e.nftId.startsWith("0x")&&(n=r.utils.hexToNumberString(e.nftId));var a={minterAddress:e.minterAddress,toAccountId:e.toAccountId,nftType:e.nftType.toString(),amount:e.amount,nftId:n,nftAddress:e.tokenAddress,feeTokenID:e.maxFee.tokenId,maxFee:e.maxFee.amount,validUntil:e.validUntil,storageID:e.storageId};return{types:{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Mint:[{name:"minterAddress",type:"address"},{name:"toAccountId",type:"uint32"},{name:"nftType",type:"string"},{name:"amount",type:"uint96"},{name:"nftId",type:"uint256"},{name:"nftAddress",type:"address"},{name:"feeTokenID",type:"uint16"},{name:"maxFee",type:"uint96"},{name:"validUntil",type:"uint32"},{name:"storageID",type:"uint32"}]},primaryType:"Mint",domain:{name:"Loopring Protocol",version:"3.6.0",chainId:t,verifyingContract:e.exchange},message:a}}function xr(e,t){return{types:{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Withdrawal:[{name:"owner",type:"address"},{name:"accountID",type:"uint32"},{name:"tokenID",type:"uint16"},{name:"amount",type:"uint96"},{name:"feeTokenID",type:"uint16"},{name:"maxFee",type:"uint96"},{name:"to",type:"address"},{name:"extraData",type:"bytes"},{name:"minGas",type:"uint256"},{name:"validUntil",type:"uint32"},{name:"storageID",type:"uint32"}]},primaryType:"Withdrawal",domain:{name:"Loopring Protocol",version:"3.6.0",chainId:t,verifyingContract:e.exchange},message:{owner:e.owner,accountID:e.accountId,tokenID:e.token.tokenId,amount:e.token.amount,feeTokenID:e.maxFee.tokenId,maxFee:e.maxFee.amount,to:e.to,extraData:e.extraData?e.extraData:"",minGas:e.minGas,validUntil:e.validUntil,storageID:e.storageId}}}function hr(e,t,r,n,a,s,o){return _r.apply(this,arguments)}function _r(){return(_r=A(gt.mark((function e(t,r,n,a,s,o,u){var i;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xr(n,a),e.next=3,Xt(t,i,r,exports.GetEcDSASigType.HasDataStruct,a,o,"",exports.ConnectorNames.Unknown,u);case 3:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vr(e,t,r,n,a,s,o){return Tr.apply(this,arguments)}function Tr(){return(Tr=A(gt.mark((function e(t,r,n,a,s,o,u){var i;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xr(n,a),e.next=3,Xt(t,i,r,exports.GetEcDSASigType.WithoutDataStruct,a,o,"",s,u);case 3:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ir(e,t,r,n,a,s){return yr.apply(this,arguments)}function yr(){return(yr=A(gt.mark((function e(t,r,n,a,s,o){var u;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=xr(n,a),e.next=3,Xt(t,u,r,exports.GetEcDSASigType.Contract,a,s,"",exports.ConnectorNames.Unknown,o);case 3:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Er(e,n){var a=[new r(t.toBuffer(e.exchange)).toString(),e.minterId,e.toAccountId,fr(e),e.amount,e.maxFee.tokenId,e.maxFee.amount,e.validUntil,e.storageId];return Ht(a,n)}function gr(e,n){var a,s,o,u,i=0;e.fillAmountBOrS&&(i=1);var c=[new r(t.toBuffer(e.exchange)).toString(),e.storageId,e.accountId,null!=(a=e.sellToken)&&a.tokenId?e.sellToken.tokenId:"",null!=(s=e.buyToken)&&s.nftData?e.buyToken.nftData:e.buyToken.tokenId,null!=(o=e.sellToken)&&o.amount?e.sellToken.amount:0,null!=(u=e.buyToken)&&u.amount?e.buyToken.amount:0,e.validUntil,e.maxFeeBips,i,new r(t.toBuffer(e.taker)).toString()];return Ht(c,n)}function Sr(e,t,r,n,a,s,o){return kr.apply(this,arguments)}function kr(){return(kr=A(gt.mark((function e(t,r,n,a,s,o,u){var i;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=mr(n,a,t),e.next=3,Xt(t,i,r,exports.GetEcDSASigType.HasDataStruct,a,o,"",exports.ConnectorNames.Unknown,u);case 3:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ar(e,t,r,n,a,s,o){return Rr.apply(this,arguments)}function Rr(){return(Rr=A(gt.mark((function e(t,r,n,a,s,o,u){var i;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=mr(n,a,t),e.next=3,Xt(t,i,r,exports.GetEcDSASigType.WithoutDataStruct,a,o,"",s,u);case 3:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Or(e,t,r,n,a,s){return br.apply(this,arguments)}function br(){return(br=A(gt.mark((function e(t,r,n,a,s,o){var u;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=mr(n,a,t),e.next=3,Xt(t,u,r,exports.GetEcDSASigType.Contract,a,s,"",exports.ConnectorNames.Unknown,o);case 3:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nr(e,n){var a=[new r(t.toBuffer(e.exchange)).toString(),e.payerId,e.payeeId,e.token.tokenId,e.token.volume,e.maxFee.tokenId,e.maxFee.volume,new r(t.toBuffer(e.payeeAddr)).toString(),0,0,e.validUntil,e.storageId];return Ht(a,n)}function Gr(e,t){return{types:{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Transfer:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"tokenID",type:"uint16"},{name:"amount",type:"uint96"},{name:"feeTokenID",type:"uint16"},{name:"maxFee",type:"uint96"},{name:"validUntil",type:"uint32"},{name:"storageID",type:"uint32"}]},primaryType:"Transfer",domain:{name:"Loopring Protocol",version:"3.6.0",chainId:t,verifyingContract:e.exchange},message:{from:e.payerAddr,to:e.payeeAddr,tokenID:e.token.tokenId,amount:e.token.volume,feeTokenID:e.maxFee.tokenId,maxFee:e.maxFee.volume,validUntil:e.validUntil,storageID:e.storageId}}}function wr(e,t,r,n,a,s,o){return Lr.apply(this,arguments)}function Lr(){return(Lr=A(gt.mark((function e(t,r,n,a,s,o,u){var i;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Gr(n,a),e.next=3,Xt(t,i,r,exports.GetEcDSASigType.HasDataStruct,a,o,"",exports.ConnectorNames.Unknown,u);case 3:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fr(e,t,r,n,a,s,o){return Pr.apply(this,arguments)}function Pr(){return(Pr=A(gt.mark((function e(t,r,n,a,s,o,u){var i;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Gr(n,a),e.next=3,Xt(t,i,r,exports.GetEcDSASigType.WithoutDataStruct,a,o,"",s,u);case 3:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cr(e,t,r,n,a,s){return Dr.apply(this,arguments)}function Dr(){return(Dr=A(gt.mark((function e(t,r,n,a,s,o){var u;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=Gr(n,a),e.next=3,Xt(t,u,r,exports.GetEcDSASigType.Contract,a,s,"",exports.ConnectorNames.Unknown,o);case 3:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qr(e,n){var a=[new r(t.toBuffer(e.exchange)).toString(),e.fromAccountId,e.toAccountId,e.token.tokenId,e.token.amount,e.maxFee.tokenId,e.maxFee.amount,new r(t.toBuffer(e.toAddress)).toString(),0,0,e.validUntil,e.storageId];return Ht(a,n)}function Ur(e,t){return{types:{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Transfer:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"tokenID",type:"uint16"},{name:"amount",type:"uint96"},{name:"feeTokenID",type:"uint16"},{name:"maxFee",type:"uint96"},{name:"validUntil",type:"uint32"},{name:"storageID",type:"uint32"}]},primaryType:"Transfer",domain:{name:"Loopring Protocol",version:"3.6.0",chainId:t,verifyingContract:e.exchange},message:{from:e.fromAddress,to:e.toAddress,tokenID:e.token.tokenId,amount:e.token.amount,feeTokenID:e.maxFee.tokenId,maxFee:e.maxFee.amount,validUntil:e.validUntil,storageID:e.storageId}}}function Mr(e,t,r,n,a,s,o){return Kr.apply(this,arguments)}function Kr(){return(Kr=A(gt.mark((function e(t,r,n,a,s,o,u){var i;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ur(n,a),e.next=3,Xt(t,i,r,exports.GetEcDSASigType.HasDataStruct,a,o,"",exports.ConnectorNames.Unknown,u);case 3:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Br(e,t,r,n,a,s,o){return Wr.apply(this,arguments)}function Wr(){return(Wr=A(gt.mark((function e(t,r,n,a,s,o,u){var i;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ur(n,a),e.next=3,Xt(t,i,r,exports.GetEcDSASigType.WithoutDataStruct,a,o,"",s,u);case 3:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hr(e,t,r,n,a,s){return Yr.apply(this,arguments)}function Yr(){return(Yr=A(gt.mark((function e(t,r,n,a,s,o){var u;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=Ur(n,a),e.next=3,Xt(t,u,r,exports.GetEcDSASigType.Contract,a,s,"",exports.ConnectorNames.Unknown,o);case 3:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jr(e,t){var r=He(u.TypedDataUtils.sign(e));rt("eddsaSign",r);var a=He(new n(r,16).idiv(8)),s=Dt.sign(t,a);return{eddsaSig:Qe(He(je(s.Rx)))+Je(Qe(He(je(s.Ry))))+Je(Qe(He(je(s.s))))}}function Vr(e,r,a,s,o){var i=[Buffer.from("1901","hex")];i.push(Buffer.from(e.slice(2),"hex")),i.push(u.TypedDataUtils.hashStruct(r,a,s));var c=He(t.sha3(Buffer.concat(i))),p=He(new n(c,16).idiv(8)),l=Dt.sign(o,p);return{eddsaSig:Qe(He(je(l.Rx)))+Je(Qe(He(je(l.Ry))))+Je(Qe(He(je(l.s))))}}function Xr(e,t){return{types:{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],PoolJoin:[{name:"owner",type:"address"},{name:"joinAmounts",type:"uint96[]"},{name:"joinStorageIDs",type:"uint32[]"},{name:"mintMinAmount",type:"uint96"},{name:"fee",type:"uint96"},{name:"validUntil",type:"uint32"}]},primaryType:"PoolJoin",domain:{name:t.ammName,version:"1.0.0",chainId:t.chainId,verifyingContract:t.poolAddress},message:{owner:e.owner,joinAmounts:[e.joinTokens.pooled[0].volume,e.joinTokens.pooled[1].volume],joinStorageIDs:e.storageIds,mintMinAmount:e.joinTokens.minimumLp.volume,fee:e.fee,validUntil:e.validUntil}}}function Jr(e,t){if(e.domainSeparator){var r=Xr(e,t);return Vr(e.domainSeparator,r.primaryType,r.message,r.types,t.eddsaKey)}return jr(Xr(e,t),t.eddsaKey)}function zr(e,t){return{types:{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],PoolExit:[{name:"owner",type:"address"},{name:"burnAmount",type:"uint96"},{name:"burnStorageID",type:"uint32"},{name:"exitMinAmounts",type:"uint96[]"},{name:"fee",type:"uint96"},{name:"validUntil",type:"uint32"}]},primaryType:"PoolExit",domain:{name:t.ammName,version:"1.0.0",chainId:t.chainId,verifyingContract:t.poolAddress},message:{owner:e.owner,burnAmount:e.exitTokens.burned.volume,burnStorageID:e.storageId,exitMinAmounts:[e.exitTokens.unPooled[0].volume,e.exitTokens.unPooled[1].volume],fee:e.maxFee,validUntil:e.validUntil}}}function Qr(e,t){if(e.domainSeparator){var r=zr(e,t);return Vr(e.domainSeparator,r.primaryType,r.message,r.types,t.eddsaKey)}return jr(zr(e,t),t.eddsaKey)}var Zr=function(e){return Object.keys(e).sort().reduce((function(t,r){return t[r]=e[r],t}),{})},$r=function(e){for(var t=new URLSearchParams(e.search),r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];for(var s=0,o=n;s<o.length;s++){var u=o[s];if(u){var i=Zr(u);for(var c in i)null!=i[c]&&t.set(c,i[c])}}e.search=t.toString()},en=function(){function e(e,t){this.baseOptions={},this.baseOptions={baseURL:e,timeout:t,headers:{feeVersion:"v2","Content-Type":"application/json",pf:"web"},validateStatus:function(e){return e>=200&&e<300||400===e},insecure:!0},this._axios=a.create(this.baseOptions)}var t=e.prototype;return t.getIns=function(){return this._axios},t.request=function(){var e=A(gt.mark((function e(t,r){var n,a,s,o,u,i,c,p,l,d,f,m,x,h,_;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===r&&(r={}),c=new URL(t.url,this.baseOptions.baseURL),p=R({method:t.method},r),$r(c,null==t?void 0:t.queryParams),l=(T=c).pathname+T.search+T.hash,d={},null!=t&&t.apiKey&&(d["X-API-KEY"]=null==t?void 0:t.apiKey),f=null==(n=t.sigObj)?void 0:n.sig,t.sigFlag===exports.SIG_FLAG.NO_SIG||null!=t&&null!=(a=t.sigObj)&&a.dataToSig){e.next=10;break}throw Error("no dataToSig field!");case 10:e.t0=t.sigFlag,e.next=e.t0===exports.SIG_FLAG.NO_SIG?13:e.t0===exports.SIG_FLAG.EDDSA_SIG_POSEIDON?14:e.t0===exports.SIG_FLAG.EDDSA_SIG?16:18;break;case 13:return e.abrupt("break",19);case 14:return f=Ht(null==(s=t.sigObj)?void 0:s.dataToSig,null==(o=t.sigObj)?void 0:o.PrivateKey).result,e.abrupt("break",19);case 16:return f=Wt(t.method,this.baseOptions.baseURL,t.url,null==(u=t.sigObj)?void 0:u.dataToSig,null==(i=t.sigObj)?void 0:i.PrivateKey),e.abrupt("break",19);case 18:return e.abrupt("break",19);case 19:return f?d["X-API-SIG"]=f:null!=t&&t.ecdsaSignature?d["X-API-SIG"]=null==t?void 0:t.ecdsaSignature:null!=t&&t.eddsaSignature&&(d["X-API-SIG"]=null==t?void 0:t.eddsaSignature),null!=t&&t.bodyParams&&(x=null==t?void 0:t.bodyParams,f&&null!=(m=t.sigObj)&&m.sigPatch&&(x[null==(h=t.sigObj)?void 0:h.sigPatch]=f),null!=t&&t.ecdsaSignature&&(x.ecdsaSignature=null==t?void 0:t.ecdsaSignature),null!=t&&t.eddsaSignature&&(x.eddsaSignature=null==t?void 0:t.eddsaSignature),p.data="string"!=typeof(v=x)?JSON.stringify(void 0!==v?Zr(v):{}):v||""),d=R({},this.baseOptions.headers,d),_=R({},this.baseOptions,{headers:d},p,{url:this.baseOptions.baseURL+l}),e.next=25,this._axios.request(_);case 25:return e.abrupt("return",e.sent);case 26:case"end":return e.stop()}var v,T}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),t.updateOpt=function(e){return this._axios.interceptors.request.use((function(t){return null!=e&&e.baseUrl&&(t.baseURL=null==e?void 0:e.baseUrl),null!=e&&e.url&&(t.url=null==e?void 0:e.url),null!=e&&e.apiKey&&(t.headers["X-API-KEY"]=null==e?void 0:e.apiKey),null!=e&&e.signature&&(t.headers["X-API-SIG"]=null==e?void 0:e.signature),t})),this},t.addApiKey=function(e){return this.updateOpt({apiKey:e})},t.addSig=function(e){return this.updateOpt({signature:e})},t.updateBaseUrl=function(e){return this.updateOpt({baseUrl:e})},t.handle400=function(e){void 0===e&&(e=void 0),this._axios.interceptors.response.use((function(t){return 400==t.status&&console.log(t.request+" got "+t.statusText),e&&e(),t}))},e}(),tn=function(){function e(e){var t=e.inputs,r=e.name,n=e.outputs,a=e.constant;this.name=r,this.inputTypes=t.map((function(e){return e.type})),this.inputs=t,this.outputTypes=n.map((function(e){return e.type})),this.outputs=n,this.constant=a,this.methodAbiHash=He(o.methodID(r,this.inputTypes))}var t=e.prototype;return t.encodeInputs=function(e){var t=this.parseInputs(e);return this.methodAbiHash+Je(He(o.rawEncode(this.inputTypes,t)))},t.decodeOutputs=function(e){return this.parseOutputs(o.rawDecode(this.outputTypes,We(e)))},t.decodeEncodedInputs=function(e){return this.parseOutputs(o.rawDecode(this.inputTypes,We(Be(e))))},t.parseInputs=function(e){return void 0===e&&(e={}),this.inputs.map((function(t){var r=t.name;if(void 0===e[r])throw new Error("Parameter "+r+" of type "+t.type+" is required!");return e[r]}))},t.parseOutputs=function(e){return e.map((function(e){return e instanceof r?He(e):e}))},e}(),rn=function(){function e(e){var t=e.filter((function(e){return"function"===e.type}));this.abiFunctions=t.reduce((function(e,t){var r,n=t.inputs.map((function(e){return e.type})),a=t.name+"("+n.toString()+")",s=o.methodID(t.name,n);return R({},e,((r={})[t.name]=new tn(t),r[a]=new tn(t),r[s]=new tn(t),r))}),{})}var t=e.prototype;return t.encodeInputs=function(e,t){var r=this.abiFunctions[e];if(r)return r.encodeInputs(t);throw new Error("No  "+e+" method according to abi ")},t.decodeOutputs=function(e,t){var r=this.abiFunctions[e];if(r)return r.decodeOutputs(t);throw new Error("No  "+e+" method according to abi ")},t.decodeEncodeInputs=function(e){var t=(e=He(e)).slice(0,10),r=this.abiFunctions[t];if(r)return r.decodeEncodedInputs(e.slice(10));throw new Error("No corresponding method according to abi ")},e}(),nn=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"}],an=[{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"tokenAddress",type:"address"},{internalType:"uint32",name:"accountID",type:"uint32"}],name:"forceWithdraw",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"tokenAddress",type:"address"},{internalType:"uint96",name:"amount",type:"uint96"},{internalType:"bytes",name:"extraData",type:"bytes"}],name:"deposit",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"enum ExchangeData.NftType",name:"nftType",type:"uint8"},{internalType:"address",name:"tokenAddress",type:"address"},{internalType:"uint256",name:"nftId",type:"uint256"},{internalType:"uint96",name:"amount",type:"uint96"},{internalType:"bytes",name:"extraData",type:"bytes"}],name:"depositNFT",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"token",type:"address"}],name:"withdrawFromDepositRequest",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"owners",type:"address[]"},{internalType:"address[]",name:"tokens",type:"address[]"}],name:"withdrawFromApprovedWithdrawals",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"token",type:"address"}],name:"getAmountWithdrawable",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"bytes32",name:"txHash",type:"bytes32"}],name:"approveTransaction",outputs:[],stateMutability:"nonpayable",type:"function"}],sn={__proto__:null,default:an},on=[{inputs:[{internalType:"bytes",name:"_data",type:"bytes"},{internalType:"bytes",name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{internalType:"bytes4",name:"magicValue",type:"bytes4"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"_data",type:"bytes32"},{internalType:"bytes",name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{internalType:"bytes4",name:"magicValue",type:"bytes4"}],stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_account",type:"address"},{name:"_index",type:"uint256"}],name:"getKeyData",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"}],un={__proto__:null,default:on},cn=[{inputs:[{internalType:"address",name:"wallet",type:"address"}],name:"lock",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"wallet",type:"address"},{internalType:"address",name:"guardian",type:"address"}],name:"unlock",outputs:[],stateMutability:"nonpayable",type:"function"}],pn={__proto__:null,default:cn},ln=yt({__proto__:null,default:nn}),dn=yt(sn),fn=yt(un),mn=yt({__proto__:null,default:[{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"}]}),xn=yt({__proto__:null,default:[{inputs:[{internalType:"string",name:"uri_",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256[]",name:"ids",type:"uint256[]"},{indexed:!1,internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"TransferBatch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"TransferSingle",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"value",type:"string"},{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"URI",type:"event"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"uri",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"accounts",type:"address[]"},{internalType:"uint256[]",name:"ids",type:"uint256[]"}],name:"balanceOfBatch",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"amounts",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeBatchTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"}]}),hn=yt(pn),_n=new rn(ln),vn=new rn(dn),Tn=new rn(fn),In={ERC20Token:_n,ERC1155:new rn(xn),ERC721:new rn(mn),ExchangeContract:vn,ContractWallet:Tn,erc721Abi:mn,erc1155Abi:xn,HeBao:new rn(hn)},yn={AbiFunction:tn,Contract:rn,Contracts:In},En="Sign this message to access Loopring Exchange: ${exchangeAddress} with key nonce: ${nonce}",gn=function(){function e(e,t,r){var n;void 0===t&&(t=6e3),void 0===r&&((n={})[exports.ChainId.MAINNET]="https://api3.loopring.io",n[exports.ChainId.GOERLI]="https://uat2.loopring.io",r=n),this.baseUrl="",this.chainId=exports.ChainId.MAINNET,e.baseUrl?this.baseUrl=e.baseUrl:this.setChainId(void 0!==e.chainId?e.chainId:exports.ChainId.GOERLI),this.baseUrlMap=r,this.timeout=t}var t=e.prototype;return t.genErr=function(e){if(e.hasOwnProperty("request"))return R({message:exports.ConnectorError.HTTP_ERROR},e,{msg:exports.ConnectorError.HTTP_ERROR,code:exports.LoopringErrorCode.HTTP_ERROR});if(e&&null!=e&&e.message){var t=Reflect.ownKeys(exports.ConnectorError).find((function(t){return-1!==(null==e?void 0:e.message.search(exports.ConnectorError[t]))}));return t?R({},e,{message:t,code:exports.LoopringErrorCode[t]}):R({},e instanceof Error?Reflect.ownKeys(e).reduce((function(t,r){var n;return R({},t,((n={})[r]=e[r.toString()],n))}),{}):e,{code:exports.LoopringErrorCode.SKD_UNKNOW})}return{message:"unKnown",code:exports.LoopringErrorCode.SKD_UNKNOW}},t.returnTxHash=function(e){var t,r;return null!=e&&e.resultInfo?R({},e.resultInfo,{message:null!=(t=e.resultInfo)&&t.msg?null==(r=e.resultInfo)?void 0:r.msg:null==e?void 0:e.resultInfo.message}):R({},e,{raw_data:e})},t.getAvailableBroker=function(){var e=A(gt.mark((function e(t){var r;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={sigFlag:exports.SIG_FLAG.NO_SIG,queryParams:t,url:exports.LOOPRING_URLs.GET_AVAILABLE_BROKER,method:exports.ReqMethod.GET},e.next=3,this.makeReq().request(r);case 3:return e.abrupt("return",e.sent.data);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.getCounterFactualInfo=function(){var e=A(gt.mark((function e(t){var r,n,a,s;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={url:exports.LOOPRING_URLs.COUNTER_FACTUAL_INFO,queryParams:t,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(r);case 3:return s=void 0,(n=e.sent.data)&&null!=n&&n.resultInfo?s=null==n?void 0:n.resultInfo:a=R({},n),e.abrupt("return",{counterFactualInfo:a,error:s,raw_data:n});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.setChainId=function(e){this.baseUrl=this.baseUrlMap&&this.baseUrlMap[0]?Gn(e,this.baseUrlMap):Gn(e),this.chainId=e},t.setBaseUrl=function(e){this.baseUrl=e},t.makeReq=function(){return new en(this.baseUrl,this.timeout)},e}();function Sn(e,t,r,n){return kn.apply(this,arguments)}function kn(){return(kn=A(gt.mark((function e(t,r,n,a){return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){try{t.eth.personal.ecRecover(n,a,(function(t,n){!t&&n?e({result:n.toLowerCase()===r.toLowerCase()}):(e({error:"ecRecover 1:"+t+"or no address:"+n}),rt("ecRecover error",t))}))}catch(t){rt("ecRecover error",t),e({error:"ecRecover 2:"+t})}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function An(e,t,r,n){return Rn.apply(this,arguments)}function Rn(){return(Rn=A(gt.mark((function e(r,n,a,s){return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var o=t.hashPersonalMessage(We(a)),u=yn.Contracts.ContractWallet.encodeInputs("isValidSignature(bytes32,bytes)",{_data:o,_signature:We(s)});r.eth.call({to:n,data:u},(function(t,r){if(t)e({error:t});else{var n=yn.Contracts.ContractWallet.decodeOutputs("isValidSignature(bytes32,bytes)",r);e({result:He(We(n[0]))===u.slice(0,10)})}}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function On(e,t,r,n){return bn.apply(this,arguments)}function bn(){return(bn=A(gt.mark((function e(r,n,a,s){return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){r.eth.call({to:"0xADc92d1fD878580579716d944eF3460E241604b7",data:yn.Contracts.ContractWallet.encodeInputs("getKeyData",{_account:n,_index:3})},(function(r,n){if(r)e({error:r});else{var o=t.fromRpcSig(s),u=t.hashPersonalMessage(t.keccak256(We(a))),i=Be(yn.Contracts.ContractWallet.decodeOutputs("getKeyData",n)[0]),c=He(t.pubToAddress(t.ecrecover(u,o.v,o.r,o.s)));e({result:c.toLowerCase()===i.toLowerCase()})}}))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nn(){return(Nn=A(gt.mark((function e(r,n,a){var s,o,u,i,c,p,l,d,f;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Buffer.from(n,"utf8"),a=a.split("x")[1],o=[Buffer.from("Ethereum Signed Message:\n"+s.length,"utf8"),s],u=t.keccak(Buffer.concat(o)),i=Buffer.from(a.substring(0,64),"hex"),c=Buffer.from(a.substring(64,128),"hex"),p=Number(Be(a.substring(128,130))),(l=p)<=1&&(l+=27),d=t.ecrecover(u,l,i,c),f="0x"+t.pubToAddress(d).toString("hex"),r.toLowerCase()!==f.toLowerCase()&&rt("v:",l,"old_v:",p," recoveredAddress:",f),e.abrupt("return",new Promise((function(e){return e({result:r.toLowerCase()===f.toLowerCase()})})));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}gn.KEY_MESSAGE=En;var Gn=function(e,t){var r;void 0===t&&((r={})[exports.ChainId.MAINNET]="https://api3.loopring.io",r[exports.ChainId.GOERLI]="https://uat2.loopring.io",t=r);var n="";switch(e){case exports.ChainId.MAINNET:n=t[exports.ChainId.MAINNET];break;default:n=t[exports.ChainId.GOERLI]}return n};function wn(e,t,r,n,a,s,o,u,i){return Ln.apply(this,arguments)}function Ln(){return(Ln=A(gt.mark((function e(t,r,n,a,s,o,u,i,c){return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",{error:"personalSign got no account"});case 2:return e.abrupt("return",new Promise((function(e){try{t.eth.personal.sign(a,r,n,function(){var n=A(gt.mark((function n(p,l){var d,f,m,x,h,_,v,T,I,y,E;return gt.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(p){n.next=47;break}if(rt("ecRecover before","msg",a,"result",l,i),!i||!u){n.next=10;break}return rt("fcWalletValid counterFactualInfo accountId:"),n.next=6,Fn(t,r,a,l,u,o,i);case 6:if(!(v=n.sent).result){n.next=10;break}return e({sig:l,counterFactualInfo:v.counterFactualInfo}),n.abrupt("return");case 10:if("undefined"==typeof window||!(null!=(d=window)&&null!=(f=d.ethereum)&&f.isImToken||null!=(m=window)&&null!=(x=m.ethereum)&&x.isMetaMask)||!c||s!==exports.ConnectorNames.MetaMask){n.next=16;break}return n.next=13,null==(T=window.ethereum)?void 0:T.request({method:"eth_requestAccounts"});case 13:if(null==(I=n.sent)||!I.find((function(e){return e.toLowerCase()===r.toLowerCase()}))){n.next=16;break}return n.abrupt("return",e({sig:l}));case 16:if(null==t||null==(h=t.currentProvider)||!h.isWalletLink||null==t||null==(_=t.currentProvider)||!_.isConnected){n.next=21;break}return n.abrupt("return",e({sig:l}));case 21:return n.next=23,Sn(t,r,a,l);case 23:if(rt("ecRecover after",(y=n.sent).result),!y.result){n.next=27;break}return n.abrupt("return",e({sig:l}));case 27:return n.next=29,An(t,r,a,l);case 29:if(!n.sent.result){n.next=32;break}return n.abrupt("return",e({sig:l}));case 32:if(!u){n.next=38;break}return n.next=35,Fn(t,r,a,l,u,o);case 35:if(!(E=n.sent).result){n.next=38;break}return n.abrupt("return",e({sig:l,counterFactualInfo:E.counterFactualInfo}));case 38:return n.next=40,On(t,r,a,l);case 40:if(!n.sent.result){n.next=43;break}return n.abrupt("return",e({sig:l}));case 43:return console.log("web3.eth.personal.sign Valid, valid 5 ways, all failed!"),n.abrupt("return",e({error:"web3.eth.personal.sign Valid, valid 5 ways, all failed!"}));case 47:return n.abrupt("return",e({error:"personalSign err before Validate:"+p}));case 48:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}catch(t){e({error:t})}})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fn(e,t,r,n,a,s,o){return Pn.apply(this,arguments)}function Pn(){return(Pn=A(gt.mark((function e(t,r,n,a,s,o,u){var i,c;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=new gn({chainId:o}),void 0!==u&&u.walletOwner){e.next=5;break}return e.next=4,i.getCounterFactualInfo({accountId:s});case 4:u=e.sent.counterFactualInfo;case 5:if(!u||!u.walletOwner){e.next=18;break}return c=a.startsWith("0x")?a.slice(0,132):a,e.next=9,Sn(t,u.walletOwner,n,c);case 9:if(!e.sent.result){e.next=15;break}return rt("fcWalletValid e:",a,u),e.abrupt("return",{result:a,counterFactualInfo:u});case 15:return e.abrupt("return",{error:"valid walletOwner failed"});case 16:e.next=19;break;case 18:return e.abrupt("return",{error:"valid walletOwner failed"});case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Cn=function(e){function t(){return e.apply(this,arguments)||this}return O(t,e),t.prototype.getWsKey=function(){var e=A(gt.mark((function e(){var t,r;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={url:exports.LOOPRING_URLs.GET_WS_KEY,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(t);case 3:if(null==(r=e.sent.data)||!r.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==r?void 0:r.resultInfo));case 6:return e.abrupt("return",{wsKey:r.key,raw_data:r});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(gn),Dn=function(e){return""===e.trim()?"0":e};function qn(e,t){void 0===t&&(t=0);var r={};return e instanceof Array&&e.forEach((function(e,n,a){var s="";switch(t){case 1:s=e.type;break;default:s=e.token}r[s]=e.fee})),r}function Un(e,t){void 0===t&&(t=!1);var r=[],a=new n(0),s=new n(0),o=[],u=[],i=[];return e instanceof Array&&e.forEach((function(e){var t=parseFloat(e[0]),c=new n(e[1]),p=new n(e[2]);a=a.plus(c),s=s.plus(p),r.push({price:t,amt:c.toString(),vol:p.toString(),amtTotal:a.toString(),volTotal:s.toString()}),o.push(t),u.push(a.toString()),i.push(s.toString())})),t&&(r.reverse(),o.reverse(),u.reverse(),i.reverse()),{ab_arr:r,ab_prices:o,amtTotal:a,volTotal:s,ab_amtTotals:u,ab_volTotals:i,best:0}}function Mn(e){var t=e._asks,r=e.askReverse,n=e.bidReverse;void 0===r&&(r=!1),void 0===n&&(n=!0);var a=Un(e._bids,n),s=Un(t,r);return{bids:a,asks:s,mid_price:(a.ab_prices[a.ab_prices.length-1]+s.ab_prices[0])/2}}var Kn,Bn=function(e){function t(){return e.apply(this,arguments)||this}O(t,e);var r=t.prototype;return r.getRelayerCurrentTime=function(){var e=A(gt.mark((function e(){var t,r;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={url:exports.LOOPRING_URLs.GET_RELAYER_CURRENT_TIME,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(t);case 3:if(null==(r=e.sent.data)||!r.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==r?void 0:r.resultInfo));case 6:return e.abrupt("return",R({},r,{raw_data:r}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.getProtocolPortrait=function(){var e=A(gt.mark((function e(){var t,r;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={url:exports.LOOPRING_URLs.GET_PROTOCOL_PORTRAIT,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(t);case 3:if(null==(r=e.sent.data)||!r.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==r?void 0:r.resultInfo));case 6:return e.abrupt("return",R({},r,{raw_data:r}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.getExchangeFeeInfo=function(){var e=A(gt.mark((function e(){var t,r;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={url:exports.LOOPRING_URLs.GET_EXCHANGE_FEEINFO,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(t);case 3:if(null==(r=e.sent.data)||!r.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==r?void 0:r.resultInfo));case 6:return e.abrupt("return",{orderbookTradingFeesStablecoin:r[exports.VipCatergory.ORDERBOOK_TRADING_FEES_STABLECOIN],orderbookTradingFees:r[exports.VipCatergory.ORDERBOOK_TRADING_FEES],ammTradingFees:r[exports.VipCatergory.AMM_TRADING_FEES],otherFees:r[exports.VipCatergory.OTHER_FEES],raw_data:r});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.getWithdrawalAgents=function(){var e=A(gt.mark((function e(t){var r,n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={queryParams:t,url:exports.LOOPRING_URLs.GET_WITHDRAWAL_AGENTS,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(r);case 3:if(null==(n=e.sent.data)||!n.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==n?void 0:n.resultInfo));case 6:return a={},n&&n.length>0&&n.forEach((function(e){e.symbol&&(a[e.symbol]=e)})),e.abrupt("return",{supportTokenMap:a,raw_data:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.getRecommendedMarkets=function(){var e=A(gt.mark((function e(){var t,r,n;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={url:exports.LOOPRING_URLs.GET_RECOMENDED_MARKETS,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(t);case 3:if(null==(r=e.sent.data)||!r.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==r?void 0:r.resultInfo));case 6:return n=[],null!=r&&r.recommended&&(n="string"==typeof r.recommended?r.recommended.split(","):r.recommended),e.abrupt("return",{recommended:n,raw_data:r});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.getMarkets=function(){var e=A(gt.mark((function e(t){var r,n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=exports.LOOPRING_URLs.GET_MARKETS),r={url:t,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=4,this.makeReq().request(r);case 4:if(null==(n=e.sent.data)||!n.resultInfo){e.next=7;break}return e.abrupt("return",R({},null==n?void 0:n.resultInfo));case 7:return a=tt(n,t),e.abrupt("return",{markets:a.markets,pairs:a.pairs,tokenArr:a.tokenArr,tokenArrStr:a.tokenArrStr,marketArr:a.marketArr,marketArrStr:a.marketArrStr,raw_data:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.getMixMarkets=function(){var e=A(gt.mark((function e(){return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMarkets(exports.LOOPRING_URLs.GET_MIX_MARKETS);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.getTokens=function(){var e=A(gt.mark((function e(){var t,r;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={url:exports.LOOPRING_URLs.GET_TOKENS,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(t);case 3:if(null==(r=e.sent.data)||!r.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==r?void 0:r.resultInfo));case 6:return e.abrupt("return",R({},$e(r),{raw_data:r}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.getEthBalances=function(){var e=A(gt.mark((function e(t){var r,n;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={queryParams:t,url:exports.LOOPRING_URLs.GET_ETH_BALANCES,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(r);case 3:if(null==(n=e.sent.data)||!n.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==n?void 0:n.resultInfo));case 6:return e.abrupt("return",{ethBalance:n.amount,raw_data:n});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.getTokenBalances=function(){var e=A(gt.mark((function e(t){var r,n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={queryParams:R({},t,{token:t.token.join(",")}),url:exports.LOOPRING_URLs.GET_TOKEN_BALANCES,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(r);case 3:if(null==(n=e.sent.data)||!n.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==n?void 0:n.resultInfo));case 6:return a=new Map,(null==n?void 0:n.amount)instanceof Array&&n.amount.forEach((function(e,r){a.set(t.token[r],e)})),e.abrupt("return",{tokenBalances:a,raw_data:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.getAllTokenBalances=function(){var e=A(gt.mark((function e(t){var r,n;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={queryParams:R({},t),url:exports.LOOPRING_URLs.GET_AKK_TOKEN_BALANCES,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(r);case 3:if(null==(n=e.sent.data)||!n.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==n?void 0:n.resultInfo));case 6:return e.abrupt("return",{tokenBalances:n,raw_data:n});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.getAllowances=function(){var e=A(gt.mark((function e(t){var r,n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={queryParams:R({},t,{token:t.token.join(",")}),url:exports.LOOPRING_URLs.GET_ALLOWANCES,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(r);case 3:if(null==(n=e.sent.data)||!n.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==n?void 0:n.resultInfo));case 6:return a=new Map,(null==n?void 0:n.allowances)instanceof Array&&n.allowances.forEach((function(e,r){a.set(t.token[r],e)})),e.abrupt("return",{tokenAllowances:a,raw_data:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.getExchangeInfo=function(){var e=A(gt.mark((function e(){var t,r,n;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={url:exports.LOOPRING_URLs.GET_EXCHANGE_INFO,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(t);case 3:if(null==(r=e.sent.data)||!r.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==r?void 0:r.resultInfo));case 6:return n={ammExitFees:qn(r.ammExitFees),chainId:r.chainId,depositAddress:r.depositAddress,exchangeAddress:r.exchangeAddress,fastWithdrawalFees:qn(r.fastWithdrawalFees),onchainFees:qn(r.onchainFees,1),openAccountFees:qn(r.openAccountFees),transferFees:qn(r.transferFees),updateFees:qn(r.updateFees),withdrawalFees:qn(r.withdrawalFees)},e.abrupt("return",{exchangeInfo:n,raw_data:r});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.getMixDepth=function(){var e=A(gt.mark((function e(t){return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDepth(t,exports.LOOPRING_URLs.GET_MIX_DEPTH);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.getDepth=function(){var e=A(gt.mark((function e(t,r){var n,a,s,o,u,i,c,p;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r=exports.LOOPRING_URLs.GET_DEPTH),void 0===(null==t?void 0:t.level)&&(t.level=0),void 0===(null==t?void 0:t.limit)&&(t.limit=50),n={queryParams:t,url:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=6,this.makeReq().request(n);case 6:if(null==(a=e.sent.data)||!a.resultInfo){e.next=9;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 9:return s=a.timestamp,o=Mn({_asks:a.asks,_bids:a.bids}),u=o.asks,i=o.bids,c=o.mid_price,p={symbol:a.market,version:parseInt(a.version),timestamp:s,mid_price:c,bids:i.ab_arr,bids_prices:i.ab_prices,bids_amtTotals:i.ab_amtTotals,bids_volTotals:i.ab_volTotals,bids_amtTotal:i.amtTotal.toString(),bids_volTotal:i.volTotal.toString(),asks:u.ab_arr,asks_prices:u.ab_prices,asks_amtTotals:u.ab_amtTotals,asks_volTotals:u.ab_volTotals,asks_amtTotal:u.amtTotal.toString(),asks_volTotal:u.volTotal.toString()},e.abrupt("return",{depth:p,raw_data:a});case 13:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),r.getMixTicker=function(){var e=A(gt.mark((function e(t){return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getTicker(t,exports.LOOPRING_URLs.GET_MIX_TICKER);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.getTicker=function(){var e=A(gt.mark((function e(t,r){var n,a,s,o,u;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r=exports.LOOPRING_URLs.GET_TICKER),n={url:r,queryParams:t,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=4,this.makeReq().request(n);case 4:if(null==(a=e.sent.data)||!a.resultInfo){e.next=7;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 7:return o={},u=[],(s=a.tickers)&&s.length&&s.forEach((function(e,t,r){var n=parseFloat(e[4]),a=parseFloat(e[7]),s=e[0].replace("COMBINE-",""),i=m(s),c=i.base,p=i.quote,l=0;isNaN(n)||isNaN(a)||(l=(a-n)/n);var d={symbol:s,base:c,quote:p,timestamp:parseInt(e[1]),base_token_volume:e[2],quote_token_volume:e[3],open:n,high:parseFloat(e[5]),low:parseFloat(e[6]),close:a,count:parseInt(e[8]),bid:parseFloat(e[9]),ask:parseFloat(e[10]),base_fee_amt:Dn(e[11]),quote_fee_amt:Dn(e[12]),change:l};o[s]=d,u.push(d)})),e.abrupt("return",{tickMap:o,tickList:u,raw_data:a});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),r.getAllMixTickers=function(){var e=A(gt.mark((function e(t){var r,n;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t=void 0),t){e.next=12;break}return e.next=4,this.getMixMarkets();case 4:if(!(n=e.sent).marketArrStr){e.next=9;break}r={market:n.marketArrStr},e.next=10;break;case 9:return e.abrupt("return",n);case 10:e.next=13;break;case 12:r={market:t};case 13:return e.next=15,this.getMixTicker(r);case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.getAllTickers=function(){var e=A(gt.mark((function e(t){var r,n;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t=void 0),t){e.next=12;break}return e.next=4,this.getMarkets();case 4:if(!(n=e.sent).marketArrStr){e.next=9;break}r={market:n.marketArrStr},e.next=10;break;case 9:return e.abrupt("return",n);case 10:e.next=13;break;case 12:r={market:t};case 13:return e.next=15,this.getTicker(r);case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.getMixCandlestick=function(){var e=A(gt.mark((function e(t){return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCandlestick(t,exports.LOOPRING_URLs.GET_MIX_CANDLESTICK);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.getCandlestick=function(){var e=A(gt.mark((function e(t,r){var n,a,s,o,u,i,c;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r=exports.LOOPRING_URLs.GET_CANDLESTICK),n={url:r,queryParams:t,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=4,this.makeReq().request(n);case 4:if(null==(a=e.sent.data)||!a.resultInfo){e.next=7;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 7:s=6e4,e.t0=t.interval,e.next=e.t0===exports.TradingInterval.min1?11:e.t0===exports.TradingInterval.min5?12:e.t0===exports.TradingInterval.min15?14:e.t0===exports.TradingInterval.min30?16:e.t0===exports.TradingInterval.hr1?18:e.t0===exports.TradingInterval.hr2?20:e.t0===exports.TradingInterval.hr4?22:e.t0===exports.TradingInterval.hr12?24:e.t0===exports.TradingInterval.d1?26:e.t0===exports.TradingInterval.w1?28:30;break;case 11:return e.abrupt("break",31);case 12:return s=3e5,e.abrupt("break",31);case 14:return s=9e5,e.abrupt("break",31);case 16:return s=18e5,e.abrupt("break",31);case 18:return s=36e5,e.abrupt("break",31);case 20:return s=72e5,e.abrupt("break",31);case 22:return s=144e5,e.abrupt("break",31);case 24:return s=432e5,e.abrupt("break",31);case 26:return s=864e5,e.abrupt("break",31);case 28:return s=6048e5,e.abrupt("break",31);case 30:return e.abrupt("break",31);case 31:return o=[],(null==a?void 0:a.candlesticks)instanceof Array&&(u=a.candlesticks.reverse(),i=void 0,c=-1,u.forEach((function(e){var t=parseInt(e[0]);if(void 0===i){c=t;var r={timestamp:t,txs:parseInt(e[1]),open:parseFloat(e[2]),close:parseFloat(e[3]),high:parseFloat(e[4]),low:parseFloat(e[5]),baseVol:e[6],quoteVol:e[7]};i=r,o.push(r)}else for(var n=(t-c)/s,a=1;a<=n;a++){var u=void 0;a===n?(u={timestamp:c+a*s,txs:parseInt(e[1]),open:parseFloat(e[2]),close:parseFloat(e[3]),high:parseFloat(e[4]),low:parseFloat(e[5]),baseVol:e[6],quoteVol:e[7]},c=t,i=u):u={timestamp:c+a*s,txs:0,open:i.close,close:i.close,high:i.close,low:i.close,baseVol:"0",quoteVol:"0"},o.push(u)}}))),o=o.reverse(),e.abrupt("return",{candlesticks:o,raw_data:a});case 35:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),r.getFiatPrice=function(){var e=A(gt.mark((function e(t){var r,n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={url:exports.LOOPRING_URLs.GET_FIAT_PRICE,queryParams:t,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(r);case 3:if(null==(n=e.sent.data)||!n.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==n?void 0:n.resultInfo));case 6:return a={},(null==n?void 0:n.prices)instanceof Array&&n.prices.forEach((function(e){a[e.symbol]=e})),e.abrupt("return",{fiatPrices:a,raw_data:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.disableWithdrawTokenList=function(){var e=A(gt.mark((function e(){var t,r,n;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={url:exports.LOOPRING_URLs.GET_IGNORE_WITHDRAW,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(t);case 3:if(null==(r=e.sent.data)||!r.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==r?void 0:r.resultInfo));case 6:return n=[].concat(r),e.abrupt("return",{disableWithdrawTokenList:n,raw_data:r});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.getMarketTrades=function(){var e=A(gt.mark((function e(t){var r,n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t.limit&&(t.limit=20),r={url:exports.LOOPRING_URLs.GET_TRADES,queryParams:t,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=4,this.makeReq().request(r);case 4:if(null==(n=e.sent.data)||!n.resultInfo){e.next=7;break}return e.abrupt("return",R({},null==n?void 0:n.resultInfo));case 7:return a=[],(null==n?void 0:n.trades)instanceof Array&&n.trades.forEach((function(e){a.push({tradeTime:parseInt(e[0]),tradeId:e[1],side:e[2],volume:e[3],price:e[4],market:e[5],fee:e[6],type:e[13]})})),e.abrupt("return",{totalNum:n.totalNum,marketTrades:a,raw_data:n});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.getAccount=function(){var e=A(gt.mark((function e(t){var r,n;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={url:exports.LOOPRING_URLs.ACCOUNT_ACTION,queryParams:t,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(r);case 3:if(null==(n=e.sent.data)||!n.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==n?void 0:n.resultInfo));case 6:return e.abrupt("return",{accInfo:n,raw_data:n});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.getEthNonce=function(){var e=A(gt.mark((function e(t){var r,n;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={queryParams:t,url:exports.LOOPRING_URLs.GET_ETH_NONCE,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(r);case 3:if(null==(n=e.sent.data)||!n.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==n?void 0:n.resultInfo));case 6:return e.abrupt("return",{nonce:null==n?void 0:n.nonce,raw_data:n});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.getGasPrice=function(){var e=A(gt.mark((function e(){var t,r;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={url:exports.LOOPRING_URLs.GET_GAS_PRICE,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(t);case 3:if(null==(r=e.sent.data)||!r.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==r?void 0:r.resultInfo));case 6:return e.abrupt("return",{gasPrice:null==r?void 0:r.price,raw_data:r});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.getGasPriceRange=function(){var e=A(gt.mark((function e(){var t,r;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={url:exports.LOOPRING_URLs.GET_GAS_PRICE_RANGE,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(t);case 3:if(null==(r=e.sent.data)||!r.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==r?void 0:r.resultInfo));case 6:return e.abrupt("return",{gasPriceRanges:null==r?void 0:r.ranges,raw_data:r});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.getAccountServices=function(){var e=A(gt.mark((function e(t){var r,n;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={queryParams:t,url:exports.LOOPRING_URLs.GET_ACCOUNT_SERVICES,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(r);case 3:if(null==(n=e.sent.data)||!n.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==n?void 0:n.resultInfo));case 6:return e.abrupt("return",R({},n,{register:null==n?void 0:n.register,order:null==n?void 0:n.order,joinAmm:null==n?void 0:n.joinAmm,dAppTrade:null==n?void 0:n.dAppTrade,legal:null==n?void 0:n.dAppTrade,raw_data:n}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t}(gn),Wn=function(e){function t(){return e.apply(this,arguments)||this}O(t,e);var r=t.prototype;return r.getAmmPoolConf=function(){var e=A(gt.mark((function e(){var t,r,n;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={url:exports.LOOPRING_URLs.GET_AMM_POOLS_CONF,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(t);case 3:if(null==(r=e.sent.data)||!r.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==r?void 0:r.resultInfo));case 6:return n=et(r),e.abrupt("return",{ammpools:n.ammpools,pairs:n.pairs,raw_data:r});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.getAmmPoolUserRewards=function(){var e=A(gt.mark((function e(t){var r,n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={queryParams:t,url:exports.LOOPRING_URLs.GET_AMMPOOL_REWARDS,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(r);case 3:if(null==(n=e.sent.data)||!n.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==n?void 0:n.resultInfo));case 6:return a={},null!=n&&n.current&&(null==n||n.current.forEach((function(e){a[e.market]={current:e,lastDay:void 0}}))),null!=n&&n.lastDay&&(null==n||n.lastDay.forEach((function(e){a[e.market]=R({},a[e.market],{lastDay:e})}))),e.abrupt("return",{ammUserRewardMap:a,raw_data:n});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.getAmmPoolGameRank=function(){var e=A(gt.mark((function e(t){var r,n;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={queryParams:t,url:exports.LOOPRING_URLs.GET_AMMPOOL_GAME_RANK,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(r);case 3:if(null==(n=e.sent.data)||!n.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==n?void 0:n.resultInfo));case 6:return e.abrupt("return",{totalRewards:null!=n&&n.totalRewards?n.totalRewards:[],userRankList:null!=n&&n.userRankList?n.userRankList:[],raw_data:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.getAmmPoolGameUserRank=function(){var e=A(gt.mark((function e(t,r){var n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={queryParams:t,apiKey:r,url:exports.LOOPRING_URLs.GET_AMMPOOL_GAME_USER_RANK,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo||null==a||!a.resultInfo.code){e.next=6;break}return e.abrupt("return",R({},a.resultInfo));case 6:return e.abrupt("return",{userRank:a.data,raw_data:a.data});case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),r.getOrderList=function(e,t){return e.sort((function(e,r){return t===exports.SortOrder.ASC?e.rangeFrom<r.rangeFrom?1:0:e.rangeFrom>r.rangeFrom?1:0}))},r.getAmmPoolActivityRules=function(){var e=A(gt.mark((function e(){var t,r,n,a,s,o,u,i;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={url:exports.LOOPRING_URLs.GET_AMM_ACTIVITY_RULES,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(t);case 3:if(null==(r=e.sent.data)||!r.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==r?void 0:r.resultInfo));case 6:return n={},a={},s={},o={},u={},i=(new Date).getTime(),r instanceof Array&&r.forEach((function(e){var t,r,c,p,l=i<e.rangeFrom?exports.AmmPoolActivityStatus.NotStarted:i>=e.rangeFrom&&i<=e.rangeTo?exports.AmmPoolActivityStatus.InProgress:exports.AmmPoolActivityStatus.EndOfGame;if(e.status=l,l===exports.AmmPoolActivityStatus.InProgress){var d,f=n[e.market]?[].concat(n[e.market].ruleType,[e.ruleType]):[e.ruleType];n=R({},n,((d={})[e.market]=R({},e,{ruleType:f}),d))}s[e.ruleType]=[].concat(s[e.ruleType]?s[e.ruleType]:[],[e]),u[l]=[].concat(u[l]?u[l]:[],[e]),a[e.rangeFrom]=R({},a[e.rangeFrom]?a[e.rangeFrom]:{},((r={})[e.ruleType]=R({},a[e.rangeFrom]&&a[e.rangeFrom][e.ruleType]?a[e.rangeFrom][e.ruleType]:{},((t={})[e.market]=e,t)),r)),o=R({},o,((p={})[e.ruleType]=R({},o[e.ruleType]?o[e.ruleType]:{},((c={})[l]=[].concat(o[e.ruleType]&&o[e.ruleType][l]?o[e.ruleType][l]:[],[e]),c)),p))})),e.abrupt("return",{activityInProgressRules:n,activityDateMap:a,groupByRuleType:s,groupByActivityStatus:u,groupByRuleTypeAndStatus:o,raw_data:r});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.getAmmAssetHistory=function(){var e=A(gt.mark((function e(t){var r,n;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={queryParams:t,url:exports.LOOPRING_URLs.GET_AMM_ASSET_HISTORY,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(r);case 3:if(null==(n=e.sent.data)||!n.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==n?void 0:n.resultInfo));case 6:return e.abrupt("return",{poolAddress:n.poolAddress,market:n.market,dataSeries:n.data,raw_data:n});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.getAmmPoolStats=function(){var e=A(gt.mark((function e(){var t,r,n;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={url:exports.LOOPRING_URLs.GET_AMM_POOL_STATS,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(t);case 3:if(null==(r=e.sent.data)||!r.resultInfo||null==r||!r.resultInfo.code){e.next=6;break}return e.abrupt("return",R({},r.resultInfo));case 6:return n={},r instanceof Array&&r.forEach((function(e){n[e.market]=e})),e.abrupt("return",{ammPoolStats:n,raw_data:r});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.getAmmPoolSnapshot=function(){var e=A(gt.mark((function e(t){var r,n;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={url:exports.LOOPRING_URLs.GET_AMM_POOLS_SNAPSHOT,queryParams:t,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(r);case 3:if(null==(n=e.sent.data)||!n.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==n?void 0:n.resultInfo));case 6:return e.abrupt("return",{ammPoolSnapshot:n,raw_data:n});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.getAmmPoolBalances=function(){var e=A(gt.mark((function e(){var t,r,n;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={url:exports.LOOPRING_URLs.GET_AMM_POOLS_BALANCES,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(t);case 3:if(null==(r=e.sent.data)||!r.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==r?void 0:r.resultInfo));case 6:return n={},r instanceof Array&&r.forEach((function(e){var t={};(null==e?void 0:e.pooled)instanceof Array&&e.pooled.forEach((function(e){t[e.tokenId]=e})),e.pooledMap=t;var r=e.poolName;r.indexOf("LRCETH")>=0&&(r="AMM-LRC-ETH"),n[r]=e})),e.abrupt("return",{ammpoolsbalances:n,raw_data:r});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.getLiquidityMining=function(){var e=A(gt.mark((function e(t,r){var n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={queryParams:t,apiKey:r,url:exports.LOOPRING_URLs.GET_LIQUIDITY_MINING,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo||null==a||!a.resultInfo.code){e.next=6;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 6:return e.abrupt("return",{rewards:null!=a&&a.data?a.data:[],raw_data:a});case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),r.getLiquidityMiningUserHistory=function(){var e=A(gt.mark((function e(t){var r,n;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={queryParams:t,url:exports.LOOPRING_URLs.GET_LIQUIDITY_MINING_USER_HISTORY,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(r);case 3:if(null==(n=e.sent.data)||!n.resultInfo||null==n||!n.resultInfo.code){e.next=6;break}return e.abrupt("return",R({},null==n?void 0:n.resultInfo));case 6:return e.abrupt("return",{userMiningInfos:n.data,raw_data:n});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.getUserAmmPoolTxs=function(){var e=A(gt.mark((function e(t,r){var n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={queryParams:t,apiKey:r,url:exports.LOOPRING_URLs.GET_USER_AMM_POOL_TXS,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 6:return e.abrupt("return",{totalNum:a.totalNum,userAmmPoolTxs:a.transactions,raw_data:a});case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),r.getAmmPoolTxs=function(){var e=A(gt.mark((function e(t){var r,n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={queryParams:t,url:exports.LOOPRING_URLs.GET_AMM_POOL_TXS,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(r);case 3:if(null==(n=e.sent.data)||!n.resultInfo||null==n||!n.resultInfo.code){e.next=6;break}return e.abrupt("return",R({},null==n?void 0:n.resultInfo));case 6:return a=void 0,null!=n&&n.transactions&&(a=null==n?void 0:n.transactions),e.abrupt("return",{totalNum:n.totalNum,transactions:a,raw_data:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.getAmmPoolTrades=function(){var e=A(gt.mark((function e(t){var r,n;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={queryParams:t,url:exports.LOOPRING_URLs.GET_AMM_POOL_TRADE_TXS,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(r);case 3:if(null==(n=e.sent.data)||!n.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==n?void 0:n.resultInfo));case 6:return e.abrupt("return",{totalNum:n.totalNum,ammPoolTrades:n.transactions,raw_data:n});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.joinAmmPool=function(){var e=A(gt.mark((function e(t,r,n){var a,s,o;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!=t&&t.validUntil||(t.validUntil=Date.now()),a={bodyParams:t,apiKey:n,url:exports.LOOPRING_URLs.POST_JOIN_AMM_POOL,method:exports.ReqMethod.POST,sigFlag:exports.SIG_FLAG.NO_SIG},s=Jr(t,r),t.eddsaSignature=s.eddsaSig,e.next=6,this.makeReq().request(a);case 6:if(null==(o=e.sent.data)||!o.resultInfo){e.next=9;break}return e.abrupt("return",R({},null==o?void 0:o.resultInfo));case 9:return e.abrupt("return",{joinAmmPoolResult:o,raw_data:o});case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}(),r.exitAmmPool=function(){var e=A(gt.mark((function e(t,r,n){var a,s,o;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!=t&&t.validUntil||(t.validUntil=Date.now()),a={bodyParams:t,apiKey:n,url:exports.LOOPRING_URLs.POST_EXIT_AMM_POOL,method:exports.ReqMethod.POST,sigFlag:exports.SIG_FLAG.NO_SIG},s=Qr(t,r),t.eddsaSignature=s.eddsaSig,e.next=6,this.makeReq().request(a);case 6:if(null==(o=e.sent.data)||!o.resultInfo){e.next=9;break}return e.abrupt("return",R({},null==o?void 0:o.resultInfo));case 9:return e.abrupt("return",{exitAmmPoolResult:o,raw_data:o});case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}(),t}(gn);(Kn=exports.ERC20Method||(exports.ERC20Method={})).Approve="approve",Kn.Deposit="deposit",Kn.ForceWithdraw="forceWithdraw";var Hn={Zero:"0x0",Max:"0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF"};function Yn(e){if(!e)throw new Error("got undefined web3")}function jn(e,t,r,n){return Vn.apply(this,arguments)}function Vn(){return(Vn=A(gt.mark((function e(t,r,n,a){return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yn(t),e.abrupt("return",new Promise((function(e){t.eth.sign(a,r,n,(function(t,r){if(t){var n=t.message.substring(0,t.message.indexOf(" at "));e({error:{message:n}})}else{var a=r.slice(0,66),s=Be(r.slice(66,130)),o=Ye(Be(r.slice(130,132)));0!==o&&1!==o||(o+=27),e({result:{r:a,s:s,v:o}})}}))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xn(e,t,r,n){return Jn.apply(this,arguments)}function Jn(){return(Jn=A(gt.mark((function e(t,r,n,a){var s,o,u,i,c;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.Transaction.fromSerializedTx(n),o=He(s.hash()),e.prev=2,e.next=5,jn(t,r,"",o);case 5:if((u=e.sent).error){e.next=14;break}return(i=u.result).v+=2*a+8,(c=Object.assign(s.toJSON(),i)).from=n.from,e.abrupt("return",{result:He(JSON.stringify(c)),rawTx:c});case 14:return e.abrupt("return",{error:u.error});case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e.catch(2),e.abrupt("return",{error:e.t0});case 20:case"end":return e.stop()}}),e,null,[[2,17]])})))).apply(this,arguments)}function zn(){return(zn=A(gt.mark((function e(t,r){return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}return e.next=3,t.eth.getTransactionCount(r);case 3:return e.abrupt("return",e.sent);case 4:return e.abrupt("return",-1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qn(e,t,r,n,a,s,o,u,i,c){return Zn.apply(this,arguments)}function Zn(){return(Zn=A(gt.mark((function e(t,r,n,a,s,o,u,i,c,p){var l,d;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===p&&(p=!0),Yn(t),i=Xe(i).toNumber(),l={from:r,to:n,value:a,data:s,chainId:o,nonce:u,gasPrice:i,gasLimit:c},!p){e.next=8;break}return e.next=7,ia(t,l);case 7:return e.abrupt("return",e.sent);case 8:return e.next=10,Xn(t,r,l,o);case 10:if(null==(d=e.sent)||!d.rawTx){e.next=15;break}return e.next=14,ia(t,d.rawTx);case 14:return e.abrupt("return",e.sent);case 15:return e.abrupt("return",d);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $n(e,t,r){return e.encodeInputs(t,r)}function ea(e,t){return $n(In.ERC20Token,e,t)}function ta(e,t){return $n(In.ExchangeContract,e,t)}function ra(e,t,r,n,a,s,o,u,i,c){return na.apply(this,arguments)}function na(){return(na=A(gt.mark((function e(t,r,n,a,s,o,u,i,c,p){var l;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=ea(exports.ERC20Method.Approve,{_spender:a,_value:s}),e.next=3,Qn(t,r,n,"0",l,o,u,i,c,p);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function aa(){return(aa=A(gt.mark((function e(t,r,n,a,s,o,u,i,c){return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===u&&(u=exports.ChainId.GOERLI),void 0===c&&(c=!1),e.next=4,ra(t,r,n,a,Hn.Zero,u,i,s,o,c);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sa(){return(sa=A(gt.mark((function e(t,r,n,a,s,o,u,i,c){return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===u&&(u=exports.ChainId.GOERLI),void 0===c&&(c=!1),e.next=4,ra(t,r,n,a,Hn.Max,u,i,s,o,c);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oa(){return(oa=A(gt.mark((function e(t,r,n,a,s,o,u,i,c,p,l,d){var f,m,x;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===c&&(c=exports.ChainId.GOERLI),void 0===l&&(l=!0),f=je(s).times("1e"+a.decimals),m=He(f),x=ta(exports.ERC20Method.Deposit,{tokenAddress:a.address,amount:m,from:r,to:d||r,extraData:""}),f="ETH"===a.type?f.plus(o):je(o),e.next=8,Qn(t,r,n,f.toFixed(),x,c,p,u,i,l);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ua(){return(ua=A(gt.mark((function e(t,r,n,a,s,o,u,i,c,p,l){var d,f;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===c&&(c=exports.ChainId.GOERLI),void 0===l&&(l=!1),d=je(o),f=ta(exports.ERC20Method.ForceWithdraw,{owner:r,tokenAddress:s.address,accountID:n}),e.next=6,Qn(t,r,a,d.toFixed(),f,c,p,u,i,l);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ia(e,t){return ca.apply(this,arguments)}function ca(){return(ca=A(gt.mark((function e(t,r){var n;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete r.gasPrice,e.next=3,new Promise((function(e){t.eth.sendTransaction(r,(function(t,r){e(t?{error:{message:t.message}}:{result:r})}))}));case 3:if(!(n=e.sent).result){e.next=8;break}return e.abrupt("return",n);case 8:throw new Error(n.error.message);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pa(e,t){return la.apply(this,arguments)}function la(){return(la=A(gt.mark((function e(t,r){var n;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.eth.getCode(r);case 2:return e.abrupt("return",(n=e.sent)&&n.length>2);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var da,fa,ma,xa,ha=["collection"],_a=["collection"],va=["collection"],Ta=function(e){function t(){return e.apply(this,arguments)||this}O(t,e);var n=t.prototype;return n.updateUserApiKey=function(){var e=A(gt.mark((function e(t,r,n){var a,s,o;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new Map).set("accountId",t.accountId),s={url:exports.LOOPRING_URLs.API_KEY_ACTION,bodyParams:t,apiKey:r,method:exports.ReqMethod.POST,sigFlag:exports.SIG_FLAG.EDDSA_SIG,sigObj:{dataToSig:a,PrivateKey:n}},e.next=5,this.makeReq().request(s);case 5:if(null==(o=e.sent.data)||!o.resultInfo){e.next=8;break}return e.abrupt("return",R({},null==o?void 0:o.resultInfo));case 8:return e.abrupt("return",{raw_data:o});case 9:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}(),n.getNextStorageId=function(){var e=A(gt.mark((function e(t,r){var n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_NEXT_STORAGE_ID,queryParams:t,apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 6:return e.abrupt("return",{orderId:a.orderId,offchainId:a.offchainId,raw_data:a});case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),n.getOrderDetails=function(){var e=A(gt.mark((function e(t,r){var n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.ORDER_ACTION,queryParams:t,apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 6:return e.abrupt("return",{orderDetail:a,raw_data:a});case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),n.getOrders=function(){var e=A(gt.mark((function e(t,r){var n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_MULTI_ORDERS,queryParams:R({},t,{status:t.status?t.status.join(","):""}),apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 6:return e.abrupt("return",{totalNum:a.totalNum,orders:a.orders,raw_data:a});case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),n.submitOrder=function(){var e=A(gt.mark((function e(t,r,n){var a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.tradeChannel||(t.tradeChannel=exports.TradeChannel.MIXED),a={url:exports.LOOPRING_URLs.ORDER_ACTION,bodyParams:t,apiKey:n,method:exports.ReqMethod.POST,sigFlag:exports.SIG_FLAG.EDDSA_SIG_POSEIDON,sigObj:{dataToSig:[t.exchange,t.storageId,t.accountId,t.sellToken.tokenId,t.buyToken.tokenId,t.sellToken.volume,t.buyToken.volume,t.validUntil,t.maxFeeBips,t.fillAmountBOrS?1:0,0],sigPatch:exports.SigPatchField.EddsaSignature,PrivateKey:r}},e.next=5,this.makeReq().request(a);case 5:return e.abrupt("return",this.returnTxHash(e.sent.data));case 7:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}(),n.cancelOrder=function(){var e=A(gt.mark((function e(t,r,n){var a,s,o;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new Map).set("accountId",t.accountId),t.orderHash&&a.set("orderHash",t.orderHash),t.clientOrderId&&a.set("clientOrderId",t.clientOrderId),s={url:exports.LOOPRING_URLs.ORDER_ACTION,queryParams:t,apiKey:n,method:exports.ReqMethod.DELETE,sigFlag:exports.SIG_FLAG.EDDSA_SIG,sigObj:{dataToSig:a,PrivateKey:r}},e.next=7,this.makeReq().request(s);case 7:if(null==(o=e.sent.data)||!o.resultInfo){e.next=10;break}return e.abrupt("return",R({},null==o?void 0:o.resultInfo));case 10:return e.abrupt("return",{raw_data:o});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}(),n.cancelMultiOrdersByHash=function(){var e=A(gt.mark((function e(t,r,n){var a,s,o;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new Map).set("accountId",t.accountId),a.set("orderHash",t.orderHash),s={url:exports.LOOPRING_URLs.ORDER_CANCEL_HASH_LIST,queryParams:t,apiKey:n,method:exports.ReqMethod.DELETE,sigFlag:exports.SIG_FLAG.EDDSA_SIG,sigObj:{dataToSig:a,PrivateKey:r}},e.next=6,this.makeReq().request(s);case 6:if(null==(o=e.sent.data)||!o.resultInfo){e.next=9;break}return e.abrupt("return",R({},null==o?void 0:o.resultInfo));case 9:return e.abrupt("return",{raw_data:o});case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}(),n.cancelMultiOrdersByCreditOrderId=function(){var e=A(gt.mark((function e(t,r,n){var a,s,o;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new Map).set("accountId",t.accountId),a.set("clientOrderId",t.clientOrderId),s={url:exports.LOOPRING_URLs.ORDER_CANCEL_CLIENT_ORDER_ID_LIST,queryParams:t,apiKey:n,method:exports.ReqMethod.DELETE,sigFlag:exports.SIG_FLAG.EDDSA_SIG,sigObj:{dataToSig:a,PrivateKey:r}},e.next=6,this.makeReq().request(s);case 6:if(null==(o=e.sent.data)||!o.resultInfo){e.next=9;break}return e.abrupt("return",R({},null==o?void 0:o.resultInfo));case 9:return e.abrupt("return",{raw_data:o});case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}(),n.getUserRegTxs=function(){var e=A(gt.mark((function e(t,r){var n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_USER_REG_TXS,queryParams:t,apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 6:return e.abrupt("return",{totalNum:a.totalNum,userRegTxs:a.transactions,raw_data:a});case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),n.getUserPwdResetTxs=function(){var e=A(gt.mark((function e(t,r){var n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_PWD_RESET_TXS,queryParams:t,apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 6:return e.abrupt("return",{totalNum:a.totalNum,userPwdResetTxs:a.transactions,raw_data:a});case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),n.getUserBalances=function(){var e=A(gt.mark((function e(t,r){var n,a,s;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_USER_EXCHANGE_BALANCES,queryParams:t,apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 6:return s={},a instanceof Array&&a.forEach((function(e){s[e.tokenId]=e})),e.abrupt("return",{userBalances:s,raw_data:a});case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),n.getAssetLookRecords=function(){var e=A(gt.mark((function e(t,r){var n,a,s;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_ASSET_LOCK_RECORDS,queryParams:t,apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 6:return s={},a instanceof Array&&a.forEach((function(e){s[e.tokenId]=e})),e.abrupt("return",{userBalances:s,raw_data:a});case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),n.getUserDepositHistory=function(){var e=A(gt.mark((function e(t,r){var n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_USER_DEPOSITS_HISTORY,queryParams:t,apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 6:return e.abrupt("return",{totalNum:null==a?void 0:a.totalNum,userDepositHistory:a.transactions,raw_data:a});case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),n.getUserOnchainWithdrawalHistory=function(){var e=A(gt.mark((function e(t,r){var n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.WITHDRAWALS_ACTION,queryParams:t,apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 6:return e.abrupt("return",{totalNum:null==a?void 0:a.totalNum,userOnchainWithdrawalHistory:a.transactions,raw_data:a});case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),n.getUserTransferList=function(){var e=A(gt.mark((function e(t,r){var n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_USER_TRANSFERS_LIST,queryParams:t,apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 6:return e.abrupt("return",{totalNum:null==a?void 0:a.totalNum,userTransfers:a.transactions,raw_data:a});case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),n.getUserTxs=function(){var e=A(gt.mark((function e(t,r){var n,a,s;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_USER_TXS,queryParams:t,apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo||null==a||!a.resultInfo.code){e.next=6;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 6:return s=[],(null==a?void 0:a.transactions)instanceof Array&&a.transactions.forEach((function(e){s.push(e)})),e.abrupt("return",{totalNum:null==a?void 0:a.totalNum,userTxs:s,raw_data:a});case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),n.getUserTrades=function(){var e=A(gt.mark((function e(t,r){var n,a,s;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_USER_TRADE_HISTORY,queryParams:t,apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo||null==a||!a.resultInfo.code){e.next=6;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 6:return s=[],(null==a?void 0:a.trades)instanceof Array&&a.trades.forEach((function(e){s.push({tradeTime:e[0],tradeId:e[1],side:e[2],volume:e[3],price:e[4],market:e[5],fee:e[6],type:e[13]})})),e.abrupt("return",{totalNum:a.totalNum,userTrades:s,raw_data:a});case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),n.getUserFeeRate=function(){var e=A(gt.mark((function e(t,r){var n,a,s;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_USER_FEE_RATE,queryParams:t,apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 6:return s={},a instanceof Array&&a.forEach((function(e){s[e.symbol]=e})),e.abrupt("return",{userFreeRateMap:s,raw_data:a});case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),n.getUserOrderFeeRate=function(){var e=A(gt.mark((function e(t,r){var n,a,s;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_USER_ORDER_FEE_RATE,queryParams:t,apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 6:return s=parseInt(a.gasPrice),e.abrupt("return",{feeRate:a.feeRate,gasPrice:s,raw_data:a});case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),n.getMinimumTokenAmt=function(){var e=A(gt.mark((function e(t,r){var n,a,s,o,u;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_MINIMUM_TOKEN_AMT,queryParams:t,apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 6:return s=parseInt(a.gasPrice),u={},(o=null==a?void 0:a.amounts)instanceof Array&&o.forEach((function(e){u[e.tokenSymbol]=e})),e.abrupt("return",{amounts:o,amountMap:u,gasPrice:s,cacheOverdueAt:a.cacheOverdueAt,raw_data:a});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),n.getOffchainFeeAmt=function(){var e=A(gt.mark((function e(t,r){var n,a,s,o;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_OFFCHAIN_FEE_AMT,queryParams:t,apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 6:return s=parseInt(a.gasPrice),o={},(null==a?void 0:a.fees)instanceof Array&&a.fees.forEach((function(e){o[e.token]=e})),e.abrupt("return",{fees:o,gasPrice:s,raw_data:a});case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),n.getNFTOffchainFeeAmt=function(){var e=A(gt.mark((function e(t,r){var n,a,s;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_NFT_OFFCHAIN_FEE_AMT,queryParams:t,apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 6:return s={},(null==a?void 0:a.fees)instanceof Array&&a.fees.forEach((function(e){s[e.token]=e})),e.abrupt("return",{fees:s,raw_data:a});case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),n.submitNFTValidateOrder=function(){var e=A(gt.mark((function e(t){var r,n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.apiKey,(r=t.request).eddsaSignature=gr(r,t.eddsaKey).result,a={url:exports.LOOPRING_URLs.POST_NFT_VALIDATE_ORDER,bodyParams:r,apiKey:n,method:exports.ReqMethod.POST,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=5,this.makeReq().request(a);case 5:return e.abrupt("return",this.returnTxHash(e.sent.data));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.submitNFTTrade=function(){var e=A(gt.mark((function e(t){var r,n,a,s,o;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.request,n=t.apiKey,a=t.eddsaKey,(s=new Map).set("maker",r.maker),s.set("makerFeeBips",r.makerFeeBips),s.set("taker",r.taker),s.set("takerFeeBips",r.takerFeeBips),o={url:exports.LOOPRING_URLs.POST_NFT_TRADE,bodyParams:r,apiKey:n,method:exports.ReqMethod.POST,sigFlag:exports.SIG_FLAG.EDDSA_SIG,sigObj:{dataToSig:s,PrivateKey:a}},e.next=9,this.makeReq().request(o);case 9:return e.abrupt("return",this.returnTxHash(e.sent.data));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getUserOwenCollection=function(){var e=A(gt.mark((function e(t,r){var n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_NFT_COLLECTION,queryParams:t,apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo||null==a||!a.resultInfo.code){e.next=6;break}return e.abrupt("return",R({},a.resultInfo));case 6:return e.abrupt("return",{totalNum:null==a?void 0:a.totalNum,collections:a.collections.map((function(e){return R({},e.collection,{extends:R({},b(e,ha))})})),raw_data:a});case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),n.getUserLegacyCollection=function(){var e=A(gt.mark((function e(t,r){var n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_NFT_LEGACY_COLLECTION,queryParams:t,apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo||null==a||!a.resultInfo.code){e.next=6;break}return e.abrupt("return",R({},a.resultInfo));case 6:return e.abrupt("return",{totalNum:null==a?void 0:a.totalNum,collections:a.collections.map((function(e){return R({},e.collection,{extends:R({},b(e,_a))})})),raw_data:a});case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),n.getUserNFTCollection=function(){var e=A(gt.mark((function e(t,r){var n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_NFT_COLLECTION_HASNFT,queryParams:t,apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo||null==a||!a.resultInfo.code){e.next=6;break}return e.abrupt("return",R({},a.resultInfo));case 6:return e.abrupt("return",{totalNum:null==a?void 0:a.totalNum,collections:a.collections.map((function(e){return R({},e.collection,{extends:R({},b(e,va))})})),raw_data:a});case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),n.getUserNFTLegacyTokenAddress=function(){var e=A(gt.mark((function e(t,r){var n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_NFT_LEGACY_TOKENADDRESS,queryParams:t,apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo||null==a||!a.resultInfo.code){e.next=6;break}return e.abrupt("return",R({},a.resultInfo));case 6:return e.abrupt("return",{result:a.addresses,raw_data:a});case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),n.getUserNFTDepositHistory=function(){var e=A(gt.mark((function e(t,r){var n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_USER_NFT_DEPOSIT_HISTORY,queryParams:t,apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 6:return e.abrupt("return",{totalNum:null==a?void 0:a.totalNum,userNFTDepositHistory:a.deposits,raw_data:a});case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),n.getUserNFTWithdrawalHistory=function(){var e=A(gt.mark((function e(t,r){var n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_USER_NFT_WITHDRAW_HISTORY,queryParams:t,apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 6:return e.abrupt("return",{totalNum:null==a?void 0:a.totalNum,userNFTWithdrawalHistory:a.withdrawals,raw_data:a});case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),n.getUserNFTTransferHistory=function(){var e=A(gt.mark((function e(t,r){var n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_USER_NFT_TRANSFER_HISTORY,queryParams:t,apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 6:return e.abrupt("return",{totalNum:null==a?void 0:a.totalNum,userNFTTransfers:a.transfers,raw_data:a});case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),n.getUserNFTMintHistory=function(){var e=A(gt.mark((function e(t,r){var n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_USER_NFT_MINT_HISTORY,queryParams:t,apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 6:return e.abrupt("return",{totalNum:null==a?void 0:a.totalNum,userNFTMints:a.transfers,raw_data:a});case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),n.getUserNFTTransactionHistory=function(){var e=A(gt.mark((function e(t,n){var a,s;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={url:exports.LOOPRING_URLs.GET_USER_NFT_TRANSACTION_HISTORY,queryParams:t,apiKey:n,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(a);case 3:if(null==(s=e.sent.data)||!s.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==s?void 0:s.resultInfo));case 6:return!0===t.metadata&&s.transactions.length&&(s.transactions=s.transactions.reduce((function(e,t){if(t.metadata&&t.metadata.nftId&&t.metadata.nftId.startsWith("0x")){var n=new r(t.metadata.nftId.replace("0x",""),16);t.metadata.nftId="0x"+n.toString("hex").padStart(64,"0")}return[].concat(e,[t])}),[])),e.abrupt("return",{totalNum:null==s?void 0:s.totalNum,userNFTTxs:s.transactions,raw_data:s});case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),n.getUserNFTTradeHistory=function(){var e=A(gt.mark((function e(t,r){var n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_USER_NFT_TRADE_HISTORY,queryParams:R({},t),apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo){e.next=6;break}return e.abrupt("return",R({},a.resultInfo));case 6:return e.abrupt("return",{totalNum:null==a?void 0:a.totalNum,trades:a.trades,raw_data:a});case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),n.SetReferrer=function(){var e=A(gt.mark((function e(t,r){var n,a,s;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new Map).set("address",t.address),n.set("promotionCode",t.promotionCode),n.set("publicKeyX",t.publicKeyX),n.set("publicKeyY",t.publicKeyY),n.set("referrer",t.referrer),a={url:exports.LOOPRING_URLs.SET_REFERRER,bodyParams:t,method:exports.ReqMethod.POST,sigFlag:exports.SIG_FLAG.EDDSA_SIG,sigObj:{dataToSig:n,PrivateKey:r}},e.next=9,this.makeReq().request(a);case 9:if(null==(s=e.sent.data)||!s.resultInfo){e.next=12;break}return e.abrupt("return",R({},null==s?void 0:s.resultInfo));case 12:return e.abrupt("return",{result:null==s?void 0:s.result,raw_data:s});case 13:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),n.getUserNFTBalances=function(){var e=A(gt.mark((function e(t,n){var a,s;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={url:exports.LOOPRING_URLs.GET_USER_NFT_BALANCES,queryParams:t,apiKey:n,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(a);case 3:if(null==(s=e.sent.data)||!s.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==s?void 0:s.resultInfo));case 6:return s.data.length&&(s.data=s.data.reduce((function(e,n){if(n.nftId&&n.nftId.startsWith("0x")){var a=new r(n.nftId.replace("0x",""),16);n.nftId="0x"+a.toString("hex").padStart(64,"0"),!0===t.metadata&&n.metadata&&n.metadata.nftId&&n.metadata.nftId.startsWith("0x")&&(n.metadata.nftId="0x"+a.toString("hex").padStart(64,"0"))}return[].concat(e,[n])}),[])),e.abrupt("return",{totalNum:null==s?void 0:s.totalNum,userNFTBalances:s.data,raw_data:s});case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),n.getUserNFTBalancesByCollection=function(){var e=A(gt.mark((function e(t,n){var a,s;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={url:exports.LOOPRING_URLs.GET_USER_NFT_BALANCES_BY_COLLECTION,queryParams:t,apiKey:n,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(a);case 3:if(null==(s=e.sent.data)||!s.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==s?void 0:s.resultInfo));case 6:return s.data.length&&(s.data=s.data.reduce((function(e,n){if(n.nftId&&n.nftId.startsWith("0x")){var a=new r(n.nftId.replace("0x",""),16);n.nftId="0x"+a.toString("hex").padStart(64,"0"),!0===t.metadata&&n.metadata&&n.metadata.nftId&&n.metadata.nftId.startsWith("0x")&&(n.metadata.nftId="0x"+a.toString("hex").padStart(64,"0"))}return[].concat(e,[n])}),[])),e.abrupt("return",{totalNum:null==s?void 0:s.totalNum,userNFTBalances:s.data,raw_data:s});case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),n.getUserNFTLegacyBalance=function(){var e=A(gt.mark((function e(t,n){var a,s;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={url:exports.LOOPRING_URLs.GET_NFT_LEGACY_BALANCE,queryParams:t,apiKey:n,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(a);case 3:if(null==(s=e.sent.data)||!s.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==s?void 0:s.resultInfo));case 6:return s.data.length&&(s.data=s.data.reduce((function(e,n){if(n.nftId&&n.nftId.startsWith("0x")){var a=new r(n.nftId.replace("0x",""),16);n.nftId="0x"+a.toString("hex").padStart(64,"0"),!0===t.metadata&&n.metadata&&n.metadata.nftId&&n.metadata.nftId.startsWith("0x")&&(n.metadata.nftId="0x"+a.toString("hex").padStart(64,"0"))}return[].concat(e,[n])}),[])),e.abrupt("return",{totalNum:null==s?void 0:s.totalNum,userNFTBalances:s.data,raw_data:s});case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),n.getUserVIPAssets=function(){var e=A(gt.mark((function e(t){var r,n;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={url:exports.LOOPRING_URLs.GET_USER_VIP_ASSETS,queryParams:t,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(r);case 3:if(null==(n=e.sent.data)||!n.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==n?void 0:n.resultInfo));case 6:return e.abrupt("return",{vipAsset:n.data?n.data:n,raw_data:n});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getUserVIPInfo=function(){var e=A(gt.mark((function e(t,r){var n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_USER_VIP_INFO,queryParams:t,method:exports.ReqMethod.GET,apiKey:r,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 6:return e.abrupt("return",{vipInfo:{createdAt:a.created_at,validTo:a.valid_to,org:a.org,vipTag:a.vip_tag},raw_data:a});case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),n.unLockAccount=function(){var e=A(gt.mark((function e(t,r){var n,a,s,o,u,i,c,p;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.keyPair,a=t.request,void 0===r&&(r=void 0),e.prev=2,e.next=5,Mt(n,r);case 5:s=e.sent,e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(2),e.t0;case 11:if(!s){e.next=30;break}return u=Ze(a),i={url:exports.LOOPRING_URLs.API_KEY_ACTION,queryParams:a,bodyParams:a,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.EDDSA_SIG,sigObj:{dataToSig:u,PrivateKey:s.sk}},e.prev=14,e.next=17,this.makeReq().request(i);case 17:c=e.sent.data,e.next=23;break;case 20:throw e.prev=20,e.t1=e.catch(14),e.t1;case 23:if(null==(o=c)||!o.resultInfo){e.next=27;break}throw R({},null==(p=c)?void 0:p.resultInfo);case 27:return e.abrupt("return",{apiKey:c.apiKey,raw_data:c,eddsaKey:s});case 28:e.next=31;break;case 30:throw{code:exports.LoopringErrorCode.NO_EDDSA_KEY,message:exports.ConnectorError.NO_EDDSA_KEY};case 31:case"end":return e.stop()}}),e,this,[[2,8],[14,20]])})));return function(t,r){return e.apply(this,arguments)}}(),n.submitOffchainWithdraw=function(){var e=A(gt.mark((function e(t,r){var n,a,s,o,u,i,c,p,l,d,f,m,x,h,_;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.request,a=t.web3,s=t.chainId,o=t.walletType,u=t.eddsaKey,i=t.apiKey,p=(c=r||{accountId:0}).accountId,l=c.counterFactualInfo,d=!!t.isHWAddr,f=void 0,m=function(){var e=A(gt.mark((function e(){return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ir(a,n.owner,n,s,o,p,l);case 2:f=e.sent.ecdsaSig+exports.SigSuffix.Suffix03;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o!==exports.ConnectorNames.MetaMask&&o!==exports.ConnectorNames.Gamestop&&o!==exports.ConnectorNames.OtherExtension){e.next=23;break}if(e.prev=6,!d){e.next=12;break}return e.next=10,m();case 10:e.next=16;break;case 12:return e.next=14,or(a,n.owner,n,s,p,l);case 14:f=e.sent.ecdsaSig+exports.SigSuffix.Suffix02;case 16:e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(6),R({},this.genErr(e.t0));case 21:e.next=48;break;case 23:return e.next=25,pa(a,n.owner);case 25:if(x=e.sent,e.prev=26,!x){e.next=34;break}return e.next=30,pr(a,n.owner,n,s,p);case 30:f=e.sent.ecdsaSig,e.next=43;break;case 34:if(!l){e.next=41;break}return e.next=37,pr(a,n.owner,n,s,p,l);case 37:f=e.sent.ecdsaSig,e.next=43;break;case 41:return e.next=43,m();case 43:e.next=48;break;case 45:throw e.prev=45,e.t1=e.catch(26),R({},this.genErr(e.t1));case 48:return n.eddsaSignature=ar(n,u).result,l&&(n.counterFactualInfo=l),h={url:exports.LOOPRING_URLs.WITHDRAWALS_ACTION,bodyParams:n,apiKey:i,method:exports.ReqMethod.POST,sigFlag:exports.SIG_FLAG.NO_SIG,ecdsaSignature:f},e.prev=51,e.next=54,this.makeReq().request(h);case 54:_=e.sent.data,e.next=60;break;case 57:throw e.prev=57,e.t2=e.catch(51),e.t2;case 60:return e.abrupt("return",this.returnTxHash(_));case 61:case"end":return e.stop()}}),e,this,[[6,18],[26,45],[51,57]])})));return function(t,r){return e.apply(this,arguments)}}(),n.submitInternalTransfer=function(){var e=A(gt.mark((function e(t,r){var n,a,s,o,u,i,c,p,l,d,f,m,x,h,_;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.request,a=t.web3,s=t.chainId,o=t.walletType,u=t.eddsaKey,i=t.apiKey,p=(c=r||{accountId:0}).accountId,l=c.counterFactualInfo,d=!!t.isHWAddr,f=void 0,m=function(){var e=A(gt.mark((function e(){return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fr(a,n.payerAddr,n,s,o,p,l);case 2:f=e.sent.ecdsaSig+exports.SigSuffix.Suffix03;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o!==exports.ConnectorNames.MetaMask&&o!==exports.ConnectorNames.Gamestop&&o!==exports.ConnectorNames.OtherExtension){e.next=23;break}if(e.prev=6,!d){e.next=12;break}return e.next=10,m();case 10:e.next=16;break;case 12:return e.next=14,wr(a,n.payerAddr,n,s,o,p,l);case 14:f=e.sent.ecdsaSig+exports.SigSuffix.Suffix02;case 16:e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(6),R({},this.genErr(e.t0));case 21:e.next=48;break;case 23:return e.next=25,pa(a,n.payerAddr);case 25:if(x=e.sent,e.prev=26,!x){e.next=34;break}return e.next=30,Cr(a,n.payerAddr,n,s,p);case 30:f=e.sent.ecdsaSig,e.next=43;break;case 34:if(!l){e.next=41;break}return e.next=37,Cr(a,n.payerAddr,n,s,p,l);case 37:f=e.sent.ecdsaSig,e.next=43;break;case 41:return e.next=43,m();case 43:e.next=48;break;case 45:throw e.prev=45,e.t1=e.catch(26),R({},this.genErr(e.t1));case 48:return n.eddsaSignature=Nr(n,u).result,l&&(n.counterFactualInfo=l),h={url:exports.LOOPRING_URLs.POST_INTERNAL_TRANSFER,bodyParams:n,apiKey:i,method:exports.ReqMethod.POST,sigFlag:exports.SIG_FLAG.NO_SIG,ecdsaSignature:f},e.prev=51,e.next=54,this.makeReq().request(h);case 54:_=e.sent.data,e.next=60;break;case 57:throw e.prev=57,e.t2=e.catch(51),e.t2;case 60:return e.abrupt("return",this.returnTxHash(_));case 61:case"end":return e.stop()}}),e,this,[[6,18],[26,45],[51,57]])})));return function(t,r){return e.apply(this,arguments)}}(),n.submitForceWithdrawals=function(){var e=A(gt.mark((function e(t,r){var n,a,s,o,u,i,c,p,l,d,f,m,x,h,_,v,T;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.web3,s=t.chainId,o=t.walletType,u=t.eddsaKey,i=t.apiKey,p=(c=r||{accountId:0}).accountId,l=c.counterFactualInfo,f=!!t.isHWAddr,m=void 0,(d=(n=t.request).transfer).payeeId=0,d.memo="ForceWithdrawalBy"+n.requesterAddress,d.maxFee={volume:"0",tokenId:d.token.tokenId},x=function(){var e=A(gt.mark((function e(){return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fr(a,d.payerAddr,d,s,o,p,l);case 2:m=e.sent.ecdsaSig+exports.SigSuffix.Suffix03;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o!==exports.ConnectorNames.MetaMask&&o!==exports.ConnectorNames.Gamestop&&o!==exports.ConnectorNames.OtherExtension){e.next=27;break}if(e.prev=10,!f){e.next=16;break}return e.next=14,x();case 14:e.next=20;break;case 16:return e.next=18,wr(a,d.payerAddr,d,s,o,p,l);case 18:m=e.sent.ecdsaSig+exports.SigSuffix.Suffix02;case 20:e.next=25;break;case 22:throw e.prev=22,e.t0=e.catch(10),R({},this.genErr(e.t0));case 25:e.next=52;break;case 27:return e.next=29,pa(a,d.payerAddr);case 29:if(h=e.sent,e.prev=30,!h){e.next=38;break}return e.next=34,Cr(a,d.payerAddr,d,s,p);case 34:m=e.sent.ecdsaSig,e.next=47;break;case 38:if(!l){e.next=45;break}return e.next=41,Cr(a,d.payerAddr,d,s,p,l);case 41:m=e.sent.ecdsaSig,e.next=47;break;case 45:return e.next=47,x();case 47:e.next=52;break;case 49:throw e.prev=49,e.t1=e.catch(30),R({},this.genErr(e.t1));case 52:return l&&(d.counterFactualInfo=l),d.eddsaSignature=Nr(d,u).result,d.ecdsaSignature=m,(_=new Map).set("requesterAddress",n.requesterAddress),_.set("tokenId",n.tokenId),_.set("transfer",n.transfer),_.set("withdrawAddress",n.withdrawAddress),v={url:exports.LOOPRING_URLs.POST_FORCE_WITHDRAWALS,bodyParams:n,apiKey:i,method:exports.ReqMethod.POST,sigFlag:exports.SIG_FLAG.EDDSA_SIG,sigObj:{dataToSig:_,PrivateKey:u}},e.prev=61,e.next=64,this.makeReq().request(v);case 64:T=e.sent.data,e.next=70;break;case 67:throw e.prev=67,e.t2=e.catch(61),e.t2;case 70:return e.abrupt("return",this.returnTxHash(T));case 71:case"end":return e.stop()}}),e,this,[[10,22],[30,49],[61,67]])})));return function(t,r){return e.apply(this,arguments)}}(),n.submitDeployNFT=function(){var e=A(gt.mark((function e(t,r){var n,a,s,o,u,i,c,p,l,d,f,m,x,h,_,v,T;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.web3,s=t.chainId,o=t.walletType,u=t.eddsaKey,i=t.apiKey,p=(c=r||{accountId:0}).accountId,l=c.counterFactualInfo,f=!!t.isHWAddr,m=void 0,(d=(n=t.request).transfer).payeeId=0,d.memo="NFT-DEPLOY-CONTRACT->"+n.tokenAddress,d.maxFee={volume:"0",tokenId:d.token.tokenId},x=function(){var e=A(gt.mark((function e(){return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fr(a,d.payerAddr,d,s,o,p,l);case 2:m=e.sent.ecdsaSig+exports.SigSuffix.Suffix03;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o!==exports.ConnectorNames.MetaMask&&o!==exports.ConnectorNames.Gamestop&&o!==exports.ConnectorNames.OtherExtension){e.next=27;break}if(e.prev=10,!f){e.next=16;break}return e.next=14,x();case 14:e.next=20;break;case 16:return e.next=18,wr(a,d.payerAddr,d,s,o,p,l);case 18:m=e.sent.ecdsaSig+exports.SigSuffix.Suffix02;case 20:e.next=25;break;case 22:throw e.prev=22,e.t0=e.catch(10),R({},this.genErr(e.t0));case 25:e.next=52;break;case 27:return e.next=29,pa(a,d.payerAddr);case 29:if(h=e.sent,e.prev=30,!h){e.next=38;break}return e.next=34,Cr(a,d.payerAddr,d,s,p);case 34:m=e.sent.ecdsaSig,e.next=47;break;case 38:if(!l){e.next=45;break}return e.next=41,Cr(a,d.payerAddr,d,s,p,l);case 41:m=e.sent.ecdsaSig,e.next=47;break;case 45:return e.next=47,x();case 47:e.next=52;break;case 49:throw e.prev=49,e.t1=e.catch(30),R({},this.genErr(e.t1));case 52:return l&&(d.counterFactualInfo=l),d.eddsaSignature=Nr(d,u).result,d.ecdsaSignature=m,(_=new Map).set("nftData",n.nftData),_.set("tokenAddress",n.tokenAddress),_.set("transfer",n.transfer),v={url:exports.LOOPRING_URLs.GET_DEPLOY_TOKEN_ADDRESS,bodyParams:n,apiKey:i,method:exports.ReqMethod.POST,sigFlag:exports.SIG_FLAG.EDDSA_SIG,sigObj:{dataToSig:_,PrivateKey:u}},e.prev=60,e.next=63,this.makeReq().request(v);case 63:T=e.sent.data,e.next=69;break;case 66:throw e.prev=66,e.t2=e.catch(60),e.t2;case 69:return e.abrupt("return",this.returnTxHash(T));case 70:case"end":return e.stop()}}),e,this,[[10,22],[30,49],[60,66]])})));return function(t,r){return e.apply(this,arguments)}}(),n.submitNFTInTransfer=function(){var e=A(gt.mark((function e(t,r){var n,a,s,o,u,i,c,p,l,d,f,m,x,h,_;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.request,a=t.web3,s=t.chainId,o=t.walletType,u=t.eddsaKey,i=t.apiKey,p=(c=r||{accountId:0}).accountId,l=c.counterFactualInfo,d=!!t.isHWAddr,f=void 0,m=function(){var e=A(gt.mark((function e(){return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Br(a,n.fromAddress,n,s,o,p,l);case 2:f=e.sent.ecdsaSig+exports.SigSuffix.Suffix03;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o!==exports.ConnectorNames.MetaMask&&o!==exports.ConnectorNames.Gamestop&&o!==exports.ConnectorNames.OtherExtension){e.next=23;break}if(e.prev=6,!d){e.next=12;break}return e.next=10,m();case 10:e.next=16;break;case 12:return e.next=14,Mr(a,n.fromAddress,n,s,o,p,l);case 14:f=e.sent.ecdsaSig+exports.SigSuffix.Suffix02;case 16:e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(6),R({},this.genErr(e.t0));case 21:e.next=48;break;case 23:return e.next=25,pa(a,n.fromAddress);case 25:if(x=e.sent,e.prev=26,!x){e.next=34;break}return e.next=30,Hr(a,n.fromAddress,n,s,p);case 30:f=e.sent.ecdsaSig,e.next=43;break;case 34:if(!l){e.next=41;break}return e.next=37,Hr(a,n.fromAddress,n,s,p,l);case 37:f=e.sent.ecdsaSig,e.next=43;break;case 41:return e.next=43,m();case 43:e.next=48;break;case 45:throw e.prev=45,e.t1=e.catch(26),R({},this.genErr(e.t1));case 48:return n.eddsaSignature=qr(n,u).result,l&&(n.counterFactualInfo=l),h={url:exports.LOOPRING_URLs.POST_NFT_INTERNAL_TRANSFER,bodyParams:n,apiKey:i,method:exports.ReqMethod.POST,sigFlag:exports.SIG_FLAG.NO_SIG,ecdsaSignature:f},e.prev=51,e.next=54,this.makeReq().request(h);case 54:_=e.sent.data,e.next=60;break;case 57:throw e.prev=57,e.t2=e.catch(51),e.t2;case 60:return e.abrupt("return",this.returnTxHash(_));case 61:case"end":return e.stop()}}),e,this,[[6,18],[26,45],[51,57]])})));return function(t,r){return e.apply(this,arguments)}}(),n.submitNFTWithdraw=function(){var e=A(gt.mark((function e(t,r){var n,a,s,o,u,i,c,p,l,d,f,m,x,h,_;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.request,a=t.web3,s=t.chainId,o=t.walletType,u=t.eddsaKey,i=t.apiKey,p=(c=r||{accountId:0}).accountId,l=c.counterFactualInfo,d=!!t.isHWAddr,f=void 0,m=function(){var e=A(gt.mark((function e(){return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vr(a,n.owner,n,s,o,p,l);case 2:f=e.sent.ecdsaSig+exports.SigSuffix.Suffix03;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o!==exports.ConnectorNames.MetaMask&&o!==exports.ConnectorNames.Gamestop&&o!==exports.ConnectorNames.OtherExtension){e.next=23;break}if(e.prev=6,!d){e.next=12;break}return e.next=10,m();case 10:e.next=16;break;case 12:return e.next=14,hr(a,n.owner,n,s,o,p,l);case 14:f=e.sent.ecdsaSig+exports.SigSuffix.Suffix02;case 16:e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(6),R({},this.genErr(e.t0));case 21:e.next=48;break;case 23:return e.next=25,pa(a,n.owner);case 25:if(x=e.sent,e.prev=26,!x){e.next=34;break}return e.next=30,Ir(a,n.owner,n,s,p);case 30:f=e.sent.ecdsaSig,e.next=43;break;case 34:if(!l){e.next=41;break}return e.next=37,Ir(a,n.owner,n,s,p,l);case 37:f=e.sent.ecdsaSig,e.next=43;break;case 41:return e.next=43,m();case 43:e.next=48;break;case 45:throw e.prev=45,e.t1=e.catch(26),R({},this.genErr(e.t1));case 48:return n.eddsaSignature=dr(n,u).result,l&&(n.counterFactualInfo=l),h={url:exports.LOOPRING_URLs.POST_NFT_WITHDRAWALS,bodyParams:n,apiKey:i,method:exports.ReqMethod.POST,sigFlag:exports.SIG_FLAG.NO_SIG,ecdsaSignature:f},e.prev=51,e.next=54,this.makeReq().request(h);case 54:_=e.sent.data,e.next=60;break;case 57:throw e.prev=57,e.t2=e.catch(51),e.t2;case 60:return e.abrupt("return",this.returnTxHash(_));case 61:case"end":return e.stop()}}),e,this,[[6,18],[26,45],[51,57]])})));return function(t,r){return e.apply(this,arguments)}}(),n.submitNFTMint=function(){var e=A(gt.mark((function e(t,r){var n,a,s,o,u,i,c,p,l,d,f,m,x,h,_,v;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.web3,s=t.chainId,o=t.walletType,u=t.eddsaKey,i=t.apiKey,c=t.isHWAddr,l=(p=r||{accountId:0}).accountId,d=p.counterFactualInfo,f=p._noEcdsa,void 0===(n=t.request).counterFactualNftInfo&&(n.counterFactualNftInfo={nftFactory:g[s],nftOwner:n.minterAddress,nftBaseUri:""}),n.royaltyPercentage=n.royaltyPercentage?n.royaltyPercentage:0,m=!!c,x=void 0,h=function(){var e=A(gt.mark((function e(){return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ar(a,n.minterAddress,n,s,o,l,d);case 2:x=e.sent.ecdsaSig+exports.SigSuffix.Suffix03;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f){e.next=51;break}if(o!==exports.ConnectorNames.MetaMask&&o!==exports.ConnectorNames.Gamestop&&o!==exports.ConnectorNames.OtherExtension){e.next=26;break}if(e.prev=9,!m){e.next=15;break}return e.next=13,h();case 13:e.next=19;break;case 15:return e.next=17,Sr(a,n.minterAddress,n,s,o,l,d);case 17:x=e.sent.ecdsaSig+exports.SigSuffix.Suffix02;case 19:e.next=24;break;case 21:throw e.prev=21,e.t0=e.catch(9),R({},this.genErr(e.t0));case 24:e.next=51;break;case 26:return e.prev=26,e.next=29,pa(a,n.minterAddress);case 29:if(!e.sent){e.next=37;break}return e.next=33,Or(a,n.minterAddress,n,s,l);case 33:x=e.sent.ecdsaSig,e.next=46;break;case 37:if(!d){e.next=44;break}return e.next=40,Or(a,n.minterAddress,n,s,l,d);case 40:x=e.sent.ecdsaSig,e.next=46;break;case 44:return e.next=46,h();case 46:e.next=51;break;case 48:throw e.prev=48,e.t1=e.catch(26),R({},this.genErr(e.t1));case 51:return n.eddsaSignature=Er(n,u).result,d&&(n.counterFactualInfo=d),_={url:exports.LOOPRING_URLs.POST_NFT_MINT,bodyParams:n,apiKey:i,method:exports.ReqMethod.POST,sigFlag:exports.SIG_FLAG.NO_SIG,ecdsaSignature:x},e.prev=54,e.next=57,this.makeReq().request(_);case 57:v=e.sent.data,e.next=63;break;case 60:throw e.prev=60,e.t2=e.catch(54),e.t2;case 63:return e.abrupt("return",this.returnTxHash(v));case 64:case"end":return e.stop()}}),e,this,[[9,21],[26,48],[54,60]])})));return function(t,r){return e.apply(this,arguments)}}(),n.submitNFTCollection=function(){var e=A(gt.mark((function e(t,r,n,a){var s,o,u,i;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.nftFactory?t:R({},t,{nftFactory:S[r]}),o=Ze(s),u={url:exports.LOOPRING_URLs.POST_NFT_CREATE_COLLECTION,bodyParams:Object.fromEntries(o),apiKey:n,method:exports.ReqMethod.POST,sigFlag:exports.SIG_FLAG.EDDSA_SIG,sigObj:{dataToSig:o,PrivateKey:a}},e.next=5,this.makeReq().request(u);case 5:if(null==(i=e.sent.data)||!i.resultInfo||null==i||!i.resultInfo.code){e.next=8;break}return e.abrupt("return",R({},i.resultInfo));case 8:return e.abrupt("return",{raw_data:i,contractAddress:null==i?void 0:i.contractAddress});case 9:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),n.deleteNFTCollection=function(){var e=A(gt.mark((function e(t,r,n,a){var s,o,u;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Ze(t),o={url:exports.LOOPRING_URLs.DELETE_NFT_CREATE_COLLECTION,queryParams:t,apiKey:n,method:exports.ReqMethod.DELETE,sigFlag:exports.SIG_FLAG.EDDSA_SIG,sigObj:{dataToSig:s,PrivateKey:a}},e.next=4,this.makeReq().request(o);case 4:if(null==(u=e.sent.data)||!u.resultInfo){e.next=7;break}return e.abrupt("return",R({},null==u?void 0:u.resultInfo));case 7:return e.abrupt("return",{raw_data:u});case 8:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),n.submitNFTLegacyCollection=function(){var e=A(gt.mark((function e(t,r,n,a){var s,o,u;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Ze(t),o={url:exports.LOOPRING_URLs.POST_NFT_CREATE_LEGACY_COLLECTION,bodyParams:Object.fromEntries(s),apiKey:n,method:exports.ReqMethod.POST,sigFlag:exports.SIG_FLAG.EDDSA_SIG,sigObj:{dataToSig:s,PrivateKey:a}},e.next=4,this.makeReq().request(o);case 4:if(null==(u=e.sent.data)||!u.resultInfo||null==u||!u.resultInfo.code){e.next=7;break}return e.abrupt("return",R({},u.resultInfo));case 7:return e.abrupt("return",{raw_data:u,result:u.result});case 8:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),n.submitEditNFTCollection=function(){var e=A(gt.mark((function e(t,r,n,a){var s,o,u;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Ze(t),o={url:exports.LOOPRING_URLs.POST_NFT_EDIT_COLLECTION,bodyParams:Object.fromEntries(s),apiKey:n,method:exports.ReqMethod.POST,sigFlag:exports.SIG_FLAG.EDDSA_SIG,sigObj:{dataToSig:s,PrivateKey:a}},e.next=4,this.makeReq().request(o);case 4:if(null==(u=e.sent.data)||!u.resultInfo||null==u||!u.resultInfo.code){e.next=7;break}return e.abrupt("return",R({},u.resultInfo));case 7:return e.abrupt("return",{raw_data:u,contractAddress:null==u?void 0:u.contractAddress});case 8:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),n.submitUpdateNFTLegacyCollection=function(){var e=A(gt.mark((function e(t,r,n,a){var s,o,u,i;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=R({},t,{nftHashes:t.nftHashes.join(",")}),o=Ze(s),u={url:exports.LOOPRING_URLs.POST_NFT_LEGACY_UPDATE_COLLECTION,bodyParams:Object.fromEntries(o),apiKey:n,method:exports.ReqMethod.POST,sigFlag:exports.SIG_FLAG.EDDSA_SIG,sigObj:{dataToSig:o,PrivateKey:a}},e.next=5,this.makeReq().request(u);case 5:if(null==(i=e.sent.data)||!i.resultInfo||null==i||!i.resultInfo.code){e.next=8;break}return e.abrupt("return",R({},i.resultInfo));case 8:return e.abrupt("return",{raw_data:i,result:i.result});case 9:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),n.submitUpdateNFTGroup=function(){var e=A(gt.mark((function e(t,r,n,a){var s,o,u,i;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=R({},t,{nftHashes:t.nftHashes.join(",")}),o=Ze(s),u={url:exports.LOOPRING_URLs.POST_NFT_UPDATE_NFT_GROUP,bodyParams:Object.fromEntries(o),apiKey:n,method:exports.ReqMethod.POST,sigFlag:exports.SIG_FLAG.EDDSA_SIG,sigObj:{dataToSig:o,PrivateKey:a}},e.next=5,this.makeReq().request(u);case 5:if(null==(i=e.sent.data)||!i.resultInfo||null==i||!i.resultInfo.code){e.next=8;break}return e.abrupt("return",R({},i.resultInfo));case 8:return e.abrupt("return",{raw_data:i,result:i.result});case 9:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),n.submitDeployCollection=function(){var e=A(gt.mark((function e(t,r){var n,a,s,o,u,i,c,p,l,d,f,m,x,h,_,v,T;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.web3,s=t.chainId,o=t.walletType,u=t.eddsaKey,i=t.apiKey,p=(c=r||{accountId:0}).accountId,l=c.counterFactualInfo,f=!!t.isHWAddr,m=void 0,(d=(n=t.request).transfer).payeeId=0,d.memo="NFT-DEPLOY-CONTRACT->"+n.tokenAddress,d.maxFee={volume:"0",tokenId:d.token.tokenId},x=function(){var e=A(gt.mark((function e(){return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fr(a,d.payerAddr,d,s,o,p,l);case 2:m=e.sent.ecdsaSig+exports.SigSuffix.Suffix03;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o!==exports.ConnectorNames.MetaMask&&o!==exports.ConnectorNames.Gamestop&&o!==exports.ConnectorNames.OtherExtension){e.next=27;break}if(e.prev=10,!f){e.next=16;break}return e.next=14,x();case 14:e.next=20;break;case 16:return e.next=18,wr(a,d.payerAddr,d,s,o,p,l);case 18:m=e.sent.ecdsaSig+exports.SigSuffix.Suffix02;case 20:e.next=25;break;case 22:throw e.prev=22,e.t0=e.catch(10),R({},this.genErr(e.t0));case 25:e.next=52;break;case 27:return e.next=29,pa(a,d.payerAddr);case 29:if(h=e.sent,e.prev=30,!h){e.next=38;break}return e.next=34,Cr(a,d.payerAddr,d,s,p);case 34:m=e.sent.ecdsaSig,e.next=47;break;case 38:if(!l){e.next=45;break}return e.next=41,Cr(a,d.payerAddr,d,s,p,l);case 41:m=e.sent.ecdsaSig,e.next=47;break;case 45:return e.next=47,x();case 47:e.next=52;break;case 49:throw e.prev=49,e.t1=e.catch(30),R({},this.genErr(e.t1));case 52:return l&&(d.counterFactualInfo=l),d.eddsaSignature=Nr(d,u).result,d.ecdsaSignature=m,_=Ze(n),v={url:exports.LOOPRING_URLs.POST_DEPLOY_COLLECTION,bodyParams:n,apiKey:i,method:exports.ReqMethod.POST,sigFlag:exports.SIG_FLAG.EDDSA_SIG,sigObj:{dataToSig:_,PrivateKey:u}},e.prev=57,e.next=60,this.makeReq().request(v);case 60:T=e.sent.data,e.next=66;break;case 63:throw e.prev=63,e.t2=e.catch(57),e.t2;case 66:return e.abrupt("return",this.returnTxHash(T));case 67:case"end":return e.stop()}}),e,this,[[10,22],[30,49],[57,63]])})));return function(t,r){return e.apply(this,arguments)}}(),n.updateAccount=function(){var e=A(gt.mark((function e(t,r){var n,a,s,o,u,i,c,p,l,d,f,m,x;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.request,a=t.web3,s=t.chainId,o=t.walletType,i=(u=r||{accountId:0}).accountId,c=u.counterFactualInfo,p=!!t.isHWAddr,l=void 0,d=function(){var e=A(gt.mark((function e(){return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,er(a,n,s,o,i,c);case 2:l=e.sent.ecdsaSig+exports.SigSuffix.Suffix03;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o!==exports.ConnectorNames.MetaMask&&o!==exports.ConnectorNames.Gamestop&&o!==exports.ConnectorNames.OtherExtension){e.next=23;break}if(e.prev=6,!p){e.next=12;break}return e.next=10,d();case 10:e.next=16;break;case 12:return e.next=14,Zt(a,n,s,o,i,c);case 14:l=e.sent.ecdsaSig+exports.SigSuffix.Suffix02;case 16:e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(6),R({},this.genErr(e.t0));case 21:e.next=48;break;case 23:return e.next=25,pa(a,n.owner);case 25:if(f=e.sent,e.prev=26,!f){e.next=34;break}return e.next=30,rr(a,n,s,i);case 30:l=e.sent.ecdsaSig,e.next=43;break;case 34:if(!c){e.next=41;break}return e.next=37,rr(a,n,s,i,c);case 37:l=e.sent.ecdsaSig,e.next=43;break;case 41:return e.next=43,d();case 43:e.next=48;break;case 45:throw e.prev=45,e.t1=e.catch(26),R({},this.genErr(e.t1));case 48:return c&&(n.counterFactualInfo=c),m={url:exports.LOOPRING_URLs.ACCOUNT_ACTION,bodyParams:n,method:exports.ReqMethod.POST,sigFlag:exports.SIG_FLAG.NO_SIG,ecdsaSignature:l},e.prev=50,e.next=53,this.makeReq().request(m);case 53:x=e.sent.data,e.next=59;break;case 56:throw e.prev=56,e.t2=e.catch(50),e.t2;case 59:return e.abrupt("return",this.returnTxHash(x));case 60:case"end":return e.stop()}}),e,this,[[6,18],[26,45],[50,56]])})));return function(t,r){return e.apply(this,arguments)}}(),n.getUserApiKey=function(){var e=A(gt.mark((function e(t,r){var n,a,s,o,u;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new Map).set("accountId",t.accountId),s={url:exports.LOOPRING_URLs.API_KEY_ACTION,queryParams:t,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.EDDSA_SIG,sigObj:{dataToSig:a,PrivateKey:r}},e.prev=3,e.next=6,this.makeReq().request(s);case 6:o=e.sent.data,e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(3),e.t0;case 12:if(null==(n=o)||!n.resultInfo){e.next=16;break}throw R({},null==(u=o)?void 0:u.resultInfo);case 16:return e.abrupt("return",{apiKey:o.apiKey,raw_data:o});case 17:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(t,r){return e.apply(this,arguments)}}(),n.getUserBills=function(){var e=A(gt.mark((function e(t,r){var n,a,s;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_USER_BILLS,queryParams:t,apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo||null==a||!a.resultInfo.code){e.next=6;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 6:return s=[],(null==a?void 0:a.transactions)instanceof Array&&a.transactions.forEach((function(e){s.push(e)})),e.abrupt("return",{totalNum:null==a?void 0:a.totalNum,userTxs:s,raw_data:a});case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),t}(gn),Ia=function(e){function r(){return e.apply(this,arguments)||this}O(r,e);var n=r.prototype;return n.getUserAssets=function(){var e=A(gt.mark((function e(t){var r,n,a,s,o;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={url:exports.LOOPRING_URLs.GET_USER_ASSETS,queryParams:t,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(r);case 3:if(null==(n=e.sent.data)||!n.resultInfo||null==n||!n.resultInfo.code){e.next=6;break}return e.abrupt("return",R({},null==n?void 0:n.resultInfo));case 6:return a=[],s=[],o=[],(null==n?void 0:n.data)instanceof Array&&n.data.forEach((function(e){a.push(e.amount),s.push(e.createdAt),o.push(e.createdAtStr)})),e.abrupt("return",{assetSeries:a,timestampSeries:s,dateSeries:o,userAssets:n.data,raw_data:n});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getApproveRecoverTypedData=function(e,t,r,n,a){return{types:{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],recover:[{name:"wallet",type:"address"},{name:"validUntil",type:"uint256"},{name:"newOwner",type:"address"}]},domain:{name:"GuardianModule",version:"1.2.0",chainId:e,verifyingContract:t},primaryType:"recover",message:{wallet:r,validUntil:n,newOwner:a}}},n.getApproveRecoverV2TypedData=function(e,t,r,n,a,s){return{types:{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],recover:[{name:"wallet",type:"address"},{name:"validUntil",type:"uint256"},{name:"newOwner",type:"address"},{name:"newGuardians",type:"string"}]},domain:{name:"GuardianModule",version:"1.2.0",chainId:e,verifyingContract:t},primaryType:"recover",message:{wallet:r,validUntil:n,newOwner:a,newGuardians:s}}},n.rejectApproveHash=function(e){var r=encodeURIComponent(""+(this.baseUrl+exports.LOOPRING_URLs.REJECT_APPROVE_SIGNATURE)),n=encodeURIComponent(JSON.stringify({approveRecordId:e.approveRecordId,signer:e.signer})),a=exports.ReqMethod.POST+"&"+r+"&"+n;return rt("rejectApproveHash",a),rt("rejectApproveHash hash",He(t.sha256(Buffer.from(a)))),He(t.sha256(Buffer.from(a)))},n.rejectHebao=function(){var e=A(gt.mark((function e(t){var r,n,a,s,o,u,i,c,p,l;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.web3,n=t.address,s=t.chainId,o=this.rejectApproveHash({approveRecordId:(a=t.request).approveRecordId,signer:a.signer}),e.next=4,wn(r,n,"",o,exports.ConnectorNames.Unknown,s);case 4:return u=e.sent,(i=new Map).set("approveRecordId",a.approveRecordId),i.set("signer",n),c={url:exports.LOOPRING_URLs.REJECT_APPROVE_SIGNATURE,queryParams:{},method:exports.ReqMethod.POST,bodyParams:a,apiKey:"",sigFlag:exports.SIG_FLAG.NO_SIG,sigObj:{sig:null==u?void 0:u.sig.slice(0,132)}},p=void 0,e.next=12,this.makeReq().request(c);case 12:if(null==(l=e.sent.data)||!l.resultInfo||null==l||!l.resultInfo.code){e.next=17;break}return e.abrupt("return",R({},null==l?void 0:l.resultInfo));case 17:p=l.data;case 18:return e.abrupt("return",{hash:p,raw_data:l});case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.signHebaoApproveWithoutDataStructure=function(){var e=A(gt.mark((function e(t,r,n,a,s){return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wn(t,r,"",n.messageHash,s,a);case 2:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,r,n,a,s){return e.apply(this,arguments)}}(),n.signHebaoApproveWithDataStructureForContract=function(){var e=A(gt.mark((function e(t,r,n,a,s,o,u,i){var c;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===s&&(s=""),void 0===o&&(o=void 0),void 0===u&&(u=void 0),void 0===i&&(i=void 0),rt("forwarderModuleAddress",i),i?(c=this.getApproveRecoverTypedData(a,i,n.signedRequest.wallet,n.signedRequest.validUntil,s),rt("typedData",c)):(c=this.getApproveRecoverV2TypedData(a,u,n.signedRequest.wallet,n.signedRequest.validUntil,s,o),rt("typedData",c)),e.next=8,Xt(t,c,r,exports.GetEcDSASigType.Contract,a,void 0,"",exports.ConnectorNames.Unknown);case 8:return e.abrupt("return",{sig:e.sent.ecdsaSig});case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a,s,o,u,i){return e.apply(this,arguments)}}(),n.encodeAddressesPacked=function(e){var t=Buffer.concat(e.map((function(e){return Buffer.from("00".repeat(12)+e.slice(2),"hex")})));return rt("addrsBs",t.toString()),t},n.submitApproveSignature=function(){var e=A(gt.mark((function e(r,n,a,s,o){var u,i,c,p,l,d,f,m,x,h,_,v,T,I,y,E,g,S=this;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===o&&(o=""),u=r.request,i=r.web3,c=r.chainId,p=r.walletType,l=r.guardian,d=r.apiKey,f=!!r.isHWAddr,m=void 0,x=function(){var e=A(gt.mark((function e(){var t;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.signHebaoApproveWithoutDataStructure(i,u.signer,l,c,p);case 2:m=(null==(t=e.sent)?void 0:t.sig)+exports.SigSuffix.Suffix03;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p!==exports.ConnectorNames.MetaMask&&p!==exports.ConnectorNames.Gamestop&&p!==exports.ConnectorNames.Coinbase&&p!==exports.ConnectorNames.OtherExtension){e.next=24;break}if(e.prev=7,!f){e.next=13;break}return e.next=11,x();case 11:e.next=17;break;case 13:return e.next=15,this.signHebaoApproveWithoutDataStructure(i,u.signer,l,c,p);case 15:m=(null==(h=e.sent)?void 0:h.sig)+exports.SigSuffix.Suffix03;case 17:e.next=22;break;case 19:throw e.prev=19,e.t0=e.catch(7),R({},this.genErr(e.t0));case 22:e.next=47;break;case 24:return e.next=26,pa(i,u.signer);case 26:if(_=e.sent,e.prev=27,!_){e.next=40;break}return v=void 0,T=[],l.businessDataJson&&l.businessDataJson.value&&l.businessDataJson.value.value&&(v=l.businessDataJson.value.value.newOwner,T=l.businessDataJson.value.value.newGuardians),I=this.encodeAddressesPacked(T),y=t.keccak(I),e.next=36,this.signHebaoApproveWithDataStructureForContract(i,u.signer,l,c,v,a?void 0:y,a?void 0:s,o?void 0:o);case 36:m=e.sent.sig,e.next=42;break;case 40:return e.next=42,x();case 42:e.next=47;break;case 44:throw e.prev=44,e.t1=e.catch(27),R({},this.genErr(e.t1));case 47:return u.signature=m,E={url:exports.LOOPRING_URLs.SUBMIT_APPROVE_SIGNATURE,bodyParams:u,apiKey:d,method:exports.ReqMethod.POST,sigFlag:exports.SIG_FLAG.NO_SIG},e.prev=49,e.next=52,this.makeReq().request(E);case 52:g=e.sent.data,e.next=58;break;case 55:throw e.prev=55,e.t2=e.catch(49),e.t2;case 58:return e.abrupt("return",this.returnTxHash(g));case 59:case"end":return e.stop()}}),e,this,[[7,19],[27,44],[49,55]])})));return function(t,r,n,a,s){return e.apply(this,arguments)}}(),n.getAddressByENS=function(){var e=A(gt.mark((function e(t){var r,n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={url:exports.LOOPRING_URLs.RESOLVE_ENS,queryParams:t,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(r);case 3:if(null==(a=e.sent.data)||!a.resultInfo||null==a||!a.resultInfo.code){e.next=8;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 8:n=a.data;case 9:return e.abrupt("return",{address:n,raw_data:a});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getWalletType=function(){var e=A(gt.mark((function e(t){var r,n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={url:exports.LOOPRING_URLs.GET_WALLET_TYPE,queryParams:t,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(r);case 3:if(null==(a=e.sent.data)||!a.resultInfo||null==a||!a.resultInfo.code){e.next=8;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 8:n=a.data;case 9:return e.abrupt("return",{walletType:n,raw_data:a});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getContractType=function(){var e=A(gt.mark((function e(t){var r,n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={url:exports.LOOPRING_URLs.GET_WALLET_CONTRACTVERSION,queryParams:t,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(r);case 3:if(null==(n=e.sent.data)||!n.resultInfo||null==n||!n.resultInfo.code){e.next=8;break}return e.abrupt("return",R({},null==n?void 0:n.resultInfo));case 8:a=n.data[0];case 9:return e.abrupt("return",{contractType:a,raw_data:n});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getWalletModules=function(){var e=A(gt.mark((function e(t){var r,n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={url:exports.LOOPRING_URLs.GET_WALLET_MODULES,queryParams:t,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(r);case 3:if(null==(n=e.sent.data)||!n.resultInfo||null==n||!n.resultInfo.code){e.next=8;break}return e.abrupt("return",R({},null==n?void 0:n.resultInfo));case 8:a=n.data[0];case 9:return e.abrupt("return",{walletModule:a,raw_data:n});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getEnsByAddress=function(){var e=A(gt.mark((function e(t){var r,n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={url:exports.LOOPRING_URLs.RESOLVE_NAME,queryParams:t,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(r);case 3:if(null==(a=e.sent.data)||!a.resultInfo||null==a||!a.resultInfo.code){e.next=8;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 8:n=a.data;case 9:return e.abrupt("return",{ensName:n,raw_data:a});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.lockHebaoWallet=function(){var e=A(gt.mark((function e(t){var r,n,a,s,o,u,i,c,p,l,d;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.web3,n=t.from,a=t.contractAddress,s=t.gasPrice,u=void 0===(o=t.gasLimit)?15e4:o,c=void 0===(i=t.chainId)?1:i,p=t.wallet,l=t.nonce,!t.isVersion1){e.next=8;break}return d=yn.Contracts.HeBao.encodeInputs("lock",{wallet:p}),e.next=5,Qn(r,n,a,0,d,c,l,s,Number(u),!0);case 5:return e.abrupt("return",e.sent);case 8:return e.next=10,Qn(r,n,a,0,"0xf83d08ba",c,l,s,Number(u),!0);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.getHebaoConfig=function(){var e=A(gt.mark((function e(t){var r,n;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={url:exports.LOOPRING_URLs.GET_HEBAO_CONFIG,queryParams:t,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(r);case 3:if(null==(n=e.sent.data)||!n.resultInfo||null==n||!n.resultInfo.code){e.next=6;break}return e.abrupt("return",R({},null==n?void 0:n.resultInfo));case 6:return e.abrupt("return",{raw_data:n.data});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.sendMetaTx=function(){var e=A(gt.mark((function e(t,r){var n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.SEND_META_TX,apiKey:r,method:exports.ReqMethod.POST,sigFlag:exports.SIG_FLAG.NO_SIG,bodyParams:t},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo||null==a||!a.resultInfo.code){e.next=6;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 6:return e.abrupt("return",{raw_data:a});case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),n.getGuardianApproveList=function(){var e=A(gt.mark((function e(t){var r,n,a,s;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={url:exports.LOOPRING_URLs.GET_GUARDIAN_APPROVE_LIST,queryParams:t,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},n=[],e.next=4,this.makeReq().request(r);case 4:if(null==(a=e.sent.data)||!a.resultInfo||null==a||!a.resultInfo.code){e.next=9;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 9:n=null==a||null==(s=a.data)?void 0:s.guardians.map((function(e){return R({ens:e.ens?e.ens:"",address:e.wallet,type:exports.HEBAO_META_TYPE[e.metaTxType],id:e.approveId,messageHash:e.txAwareHash,businessDataJson:e.businessDataJson,signedRequest:e.signedRequest},e)}));case 10:return e.abrupt("return",{guardiansArray:n,raw_data:a});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getProtectors=function(){var e=A(gt.mark((function e(t,r){var n,a,s;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_PROTECTORS,apiKey:r,queryParams:t,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},a=[],e.next=4,this.makeReq().request(n);case 4:if(null==(s=e.sent.data)||!s.resultInfo||null==s||!s.resultInfo.code){e.next=9;break}return e.abrupt("return",R({},null==s?void 0:s.resultInfo));case 9:a=null==s?void 0:s.data.map((function(e){var t;return{ens:e.protectEns,address:e.protectAddress,lockStatus:null==(t=e.walletStatus)?void 0:t.toUpperCase()}}));case 10:return e.abrupt("return",{protectorArray:a,raw_data:s});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),n.getHebaoOperationLogs=function(){var e=A(gt.mark((function e(t){var r,n;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={url:exports.LOOPRING_URLs.GET_OPERATION_LOGS,queryParams:t,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(r);case 3:if(null==(n=e.sent.data)||!n.resultInfo||null==n||!n.resultInfo.code){e.next=6;break}return e.abrupt("return",R({},null==n?void 0:n.resultInfo));case 6:return e.abrupt("return",{operationArray:n.data,raw_data:n});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getUserTradeAmount=function(){var e=A(gt.mark((function e(t){var r,n;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={url:exports.LOOPRING_URLs.GET_USER_TRADE_AMOUNT,queryParams:t,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(r);case 3:if(null==(n=e.sent.data)||!n.resultInfo||null==n||!n.resultInfo.code){e.next=6;break}return e.abrupt("return",R({},null==n?void 0:n.resultInfo));case 6:return e.abrupt("return",{raw_data:n});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getTokenPrices=function(){var e=A(gt.mark((function e(t){var r,n,a,s;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={url:exports.LOOPRING_URLs.GET_TOKEN_PRICES,queryParams:t,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(r);case 3:if(null==(n=e.sent.data)||!n.resultInfo||null==n||!n.resultInfo.code){e.next=6;break}return e.abrupt("return",R({},null==n?void 0:n.resultInfo));case 6:return a=[],s=[],(null==n?void 0:n.data)instanceof Array&&n.data.forEach((function(e){a.push(e.price),s.push(e.createdAt)})),e.abrupt("return",{tokenPrices:n.data,priceSeries:a,timestampSeries:s,raw_data:n});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getLatestTokenPrices=function(){var e=A(gt.mark((function e(t){var r,n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={queryParams:t,url:exports.LOOPRING_URLs.GET_LATEST_TOKEN_PRICES,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(r);case 3:if(null==(n=e.sent.data)||!n.resultInfo||null==n||!n.resultInfo.code){e.next=6;break}return e.abrupt("return",R({},null==n?void 0:n.resultInfo));case 6:return a={},(null==n?void 0:n.data)instanceof Array&&n.data.forEach((function(e){a[e.token.toLowerCase()]=parseFloat(e.price)})),e.abrupt("return",{tokenPrices:a,raw_data:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r}(gn),ya=function(e){function t(){return e.apply(this,arguments)||this}O(t,e);var r=t.prototype;return r.submitOffchainWithdraw=function(){var e=A(gt.mark((function e(t,r,n){var a,s;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.eddsaSignature=ar(t,r).result,a={url:exports.LOOPRING_URLs.WITHDRAWALS_ACTION,bodyParams:t,apiKey:n,method:exports.ReqMethod.POST,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=4,this.makeReq().request(a);case 4:if(null==(s=e.sent.data)||!s.resultInfo||null==s||!s.resultInfo.code){e.next=7;break}return e.abrupt("return",R({},null==s?void 0:s.resultInfo));case 7:return e.abrupt("return",{raw_data:s});case 8:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}(),r.submitInternalTransfer=function(){var e=A(gt.mark((function e(t,r,n){var a,s;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.eddsaSignature=Nr(t,r).result,a={url:exports.LOOPRING_URLs.POST_INTERNAL_TRANSFER,bodyParams:t,apiKey:n,method:exports.ReqMethod.POST,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=4,this.makeReq().request(a);case 4:if(null==(s=e.sent.data)||!s.resultInfo||null==s||!s.resultInfo.code){e.next=7;break}return e.abrupt("return",R({},null==s?void 0:s.resultInfo));case 7:return e.abrupt("return",{raw_data:s});case 8:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}(),t}(gn),Ea=((da={})[exports.ChainId.GOERLI]="3d602d80600a3d3981f3363d3d373d3d3d363d735854e62554ce1c146a375c370bc0d323368b372d5af43d82803e903d91602b57fd5bf3",da[exports.ChainId.MAINNET]="3d602d80600a3d3981f3363d3d373d3d3d363d73b25f6d711aebf954fb0265a3b29f7b9beba7e55d5af43d82803e903d91602b57fd5bf3",da);(fa=exports.NFTType||(exports.NFTType={}))[fa.ERC1155=0]="ERC1155",fa[fa.ERC721=1]="ERC721",(ma=exports.NFT_TYPE_STRING||(exports.NFT_TYPE_STRING={})).ERC1155="ERC1155",ma.ERC721="ERC721",(xa=exports.NFTMethod||(exports.NFTMethod={})).setApprovalForAll="setApprovalForAll",xa.isApprovedForAll="isApprovedForAll",xa.uri="uri",xa.tokenURI="tokenURI",xa.depositNFT="depositNFT",xa.balanceOf="balanceOf",xa.ownerOf="ownerOf";var ga=function(e){function n(){return e.apply(this,arguments)||this}O(n,e);var a=n.prototype;return a.callContractMethod=function(){var e=A(gt.mark((function e(t,r,n,a,s){var o,u;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===s&&(s=exports.NFTType.ERC1155),u=this._genContract(t,a,s),e.abrupt("return",(o=u.methods)[r].apply(o,n).call());case 3:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a,s){return e.apply(this,arguments)}}(),a._genContractData=function(e,t,r){return e.encodeInputs(t,r)},a._genERC1155Data=function(e,t){return this._genContractData(yn.Contracts.ERC1155,e,t)},a._genERC721Data=function(e,t){return this._genContractData(yn.Contracts.ERC721,e,t)},a._genContract=function(e,t,r){return void 0===r&&(r=exports.NFTType.ERC1155),new e.eth.Contract(r===exports.NFTType.ERC1155?yn.Contracts.erc1155Abi:yn.Contracts.erc721Abi,t)},a.getNFTBalance=function(){var e=A(gt.mark((function e(t){var r,n,a,s,o,u;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.web3,n=t.tokenAddress,a=t.account,s=t.nftId,u=void 0===(o=t.nftType)?exports.NFTType.ERC1155:o,e.prev=1,u!==exports.NFTType.ERC721){e.next=13;break}return e.next=5,this.callContractMethod(r,exports.NFTMethod.ownerOf,[s],n,u);case 5:if(e.sent.toLowerCase()!==a.toLowerCase()){e.next=10;break}return e.abrupt("return",{count:"1"});case 10:return e.abrupt("return",{count:"0"});case 11:e.next=17;break;case 13:return e.next=15,this.callContractMethod(r,exports.NFTMethod.balanceOf,[a,r.utils.hexToNumberString(s)],n,u);case 15:return e.abrupt("return",{count:e.sent.toString()});case 17:e.next=22;break;case 19:return e.prev=19,e.t0=e.catch(1),e.abrupt("return",R({},e.t0,{code:exports.LoopringErrorCode.CONTRACTNFT_BALANCE,message:exports.ConnectorError.CONTRACTNFT_BALANCE}));case 22:case"end":return e.stop()}}),e,this,[[1,19]])})));return function(t){return e.apply(this,arguments)}}(),a.getInfoForNFTTokens=function(){var e=A(gt.mark((function e(t){var n,a,s,o;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.nftDatas,e.prev=1,a={sigFlag:exports.SIG_FLAG.NO_SIG,url:exports.LOOPRING_URLs.GET_NFTs_INFO,method:exports.ReqMethod.GET,queryParams:{nftDatas:n.join(",")}},e.next=5,this.makeReq().request(a);case 5:if(null==(s=e.sent.data)||!s.resultInfo){e.next=8;break}return e.abrupt("return",R({},null==s?void 0:s.resultInfo));case 8:return o=s.reduce((function(e,t){if(t.nftId&&t.nftId.startsWith("0x")){var n=new r(t.nftId.replace("0x",""),16);t.nftId="0x"+n.toString("hex").padStart(64,"0")}return e[t.nftData]=t,e}),{}),e.abrupt("return",R({},o,{raw_data:s}));case 12:return e.prev=12,e.t0=e.catch(1),e.abrupt("return",void 0);case 15:case"end":return e.stop()}}),e,this,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),a.callRefreshNFT=function(){var e=A(gt.mark((function e(t){var n,a,s;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={sigFlag:exports.SIG_FLAG.NO_SIG,bodyParams:t,url:exports.LOOPRING_URLs.POST_NFT_VALIDATE_REFRESH_NFT,method:exports.ReqMethod.POST},e.next=4,this.makeReq().request(n);case 4:if(null==(a=e.sent.data)||!a.resultInfo){e.next=7;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 7:return s=a.reduce((function(e,t){if(t.nftId&&t.nftId.startsWith("0x")){var n=new r(t.nftId.replace("0x",""),16);t.nftId="0x"+n.toString("hex").padStart(64,"0")}return e[t.nftData]=t,e}),{}),e.abrupt("return",R({},s,{raw_data:a}));case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",void 0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),a.getContractNFTMeta=function(){var e=A(gt.mark((function e(t,r){var n,a,s,o,u,i;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.web3,a=t.tokenAddress,s=t.nftId,u=void 0===(o=t.nftType)?exports.NFTType.ERC1155:o,e.prev=2,rt(a,"nftid",s,n.utils.hexToNumberString(s)),e.next=6,this.callContractMethod(n,u===exports.NFTType.ERC1155?exports.NFTMethod.uri:exports.NFTMethod.tokenURI,[n.utils.hexToNumberString(s)],a,u);case 6:return i=(i=(i=e.sent).replace(/^ipfs:\/\/(ipfs\/)?/,exports.LOOPRING_URLs.IPFS_META_URL)).replace("{id}",n.utils.hexToNumberString(s)),e.next=11,fetch(i).then((function(e){return e.json()}));case 11:return e.abrupt("return",e.sent);case 14:return e.prev=14,e.t0=e.catch(2),e.abrupt("return",R({code:exports.LoopringErrorCode.CONTRACTNFT_URI,message:exports.ConnectorError.CONTRACTNFT_URI},e.t0));case 17:case"end":return e.stop()}}),e,this,[[2,14]])})));return function(t,r){return e.apply(this,arguments)}}(),a.approveNFT=function(){var e=A(gt.mark((function e(t){var r,n,a,s,o,u,i,c,p,l,d,f,m,x,h;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.web3,n=t.from,a=t.depositAddress,s=t.tokenAddress,u=void 0===(o=t.nftType)?exports.NFTType.ERC1155:o,i=t.gasPrice,c=t.gasLimit,p=t.chainId,l=t.nonce,f=void 0===(d=t.approved)||d,x=void 0===(m=t.sendByMetaMask)||m,u===exports.NFTType.ERC1155?h=this._genERC1155Data(exports.NFTMethod.setApprovalForAll,{operator:a,approved:f}):u===exports.NFTType.ERC721&&(h=this._genERC721Data(exports.NFTMethod.setApprovalForAll,{operator:a,approved:f})),e.prev=2,e.next=5,Qn(r,n,s,"0",h,p,l,i,c,x);case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",R({},e.t0,{code:exports.LoopringErrorCode.CONTRACTNFT_SET_APPROVE,message:exports.ConnectorError.CONTRACTNFT_SET_APPROVE}));case 11:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),a.ipfsCid0ToNftID=function(e){var t=new(require("cids"))(e),n=Buffer.from(t.multihash.slice(2)).toString("hex");return"0x"+new r(n,16).toString("hex").padStart(64,"0")},a.ipfsNftIDToCid=function(e){var t=require("cids"),n=new r(e.replace("0x",""),16).toString(16,64);return new t(Buffer.from("1220"+n,"hex")).toString()},a.isApprovedForAll=function(){var e=A(gt.mark((function e(t){var r,n,a,s,o,u;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.web3,n=t.from,a=t.exchangeAddress,o=void 0===(s=t.nftType)?exports.NFTType.ERC1155:s,u=t.tokenAddress,e.prev=1,e.next=4,this.callContractMethod(r,exports.NFTMethod.isApprovedForAll,[n,a],u,o);case 4:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",R({},e.t0,{code:exports.LoopringErrorCode.CONTRACTNFT_IS_APPROVE,message:exports.ConnectorError.CONTRACTNFT_IS_APPROVE}));case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),a.depositNFT=function(){var e=A(gt.mark((function e(t){var r,n,a,s,o,u,i,c,p,l,d,f,m;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.web3,n=t.from,a=t.exchangeAddress,o=void 0===(s=t.nftType)?exports.NFTType.ERC1155:s,u=t.gasPrice,i=t.gasLimit,p=void 0===(c=t.chainId)?exports.ChainId.MAINNET:c,l=t.nonce,f=void 0===(d=t.sendByMetaMask)||d,m=ta(exports.NFTMethod.depositNFT,{from:n,to:n,nftType:o,tokenAddress:t.tokenAddress,nftId:t.nftId,amount:t.amount,extraData:t.extraData||""}),e.next=4,Qn(r,n,a,"0",m,p,l,u,i,f);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.computeNFTAddress=function(e){var r=e.nftOwner,n=e.nftFactory,a=void 0===n?"0xDB42E6F6cB2A2eFcF4c638cb7A61AdE5beD82609":n,s=e.nftBaseUri,o=void 0===s?"":s;try{a||(a=g[this.chainId]),r.startsWith("0x")&&(r=r.slice(2));var u=Buffer.concat([Buffer.from("NFT_CONTRACT_CREATION","utf8"),Buffer.from(r,"hex"),Buffer.from(o,"utf8")]),i=t.keccak(Buffer.from(Ea[this.chainId],"hex")),c=t.keccak(u),p=Buffer.concat([Buffer.from("ff","hex"),Buffer.from(a.slice(2),"hex"),c,i]),l=t.keccak(p).slice(12).toString("hex");return{tokenAddress:t.toChecksumAddress("0x"+l)}}catch(e){return e}},a.getPublicCollectionById=function(){var e=A(gt.mark((function e(t){var r,n;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={sigFlag:exports.SIG_FLAG.NO_SIG,queryParams:t,url:exports.LOOPRING_URLs.GET_NFT_COLLECTION_PUBLISH,method:exports.ReqMethod.GET},e.next=4,this.makeReq().request(r);case 4:if(null==(n=e.sent.data)||!n.resultInfo){e.next=7;break}return e.abrupt("return",R({},null==n?void 0:n.resultInfo));case 7:return e.abrupt("return",R({},n,{raw_data:n}));case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",R({},e.t0,{code:exports.LoopringErrorCode.SKD_UNKNOW}));case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),a.getCollectionWholeNFTs=function(){var e=A(gt.mark((function e(t){var n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_COLLECTION_WHOLE_NFTS,queryParams:t,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 6:return a.nftTokenInfos.length&&(a.nftTokenInfos=a.nftTokenInfos.reduce((function(e,n){if(n.nftId&&n.nftId.startsWith("0x")){var a=new r(n.nftId.replace("0x",""),16);n.nftId="0x"+a.toString("hex").padStart(64,"0"),!0===t.metadata&&n.metadata&&n.metadata.nftId&&n.metadata.nftId.startsWith("0x")&&(n.metadata.nftId="0x"+a.toString("hex").padStart(64,"0"))}return[].concat(e,[n])}),[])),e.abrupt("return",{totalNum:null==a?void 0:a.totalNum,userNFTBalances:a.nftTokenInfos,raw_data:a});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n}(gn),Sa="685xvATlBCsvzyiTxaS02vu0b1xN0DAFpNpslKUNCuSxDhx8gyyz8VmvUqqe5HSQ",ka="re356TcrQ6KhlpkvWxP4UN0C4EqxQVV7ZjvLjunwTjaQPZ20ue2ZgClFeT7okpDQ",Aa=function(e){function t(){return e.apply(this,arguments)||this}O(t,e);var r=t.prototype;return r.getActiveFeeInfo=function(){var e=A(gt.mark((function e(t){var r,n,a,s,o;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={accountId:t.accountId?t.accountId:this.chainId===exports.ChainId.MAINNET?22638:10013,requestType:exports.OffchainFeeReqType.UPDATE_ACCOUNT},n={url:exports.LOOPRING_URLs.GET_OFFCHAIN_FEE_AMT,queryParams:r,apiKey:this.chainId===exports.ChainId.MAINNET?ka:Sa,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=4,this.makeReq().request(n);case 4:if(null==(a=e.sent.data)||!a.resultInfo){e.next=7;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 7:return s=parseInt(a.gasPrice),o={},(null==a?void 0:a.fees)instanceof Array&&a.fees.forEach((function(e){o[e.token]=e})),e.abrupt("return",{fees:o,gasPrice:s,raw_data:a});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.getUserBalanceForFee=function(){var e=A(gt.mark((function e(t){var r,n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={url:exports.LOOPRING_URLs.GET_USER_EXCHANGE_BALANCES,queryParams:t,apiKey:this.chainId===exports.ChainId.MAINNET?ka:Sa,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(r);case 3:if(null==(n=e.sent.data)||!n.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==n?void 0:n.resultInfo));case 6:return a={},n instanceof Array&&n.forEach((function(e){a[e.tokenId]=e})),e.abrupt("return",{userBalances:a,raw_data:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.getAmmPoolGameUserRank=function(){var e=A(gt.mark((function e(t){var r,n;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={url:exports.LOOPRING_URLs.GET_AMMPOOL_GAME_USER_RANK,queryParams:t,apiKey:this.chainId===exports.ChainId.MAINNET?ka:Sa,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(r);case 3:if(null==(n=e.sent.data)||!n.resultInfo||null==n||!n.resultInfo.code){e.next=6;break}return e.abrupt("return",R({},n.resultInfo));case 6:return e.abrupt("return",{userRank:n.data,raw_data:n.data});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.getBanxaAPI=function(){var e=A(gt.mark((function e(t,r,n){var a,s,o,u,i,c;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.query,s=t.payload,o={accountId:t.accountId,url:t.url,method:t.method.toString(),query:a,payload:s||""},u=Ze(R({},o,{url:encodeURIComponent(o.url),query:encodeURIComponent(o.query),payload:encodeURIComponent(o.payload)})),i={url:exports.LOOPRING_URLs.GET_BANXA_API_KEY,method:exports.ReqMethod.GET,queryParams:o,apiKey:n,sigFlag:exports.SIG_FLAG.EDDSA_SIG,sigObj:{PrivateKey:r,dataToSig:u}},e.next=6,this.makeReq().request(i);case 6:if(null==(c=e.sent.data)||!c.resultInfo||null==c||!c.resultInfo.code){e.next=9;break}return e.abrupt("return",R({},c.resultInfo));case 9:return e.abrupt("return",{result:c.result,raw_data:c});case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}(),t}(gn),Ra=function(e){function t(){return e.apply(this,arguments)||this}O(t,e);var r=t.prototype;return r.getCode=function(){var e=A(gt.mark((function e(t){var r,n;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={sigFlag:exports.SIG_FLAG.NO_SIG,url:exports.LOOPRING_URLs.GET_DELEGATE_GET_CODE,method:exports.ReqMethod.POST,bodyParams:{address:t}},e.next=3,this.makeReq().request(r);case 3:if(null==(n=e.sent.data)||!n.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==n?void 0:n.resultInfo));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.getIPFS=function(){var e=A(gt.mark((function e(t){var r,n;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={sigFlag:exports.SIG_FLAG.NO_SIG,url:exports.LOOPRING_URLs.GET_DELEGATE_GET_IPFS,method:exports.ReqMethod.GET,queryParams:{path:t}},e.next=3,this.makeReq().request(r);case 3:if(null==(n=e.sent.data)||!n.resultInfo||null==n||!n.resultInfo.code){e.next=6;break}return e.abrupt("return",R({},null==n?void 0:n.resultInfo));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.getCollectionDomain=function(){return this.chainId===exports.ChainId.GOERLI?"https://uatnftinfos.loopring.io":"https://nftinfos.loopring.io"},t}(gn),Oa=["lockTag"],ba=function(e){function t(){return e.apply(this,arguments)||this}O(t,e);var r=t.prototype;return r.getDefiToken=function(){var e=A(gt.mark((function e(){var t,r,n,a,s;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={url:exports.LOOPRING_URLs.GET_DEFI_TOKENS,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(t);case 3:if(null==(r=e.sent.data)||!r.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==r?void 0:r.resultInfo));case 6:return n={},a={},s={},r instanceof Array&&r.forEach((function(e){e.isLpToken=!!e.symbol.startsWith("LP-"),n[e.symbol]=e,a[e.address.toLowerCase()]=e.symbol,s[e.tokenId]=e.symbol})),e.abrupt("return",{tokensMap:n,idIndex:s,addressIndex:a,raw_data:r});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.getDefiMarkets=function(){var e=A(gt.mark((function e(t,r){var n,a,s,o,u,i,c,p;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r=exports.LOOPRING_URLs.GET_DEFI_MARKETS),n={url:r,queryParams:{},method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=4,this.makeReq().request(n);case 4:if(null==(a=e.sent.data)||!a.resultInfo){e.next=7;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 7:return s={},o={},(null==a?void 0:a.markets)instanceof Array&&((i=null==t||null==(u=t.defiType)?void 0:u.split(","))?a.markets.filter((function(e){var t;return i.includes(null==(t=e.type)?void 0:t.toUpperCase())})):a.markets).forEach((function(e){var t=R({},e);if(s[e.market]=t,e.enabled){var r=e.market.match(/^(\w+-)?(\w+)-(\w+)$/i),n=r[2],a=r[3];"DUAL-"===r[1]&&n&&a?(o[n]?o[n].tokenList=[].concat(o[n].tokenList,[a]):o[n]={tokenId:e.baseTokenId,tokenList:[a]},o[a]?o[a].tokenList=[].concat(o[a].tokenList,[n]):o[a]={tokenId:e.baseTokenId,tokenList:[n]}):n&&a&&(o[n]?o[n].tokenList=[].concat(o[n].tokenList,[a]):o[n]={tokenId:e.baseTokenId,tokenList:[a]})}})),c=Reflect.ownKeys(s),p=Reflect.ownKeys(o),e.abrupt("return",{markets:s,pairs:o,tokenArr:p,tokenArrStr:p.join(","),marketArr:c,marketArrStr:c.join(","),raw_data:a});case 13:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),r.orderDefi=function(){var e=A(gt.mark((function e(t,r,n){var a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={url:exports.LOOPRING_URLs.POST_DEFI_ORDER,bodyParams:t,apiKey:n,method:exports.ReqMethod.POST,sigFlag:exports.SIG_FLAG.EDDSA_SIG_POSEIDON,sigObj:{dataToSig:[t.exchange,t.storageId,t.accountId,t.sellToken.tokenId,t.buyToken.tokenId,t.sellToken.volume,t.buyToken.volume,t.validUntil,t.maxFeeBips,t.fillAmountBOrS?1:0,0],sigPatch:exports.SigPatchField.EddsaSignature,PrivateKey:r}},e.next=4,this.makeReq().request(a);case 4:return e.abrupt("return",this.returnTxHash(e.sent.data));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}(),r.getDefiReward=function(){var e=A(gt.mark((function e(t,r){var n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_DEFI_REWARDS,queryParams:t,apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 6:return e.abrupt("return",R({},a,{raw_data:a}));case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),r.getDefiTransaction=function(){var e=A(gt.mark((function e(t,r){var n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_DEFI_TRANSACTIONS,queryParams:t,apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 6:return e.abrupt("return",{totalNum:null==a?void 0:a.totalNum,userDefiTxs:a.transactions,raw_data:a});case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),r.getDualInfos=function(){var e=A(gt.mark((function e(t){var r,n;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={url:exports.LOOPRING_URLs.GET_DUAL_INFOS,queryParams:t,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(r);case 3:if(null==(n=e.sent.data)||!n.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==n?void 0:n.resultInfo));case 6:return e.abrupt("return",{totalNum:null==n?void 0:n.totalNum,dualInfo:{infos:n.infos,index:n.index,balance:n.balance,rules:n.rules},raw_data:n});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.getDualBalance=function(){var e=A(gt.mark((function e(t){var r,n;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=void 0),r={url:exports.LOOPRING_URLs.GET_DUAL_BALANCE,queryParams:t,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=4,this.makeReq().request(r);case 4:if(null==(n=e.sent.data)||!n.resultInfo){e.next=7;break}return e.abrupt("return",R({},null==n?void 0:n.resultInfo));case 7:return e.abrupt("return",{raw_data:n,dualBalanceMap:[].concat(n).reduce((function(e,t){var r;return R({},e,((r={})[t.coin]=t,r))}),{})});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.getDualPrices=function(){var e=A(gt.mark((function e(t){var r,n;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={url:exports.LOOPRING_URLs.GET_DUAL_PRICES,queryParams:t,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(r);case 3:if(null==(n=e.sent.data)||!n.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==n?void 0:n.resultInfo));case 6:return e.abrupt("return",{raw_data:n,totalNum:null==n?void 0:n.totalNum,infos:n.infos});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.getDualIndex=function(){var e=A(gt.mark((function e(t){var r,n;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={url:exports.LOOPRING_URLs.GET_DUAL_INDEX,queryParams:t,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(r);case 3:if(null==(n=e.sent.data)||!n.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==n?void 0:n.resultInfo));case 6:return e.abrupt("return",{raw_data:n,dualPrice:n});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.getDualTransactions=function(){var e=A(gt.mark((function e(t,r){var n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_DUAL_TRANSACTIONS,queryParams:t,apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 6:return e.abrupt("return",{totalNum:null==a?void 0:a.totalNum,userDualTxs:a.transactions,raw_data:a});case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),r.orderDual=function(){var e=A(gt.mark((function e(t,r,n){var a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={url:exports.LOOPRING_URLs.POST_DUAL_ORDER,bodyParams:t,apiKey:n,method:exports.ReqMethod.POST,sigFlag:exports.SIG_FLAG.EDDSA_SIG_POSEIDON,sigObj:{dataToSig:[t.exchange,t.storageId,t.accountId,t.sellToken.tokenId,t.buyToken.tokenId,t.sellToken.volume,t.buyToken.volume,t.validUntil,t.maxFeeBips,t.fillAmountBOrS?1:0,0],sigPatch:exports.SigPatchField.EddsaSignature,PrivateKey:r}},e.next=4,this.makeReq().request(a);case 4:return e.abrupt("return",this.returnTxHash(e.sent.data));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}(),r.getDualUserLocked=function(){var e=A(gt.mark((function e(t,r){var n,a,s,o;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0===(n=t.lockTag)?[exports.DUAL_TYPE.DUAL_BASE,exports.DUAL_TYPE.DUAL_CURRENCY]:n,s={url:exports.LOOPRING_URLs.GET_DUAL_USER_LOCKED,queryParams:R({},b(t,Oa),{lockTag:a.join(",")}),apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=4,this.makeReq().request(s);case 4:if(null==(o=e.sent.data)||!o.resultInfo){e.next=7;break}return e.abrupt("return",R({},null==o?void 0:o.resultInfo));case 7:return e.abrupt("return",{lockRecord:o.lockRecord,raw_data:o});case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),r.sendStakeClaim=function(){var e=A(gt.mark((function e(t,r){var n,a,s,o,u,i,c,p,l,d,f,m,x,h,_,v,T,I,y;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.web3,s=t.chainId,o=t.walletType,u=t.eddsaKey,i=t.apiKey,p=(c=r||{accountId:0}).accountId,l=c.counterFactualInfo,f=!!t.isHWAddr,m=void 0,(d=(n=t.request).transfer).payeeId=0,d.memo="STAKE-CLAIM->"+n.accountId,x=function(){var e=A(gt.mark((function e(){return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fr(a,d.payerAddr,d,s,o,p,l);case 2:m=e.sent.ecdsaSig+exports.SigSuffix.Suffix03;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o!==exports.ConnectorNames.MetaMask&&o!==exports.ConnectorNames.Gamestop&&o!==exports.ConnectorNames.OtherExtension){e.next=26;break}if(e.prev=9,!f){e.next=15;break}return e.next=13,x();case 13:e.next=19;break;case 15:return e.next=17,wr(a,d.payerAddr,d,s,o,p,l);case 17:m=e.sent.ecdsaSig+exports.SigSuffix.Suffix02;case 19:e.next=24;break;case 21:throw e.prev=21,e.t0=e.catch(9),R({},this.genErr(e.t0));case 24:e.next=51;break;case 26:return e.next=28,pa(a,d.payerAddr);case 28:if(h=e.sent,e.prev=29,!h){e.next=37;break}return e.next=33,Cr(a,d.payerAddr,d,s,p);case 33:m=e.sent.ecdsaSig,e.next=46;break;case 37:if(!l){e.next=44;break}return e.next=40,Cr(a,d.payerAddr,d,s,p,l);case 40:m=e.sent.ecdsaSig,e.next=46;break;case 44:return e.next=46,x();case 46:e.next=51;break;case 48:throw e.prev=48,e.t1=e.catch(29),R({},this.genErr(e.t1));case 51:return l&&(d.counterFactualInfo=l),d.eddsaSignature=Nr(d,u).result,d.ecdsaSignature=m,_=Ze(n),v={url:exports.LOOPRING_URLs.POST_STAKE_CLAIM,bodyParams:n,apiKey:i,method:exports.ReqMethod.POST,sigFlag:exports.SIG_FLAG.EDDSA_SIG,sigObj:{dataToSig:_,PrivateKey:u}},e.prev=56,e.next=59,this.makeReq().request(v);case 59:if(null==(I=T=e.sent.data)||!I.resultInfo){e.next=62;break}return e.abrupt("return",R({},null==(y=T)?void 0:y.resultInfo));case 62:return e.abrupt("return",R({raw_data:T},T));case 65:throw e.prev=65,e.t2=e.catch(56),e.t2;case 68:case"end":return e.stop()}}),e,this,[[9,21],[29,48],[56,65]])})));return function(t,r){return e.apply(this,arguments)}}(),r.sendStakeRedeem=function(){var e=A(gt.mark((function e(t,r,n){var a,s,o;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ze(t),s={url:exports.LOOPRING_URLs.POST_STAKE_REDEEM,bodyParams:t,apiKey:n,method:exports.ReqMethod.POST,sigFlag:exports.SIG_FLAG.EDDSA_SIG,sigObj:{dataToSig:a,PrivateKey:r}},e.next=4,this.makeReq().request(s);case 4:if(null==(o=e.sent.data)||!o.resultInfo){e.next=7;break}return e.abrupt("return",R({},null==o?void 0:o.resultInfo));case 7:return e.abrupt("return",R({raw_data:o},o));case 8:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}(),r.sendStake=function(){var e=A(gt.mark((function e(t,r,n){var a,s,o;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ze(t),s={url:exports.LOOPRING_URLs.POST_STAKE,bodyParams:t,apiKey:n,method:exports.ReqMethod.POST,sigFlag:exports.SIG_FLAG.EDDSA_SIG,sigObj:{dataToSig:a,PrivateKey:r}},e.next=4,this.makeReq().request(s);case 4:if(null==(o=e.sent.data)||!o.resultInfo){e.next=7;break}return e.abrupt("return",R({},null==o?void 0:o.resultInfo));case 7:return e.abrupt("return",R({raw_data:o},o));case 8:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}(),r.getStakeProducts=function(){var e=A(gt.mark((function e(){var t,r;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={url:exports.LOOPRING_URLs.GET_STAKE_PRODUCTS,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(t);case 3:if(null==(r=e.sent.data)||!r.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==r?void 0:r.resultInfo));case 6:return e.abrupt("return",{products:r,raw_data:r});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.getStakeSummary=function(){var e=A(gt.mark((function e(t,r){var n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_STAKE_SUMMARY,queryParams:R({},t),apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 6:return e.abrupt("return",R({},a,{list:a.staking,raw_data:a}));case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),r.getStakeTransactions=function(){var e=A(gt.mark((function e(t,r){var n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_STAKE_TRANSACTIONS,queryParams:R({},t),apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 6:return e.abrupt("return",{list:a,totalNum:a.totalNum,raw_data:a});case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),r.getCefiMarkets=function(){var e=A(gt.mark((function e(){var t,r,n,a,s,o;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={url:exports.LOOPRING_URLs.GET_CEFI_MARKETS,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(t);case 3:if(null==(r=e.sent.data)||!r.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==r?void 0:r.resultInfo));case 6:return n={},a={},r instanceof Array&&r.forEach((function(e){var t,r=R({},e);n[r.market]=R({},r,{type:"CEX"});var s=null!=(t=null==r?void 0:r.cefiQuota)?t:{base:"",quote:""},o=s.base,u=s.quote;r.enabled&&r.cefiQuota&&o&&u&&(a[o]?a[o].tokenList=[].concat(a[o].tokenList,[u]):a[o]={tokenId:e.baseTokenId,tokenList:[u]},a[u]?a[u].tokenList=[].concat(a[u].tokenList,[o]):a[u]={tokenId:e.baseTokenId,tokenList:[o]})})),s=Reflect.ownKeys(n),o=Reflect.ownKeys(a),e.abrupt("return",{markets:n,pairs:a,tokenArr:o,tokenArrStr:o.join(","),marketArr:s,marketArrStr:s.join(","),raw_data:r});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.getCefiDepth=function(){var e=A(gt.mark((function e(t){var r,n,a,s,o,u,i,c;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={url:exports.LOOPRING_URLs.GET_CEFI_DEPTH,queryParams:R({},t.request),method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=4,this.makeReq().request(r);case 4:if(null==(n=e.sent.data)||!n.resultInfo){e.next=7;break}return e.abrupt("return",R({},null==n?void 0:n.resultInfo));case 7:return a=n.timestamp,s=Mn({_asks:n.asks,_bids:n.bids}),o=s.asks,u=s.bids,i=s.mid_price,c={symbol:n.market,version:parseInt(n.version),timestamp:a,mid_price:i,bids:u.ab_arr,bids_prices:u.ab_prices,bids_amtTotals:u.ab_amtTotals,bids_volTotals:u.ab_volTotals,bids_amtTotal:u.amtTotal.toString(),bids_volTotal:u.volTotal.toString(),asks:o.ab_arr,asks_prices:o.ab_prices,asks_amtTotals:o.ab_amtTotals,asks_volTotals:o.ab_volTotals,asks_amtTotal:o.amtTotal.toString(),asks_volTotal:o.volTotal.toString()},e.abrupt("return",{depth:c,raw_data:n});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.getCefiOrders=function(){var e=A(gt.mark((function e(t){var r,n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.apiKey,n={url:exports.LOOPRING_URLs.GET_CEFI_ORDERS,queryParams:R({},t.request),apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=4,this.makeReq().request(n);case 4:if(null==(a=e.sent.data)||!a.resultInfo){e.next=7;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 7:return e.abrupt("return",{list:a.transactions,totalNum:a.totalNum,raw_data:a});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.sendCefiOrder=function(){var e=A(gt.mark((function e(t){var r,n,a,s,o,u;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.privateKey,a=t.apiKey,s=Ze(r=t.request),o={url:exports.LOOPRING_URLs.POST_CEFI_ORDER,bodyParams:r,apiKey:a,method:exports.ReqMethod.POST,sigFlag:exports.SIG_FLAG.EDDSA_SIG,sigObj:{dataToSig:s,PrivateKey:n}},e.next=5,this.makeReq().request(o);case 5:if(null==(u=e.sent.data)||!u.resultInfo){e.next=8;break}return e.abrupt("return",R({},null==u?void 0:u.resultInfo));case 8:return e.abrupt("return",R({raw_data:u},u));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t}(gn),Na=["maxFee","token"],Ga=["maxFeeAmount","token","amount","feeToken"],wa=function(e){function t(){return e.apply(this,arguments)||this}O(t,e);var r=t.prototype;return r.getLuckTokenAgents=function(){var e=A(gt.mark((function e(){var t,r,n;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={url:exports.LOOPRING_URLs.GET_LUCK_TOKEN_AGENTS,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(t);case 3:if(null==(r=e.sent.data)||!r.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==r?void 0:r.resultInfo));case 6:return n=r.reduce((function(e,t){return e[t.owner]={signer:t.infos[0],signerUrl:t.infos[1],logoUrl:t.infos[2],memo:t.infos[3]},e}),{}),e.abrupt("return",{raw_data:r,luckTokenAgents:n});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.getLuckTokenAuthorizedSigners=function(){var e=A(gt.mark((function e(){var t,r,n;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={url:exports.LOOPRING_URLs.GET_LUCK_TOKEN_AUTHORIZEDSIGNERS,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(t);case 3:if(null==(r=e.sent.data)||!r.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==r?void 0:r.resultInfo));case 6:return n=r.reduce((function(e,t){return e[t.owner]={signer:t.infos[0],signerUrl:t.infos[1],logoUrl:t.infos[2],memo:t.infos[3]},e}),{}),e.abrupt("return",{raw_data:r,luckTokenAgents:n});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.getLuckTokenClaimHistory=function(){var e=A(gt.mark((function e(t,r){var n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_LUCK_TOKEN_CLAIMHISTORY,queryParams:t,apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 6:return e.abrupt("return",{totalNum:a.totalNum,list:a.list,raw_data:a});case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),r.getLuckTokenLuckyTokens=function(){var e=A(gt.mark((function e(t,r){var n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_LUCK_TOKEN_LUCKYTOKENS,queryParams:t,apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 6:return e.abrupt("return",{totalNum:a.totalNum,list:a.list,raw_data:a});case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),r.getLuckTokenDetail=function(){var e=A(gt.mark((function e(t,r){var n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_LUCK_TOKEN_LUCKYTOKENDETAIL,queryParams:t,apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 6:return e.abrupt("return",{raw_data:a,detail:a});case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),r.getBlindBoxDetail=function(){var e=A(gt.mark((function e(t,r){var n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_LUCK_TOKEN_BLINDBOXDETAIL,queryParams:t,apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 6:return e.abrupt("return",{raw_data:a});case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),r.getLuckTokenWithdrawals=function(){var e=A(gt.mark((function e(t,r){var n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_LUCK_TOKEN_WITHDRAWALS,queryParams:R({},t,{statuses:t.statuses.join(",")}),apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 6:return e.abrupt("return",{raw_data:a,totalNum:null==a?void 0:a.totalNum,luckTokenWithdraw:a.list});case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),r.getLuckTokenBalances=function(){var e=A(gt.mark((function e(t,r){var n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_LUCK_TOKEN_BALANCES,queryParams:R({},t),apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(n);case 3:if(null==(a=e.sent.data)||!a.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==a?void 0:a.resultInfo));case 6:return e.abrupt("return",{raw_data:a,totalNum:null==a?void 0:a.length,tokenBalance:a});case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),r.getLuckTokenClaimedLuckyTokens=function(){var e=A(gt.mark((function e(t,r){var n,a,s;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={url:exports.LOOPRING_URLs.GET_LUCK_TOKEN_CLAIMEDLUCKYTOKENS,queryParams:R({},t,{hashes:null==t||null==(n=t.hashes)?void 0:n.join(",")}),apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(a);case 3:if(null==(s=e.sent.data)||!s.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==s?void 0:s.resultInfo));case 6:return e.abrupt("return",{raw_data:s,totalNum:null==s?void 0:s.totalNum,claimedHistory:s.list});case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),r.getLuckTokenSummary=function(){var e=A(gt.mark((function e(t){var r,n;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={url:exports.LOOPRING_URLs.GET_LUCK_TOKEN_SUMMARY,apiKey:t,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(r);case 3:if(null==(n=e.sent.data)||!n.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==n?void 0:n.resultInfo));case 6:return e.abrupt("return",{raw_data:n,totalNum:n.count,tokenSummaryList:n.tokenSummaryList});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.sendLuckTokenClaimLuckyToken=function(){var e=A(gt.mark((function e(t){var r,n,a,s,o,u;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.apiKey,a=t.eddsaKey,s=Ze(r=t.request),o={url:exports.LOOPRING_URLs.POST_LUCK_TOKEN_CLAIMLUCKYTOKEN,bodyParams:r,method:exports.ReqMethod.POST,sigFlag:exports.SIG_FLAG.EDDSA_SIG,sigObj:{dataToSig:s,PrivateKey:a},apiKey:n},e.next=5,this.makeReq().request(o);case 5:if(null==(u=e.sent.data)||!u.resultInfo){e.next=8;break}return e.abrupt("return",R({},null==u?void 0:u.resultInfo));case 8:return e.abrupt("return",R({raw_data:u},u));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.sendLuckTokenClaimBlindBox=function(){var e=A(gt.mark((function e(t){var r,n,a,s,o,u;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.apiKey,a=t.eddsaKey,s=Ze(r=t.request),o={url:exports.LOOPRING_URLs.POST_LUCK_TOKEN_CLAIMBLINDBOX,bodyParams:r,method:exports.ReqMethod.POST,sigFlag:exports.SIG_FLAG.EDDSA_SIG,sigObj:{dataToSig:s,PrivateKey:a},apiKey:n},e.next=5,this.makeReq().request(o);case 5:if(null==(u=e.sent.data)||!u.resultInfo){e.next=8;break}return e.abrupt("return",R({},null==u?void 0:u.resultInfo));case 8:return e.abrupt("return",R({raw_data:u},u));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.sendLuckTokenWithdraws=function(){var e=A(gt.mark((function e(t,r){var n,a,s,o,u,i,c,p,l,d,f,m,x,h,_,v,T,I;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.web3,s=t.chainId,o=t.walletType,u=t.eddsaKey,i=t.apiKey,c=r.accountId,p=r.counterFactualInfo,l=!!t.isHWAddr,d=void 0,(f=(n=t.request).transfer).payeeId=0,f.memo="LuckTokenWithdrawalBy"+n.claimer,f.maxFee={volume:"0",tokenId:0},m=function(){var e=A(gt.mark((function e(){return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fr(a,f.payerAddr,f,s,o,c,p);case 2:d=e.sent.ecdsaSig+exports.SigSuffix.Suffix03;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o!==exports.ConnectorNames.MetaMask&&o!==exports.ConnectorNames.Gamestop&&o!==exports.ConnectorNames.OtherExtension){e.next=27;break}if(e.prev=10,!l){e.next=16;break}return e.next=14,m();case 14:e.next=20;break;case 16:return e.next=18,wr(a,f.payerAddr,f,s,o,c,p);case 18:d=e.sent.ecdsaSig+exports.SigSuffix.Suffix02;case 20:e.next=25;break;case 22:throw e.prev=22,e.t0=e.catch(10),R({},this.genErr(e.t0));case 25:e.next=52;break;case 27:return e.next=29,pa(a,f.payerAddr);case 29:if(x=e.sent,e.prev=30,!x){e.next=38;break}return e.next=34,Cr(a,f.payerAddr,f,s,c);case 34:d=e.sent.ecdsaSig,e.next=47;break;case 38:if(!p){e.next=45;break}return e.next=41,Cr(a,f.payerAddr,f,s,c,p);case 41:d=e.sent.ecdsaSig,e.next=47;break;case 45:return e.next=47,m();case 47:e.next=52;break;case 49:throw e.prev=49,e.t1=e.catch(30),R({},this.genErr(e.t1));case 52:return p&&(f.counterFactualInfo=p),h=f.maxFee,_=f.token,v=R({},v=b(f,Na),{maxFeeAmount:h.volume,feeToken:h.tokenId,amount:_.volume,token:_.tokenId,ecdsaAuth:d,eddsaSig:Nr(f,u).result}),n=R({},n,{transfer:JSON.stringify(v)}),T={url:exports.LOOPRING_URLs.POST_LUCK_TOKEN_WITHDRAWALS,apiKey:i,method:exports.ReqMethod.POST,bodyParams:R({},n),sigFlag:exports.SIG_FLAG.NO_SIG},e.prev=57,e.next=60,this.makeReq().request(T);case 60:I=e.sent.data,e.next=66;break;case 63:throw e.prev=63,e.t2=e.catch(57),e.t2;case 66:return e.abrupt("return",this.returnTxHash(I));case 67:case"end":return e.stop()}}),e,this,[[10,22],[30,49],[57,63]])})));return function(t,r){return e.apply(this,arguments)}}(),r.sendLuckTokenSend=function(){var e=A(gt.mark((function e(t,r){var n,a,s,o,u,i,c,p,l,d,f,m,x,h,_,v,T,I,y,E,g,S,k,O,N,G;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.web3,s=t.chainId,o=t.walletType,u=t.eddsaKey,i=t.apiKey,c=r.accountId,p=r.counterFactualInfo,l=!!t.isHWAddr,d=void 0,x=(m=(f=n=t.request).luckyToken).maxFeeAmount,h=m.token,_=m.amount,v=m.feeToken,T=b(m,Ga),I=f.nftData,e.prev=5,!I){e.next=55;break}if(y=R({},T,{fromAccountId:T.payerId,fromAddress:T.payerAddr,toAccountId:0,toAddress:T.payeeAddr,maxFee:{tokenId:v,amount:x},payeeId:0,memo:"LuckTokenSendBy"+c,token:{nftData:I,tokenId:h,amount:_}}),g=function(){var e=A(gt.mark((function e(){return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Br(a,y.payerAddr,y,s,o,c,p);case 2:d=e.sent.ecdsaSig+exports.SigSuffix.Suffix03;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o!==exports.ConnectorNames.MetaMask&&o!==exports.ConnectorNames.Gamestop&&o!==exports.ConnectorNames.OtherExtension){e.next=27;break}if(e.prev=10,!l){e.next=16;break}return e.next=14,g();case 14:e.next=20;break;case 16:return e.next=18,Mr(a,y.payerAddr,y,s,o,c,p);case 18:d=e.sent.ecdsaSig+exports.SigSuffix.Suffix02;case 20:e.next=25;break;case 22:throw e.prev=22,e.t0=e.catch(10),R({},this.genErr(e.t0));case 25:e.next=52;break;case 27:return e.next=29,pa(a,y.payerAddr);case 29:if(S=e.sent,e.prev=30,!S){e.next=38;break}return e.next=34,Hr(a,y.payerAddr,y,s,c);case 34:d=e.sent.ecdsaSig,e.next=47;break;case 38:if(!p){e.next=45;break}return e.next=41,Hr(a,y.payerAddr,y,s,c,p);case 41:d=e.sent.ecdsaSig,e.next=47;break;case 45:return e.next=47,g();case 47:e.next=52;break;case 49:throw e.prev=49,e.t1=e.catch(30),R({},this.genErr(e.t1));case 52:E=qr(y,u).result,e.next=103;break;case 55:if(y=R({},T,{maxFee:{tokenId:v,volume:x},payeeId:0,memo:"LuckTokenSendBy"+c,token:{tokenId:h,volume:_}}),k=function(){var e=A(gt.mark((function e(){return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fr(a,y.payerAddr,y,s,o,c,p);case 2:d=e.sent.ecdsaSig+exports.SigSuffix.Suffix03;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o!==exports.ConnectorNames.MetaMask&&o!==exports.ConnectorNames.Gamestop&&o!==exports.ConnectorNames.OtherExtension){e.next=75;break}if(e.prev=58,!l){e.next=64;break}return e.next=62,k();case 62:e.next=68;break;case 64:return e.next=66,wr(a,y.payerAddr,y,s,o,c,p);case 66:d=e.sent.ecdsaSig+exports.SigSuffix.Suffix02;case 68:e.next=73;break;case 70:throw e.prev=70,e.t2=e.catch(58),R({},this.genErr(e.t2));case 73:e.next=100;break;case 75:return e.next=77,pa(a,y.payerAddr);case 77:if(O=e.sent,e.prev=78,!O){e.next=86;break}return e.next=82,Cr(a,y.payerAddr,y,s,c);case 82:d=e.sent.ecdsaSig,e.next=95;break;case 86:if(!p){e.next=93;break}return e.next=89,Cr(a,y.payerAddr,y,s,c,p);case 89:d=e.sent.ecdsaSig,e.next=95;break;case 93:return e.next=95,k();case 95:e.next=100;break;case 97:throw e.prev=97,e.t3=e.catch(78),R({},this.genErr(e.t3));case 100:p&&(y.counterFactualInfo=p),y.eddsaSignature=Nr(y,u).result,E=Nr(y,u).result;case 103:return n=R({},n,{nftData:I,luckyToken:R({},n.luckyToken,{payeeId:0,memo:"LuckTokenSendBy"+c,eddsaSig:E})}),N={url:exports.LOOPRING_URLs.POST_LUCK_TOKEN_SENDLUCKYTOKEN,bodyParams:R({},n),apiKey:i,method:exports.ReqMethod.POST,sigFlag:exports.SIG_FLAG.NO_SIG,ecdsaSignature:d},e.prev=105,e.next=108,this.makeReq().request(N);case 108:G=e.sent.data,e.next=114;break;case 111:throw e.prev=111,e.t4=e.catch(105),e.t4;case 114:return e.abrupt("return",this.returnTxHash(G));case 117:throw e.prev=117,e.t5=e.catch(5),e.t5;case 120:case"end":return e.stop()}}),e,this,[[5,117],[10,22],[30,49],[58,70],[78,97],[105,111]])})));return function(t,r){return e.apply(this,arguments)}}(),r.getLuckTokenClaimedBlindBox=function(){var e=A(gt.mark((function e(t,r){var n,a,s;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={url:exports.LOOPRING_URLs.GET_LUCK_TOKEN_CLAIMEDBLINDBOX,queryParams:R({},t,{statuses:null==t||null==(n=t.statuses)?void 0:n.join(",")}),apiKey:r,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG},e.next=3,this.makeReq().request(a);case 3:if(null==(s=e.sent.data)||!s.resultInfo){e.next=6;break}return e.abrupt("return",R({},null==s?void 0:s.resultInfo));case 6:return e.abrupt("return",{raw_data:s,totalNum:null==s?void 0:s.totalNum,list:s.list});case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),t}(gn),La=function(e){function t(){return e.apply(this,arguments)||this}O(t,e);var r=t.prototype;return r.getContacts=function(){var e=A(gt.mark((function e(t,r){var n,a;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.GET_CONTACTS,queryParams:t,method:exports.ReqMethod.GET,sigFlag:exports.SIG_FLAG.NO_SIG,apiKey:r},e.next=3,this.makeReq().request(n);case 3:return a=e.sent.data,console.log(a),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),r.createContact=function(){var e=A(gt.mark((function e(t,r){var n;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.CREATE_CONTACT,bodyParams:t,method:exports.ReqMethod.POST,sigFlag:exports.SIG_FLAG.NO_SIG,apiKey:r},e.next=3,this.makeReq().request(n);case 3:return e.abrupt("return",e.sent.data);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),r.updateContact=function(){var e=A(gt.mark((function e(t,r){var n;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.UPDATE_CONTACT,bodyParams:t,method:exports.ReqMethod.POST,sigFlag:exports.SIG_FLAG.NO_SIG,apiKey:r},e.next=3,this.makeReq().request(n);case 3:return e.abrupt("return",e.sent.data);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),r.deleteContact=function(){var e=A(gt.mark((function e(t,r){var n;return gt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:exports.LOOPRING_URLs.DELETE_CONTACT,bodyParams:t,method:exports.ReqMethod.DELETE,sigFlag:exports.SIG_FLAG.NO_SIG,apiKey:r},e.next=3,this.makeReq().request(n);case 3:return e.abrupt("return",e.sent.data);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),t}(gn);exports.AmmpoolAPI=Wn,exports.ApproveVal=Hn,exports.BaseAPI=gn,exports.ContactAPI=La,exports.DefiAPI=ba,exports.DelegateAPI=Ra,exports.ExchangeAPI=Bn,exports.GlobalAPI=Aa,exports.IsMobile=Ke,exports.KEY_MESSAGE=En,exports.LuckTokenAPI=wa,exports.NFTAPI=ga,exports.NFTFactory=g,exports.NFTFactory_Collection=S,exports.NetworkContextName="NETWORK",exports.SEP=",",exports.SoursURL=Ue,exports.UserAPI=Ta,exports.WalletAPI=Ia,exports.WhitelistedUserAPI=ya,exports.WsAPI=Cn,exports.addHexPrefix=Be,exports.ammPoolCalc=It,exports.approve=ra,exports.approveMax=function(e,t,r,n,a,s,o,u,i){return sa.apply(this,arguments)},exports.approveZero=function(e,t,r,n,a,s,o,u,i){return aa.apply(this,arguments)},exports.calcDefi=function(e){var t,r,a=e.isJoin,s=e.isInputSell,o=e.sellAmount,u=e.buyAmount,i=e.feeVol,c=e.marketInfo,p=e.tokenSell,l=e.tokenBuy,d=e.buyTokenBalanceVol,f=(a?[c.depositPrice]:[c.withdrawPrice])[0],m=l,x=n.max(je(i).times(2),m.orderAmounts.dust),h=n.max(x.div(f),p.orderAmounts.dust),_=je(d).div(f);s?r=(t=je(o||0).times("1e"+p.decimals)).times(f):t=(r=je(u||0).times("1e"+l.decimals)).div(f);var v=Math.ceil(je(i).times(1e4).div(r).toNumber());return{sellVol:t.toString(),buyVol:r.toString(),maxSellVol:_.toString(),isJoin:a,isInputSell:s,maxFeeBips:v,miniSellVol:h.toString()}},exports.calcDex=function(e){var t,r,n=e.info,a=e.input,s=e.sell,o=e.buy,u=e.isAtoB,i=e.tokenMap,c=e.depth,p=e.feeBips,l=i[s],d=i[o],f=ft(s,o,e.marketArr,i,e.marketMap);if(!f)throw{message:exports.ConnectorError.CEX_NO_PRODUCT,msg:exports.ConnectorError.CEX_NO_PRODUCT,code:exports.LoopringErrorCode.CEX_NO_PRODUCT};var m,x,h,_,v,T=f.isReverse;if(u){m=a;var I,y=_=je(a||0).times("1e"+l.decimals);if(pt(c.bids_amtTotal)||pt(c.asks_volTotal))throw{message:exports.ConnectorError.CEX_NO_DEPTH_ERROR,msg:exports.ConnectorError.CEX_NO_DEPTH_ERROR,code:exports.LoopringErrorCode.CEX_NO_DEPTH_ERROR};(v=T?je(y).gt(je(c.asks_volTotal)):je(y).gt(je(c.bids_amtTotal)))?(x=void 0,h=void 0):h=je(null!=(I=x=dt(a,l,d,0,u,T,c).toString())?I:0).times("1e"+d.decimals)}else{if(x=a,h=je(a||0).times("1e"+d.decimals),pt(c.bids_volTotal)||pt(c.asks_amtTotal))throw{message:exports.ConnectorError.CEX_NO_DEPTH_ERROR,msg:exports.ConnectorError.CEX_NO_DEPTH_ERROR,code:exports.LoopringErrorCode.CEX_NO_DEPTH_ERROR};var E;(v=h.gt(je(T?c.asks_amtTotal:c.bids_volTotal)))?(m=void 0,_=void 0):(m=je(ct(i,s,dt(a,l,d,0,u,T,c))).toString(),_=je(null!=(E=m)?E:0).times("1e"+l.decimals))}return{feeBips:p,info:n,isAtoB:u,isReverse:T,sellVol:m,buyVol:x,amountB:null==(t=h)?void 0:t.toString(),amountS:null==(r=_)?void 0:r.toString(),exceedDepth:v}},exports.calcDual=function(e){var t,r,a,s,o,u,i,c,p,l,d,f=e.info,m=e.rule,x=e.balance,h=e.feeVol,_=e.sellToken,v=e.buyToken,T=e.sellAmount,I=e.dualMarket,y=je(T||0).times("1e"+_.decimals),E=f.base,g=f.currency,S=je(f.profit).times(f.ratio).toFixed(6,n.ROUND_DOWN);return f.dualType===exports.DUAL_TYPE.DUAL_BASE?(r=je(S).plus(1).times(y),a=_.symbol,s=je(je(S).plus(1).times(T||0).times(f.strike).toFixed(v.precision,n.ROUND_CEIL)).times("1e"+v.decimals),o=v.symbol,i=n.max(I.baseLimitAmount,je(m.baseMin).times("1e"+_.decimals)),p=n.min(f.baseSize,x?null==(d=x[E])?void 0:d.free:0),u=n.min(m.baseMax?m.baseMax:0,p),c=v.symbol,l=5):(r=je(je(S).plus(1).times(T||0).div(f.strike).toFixed(v.precision,n.ROUND_CEIL)).times("1e"+v.decimals),a=v.symbol,s=je(S).plus(1).times(y),o=_.symbol,i=n.max(I.quoteLimitAmount,je(m.currencyMin).times("1e"+_.decimals)),p=n.min(je(f.baseSize).times(f.strike).toString(),x[g].free),u=n.min(m.currencyMax,p),c=v.symbol,l=5),rt("settleRatio",S,r.toString(),s.toString(),"strike",f.strike),{quota:p.toString(),sellVol:y.toString(),lessEarnVol:r.toString(),lessEarnTokenSymbol:a,greaterEarnVol:s.toString(),greaterEarnTokenSymbol:o,miniSellVol:i.toString(),sellToken:_,maxSellAmount:u?null==(t=u)?void 0:t.toString():"",maxFeeBips:l,feeVol:h,feeTokenSymbol:c}},exports.checkErrorInfo=function(e,t){var r=e.message;return t&&"NOT_SUPPORT_ERROR"===r?exports.ConnectorError.NOT_SUPPORT_ERROR:"USER_DENIED"===r||"USER_DENIED_2"===r||r&&(r.startsWith("personalSign last")||r.indexOf("User denied transaction")>0)?exports.ConnectorError.USER_DENIED:r},exports.clearHexPrefix=Je,exports.contractWalletValidate32=An,exports.contractWallet_abi=on,exports.convertPublicKey=function(e){var t=Qe(He(je(e.x))),n=Qe(He(je(e.y)));return new r(Dt.pack(t,n),16)},exports.convertPublicKey2=zt,exports.deposit=function(e,t,r,n,a,s,o,u,i,c,p,l){return oa.apply(this,arguments)},exports.dumpError400=function(e,t){void 0===t&&(t=""),t&&console.debug("src:",t),null!=e&&e.response?console.error(e.response.data):console.error(e.message)},exports.ecRecover=Sn,exports.ecRecover2=function(e,t,r){return Nn.apply(this,arguments)},exports.eddsaSign=jr,exports.eddsaSignWithDomain=Vr,exports.erc20_abi=nn,exports.exchange_abi=an,exports.fcWalletValid=Fn,exports.forceWithdrawal=function(e,t,r,n,a,s,o,u,i,c,p){return ua.apply(this,arguments)},exports.formatAddress=function(e){if(e instanceof Buffer||e instanceof Uint8Array)return t.toChecksumAddress("0x"+e.toString("hex"));if("string"==typeof e)return t.toChecksumAddress(e.startsWith("0x")?e:"0x"+e);throw new Error("Unsupported type")},exports.formatEddsaKey=Qe,exports.formatKey=function(e){if(e instanceof Buffer||e instanceof Uint8Array)return e.toString("hex");if("string"==typeof e)return e.startsWith("0x")?e.slice(2):e;throw new Error("Unsupported type")},exports.formatSig=function(e){var r=t.fromRpcSig(e);return t.toRpcSig(r.v,r.r,r.s)},exports.fromGWEI=Xe,exports.fromWEI=it,exports.genExchangeData=ta,exports.generateKeyPair=Mt,exports.generatePrivateKey=Ut,exports.getAccountArg=function(){return{topic:exports.WsTopicType.account}},exports.getAmmExitEcdsaTypedData=zr,exports.getAmmJoinEcdsaTypedData=Xr,exports.getAmmpoolArg=function(e){return{topic:exports.WsTopicType.ammpool,snapshot:!0,poolAddress:e}},exports.getBaseQuote=m,exports.getCandlestickArg=function(e){return{topic:exports.WsTopicType.candlestick,market:e}},exports.getCefiOrderBook=function(e){var t=e.topic,r=void 0===t?exports.WsTopicType.cefiOrderBook:t,n=b(e,L);return D(R({topic:r},n))},exports.getCurPrice=xt,exports.getDisplaySymbol=function(e){switch(e){case"CNY":return"";case"USD":return"$";default:return""}},exports.getEcDSASig=Xt,exports.getEdDSASig=Wt,exports.getEdDSASigWithPoseidon=Ht,exports.getExistedMarket=E,exports.getMidPrice=Mn,exports.getMinReceived=Tt,exports.getMixOrderArg=function(e){var t=e.topic,r=void 0===t?exports.WsTopicType.mixorder:t,n=b(e,w);return D(R({topic:r},n))},exports.getMixTradeArg=function(e){return{topic:exports.WsTopicType.mixtrade,market:e}},exports.getNFTMintTypedData=mr,exports.getNFTTransferTypedData=Ur,exports.getNFTWithdrawTypedData=xr,exports.getNftData=fr,exports.getNftTradeHash=function(e){var t,r=new Gt(St.SNARK_SCALAR_FIELD,7,6,52,"poseidon",i.BigNumber.from(5),null,null,128),n=[e.taker.accountId,e.taker.sellToken.tokenId,e.taker.storageId,e.maker.accountId,e.maker.sellToken.tokenId,e.maker.storageId];t=[];for(var a=0;a<n.length;a++)t.push(i.BigNumber.from(n[a]));return wt.poseidon(t,r).toHexString()},exports.getNonce=function(e,t){return zn.apply(this,arguments)},exports.getOrderArg=function(e){return{topic:exports.WsTopicType.order,market:e}},exports.getOrderBookArg=D,exports.getOrderHash=function(e){var n,a=new Gt(St.SNARK_SCALAR_FIELD,12,6,53,"poseidon",i.BigNumber.from(5),null,null,128),s=[new r(t.toBuffer(e.exchange)).toString(),e.storageId,e.accountId,e.sellToken.tokenId,e.buyToken.tokenId,e.sellToken.volume,e.buyToken.volume,e.validUntil,e.maxFeeBips,e.fillAmountBOrS?1:0,new r(t.toBuffer(e.taker)).toString()];n=[];for(var o=0;o<s.length;o++)n.push(i.BigNumber.from(s[o]));return wt.poseidon(n,a).toHexString()},exports.getOutputAmount=function(e){var t=e.input,r=e.sell,n=e.buy,a=e.isAtoB,s=e.tokenMap,o=e.depth,u=e.feeBips,i=e.takerRate,c=e.slipBips,p=ft(r,n,e.marketArr,s,e.marketMap,e.ammPoolSnapshot);if(p){var l=p.reserveIn,d=p.reserveOut,f=p.sellToken,m=p.buyToken,x=p.isReverse,h=p.marketInfo;if(f&&m){t=t.trim();var _=!1,v="0",T="0",I="0",y="0",E="0",g="0";if(a){var S=ct(s,r,t,0);(_=!(!pt(o.bids_amtTotal)&&!pt(o.asks_volTotal))||(x?je(S).gt(je(o.asks_volTotal)):je(S).gt(je(o.bids_amtTotal))))?h.isSwapEnabled&&(v=it(s,n,lt(S,u,l,d).toFixed(0,0))):v=dt(t,f,m,0,a,x,o),I=ct(s,n,v,0);var k=ot.minus(je(i)).div(ot);y=ct(s,n,je(v).times(k).toString(),0),T=ct(s,r,t,0),E=t,g=v}else{if(pt(o.bids_volTotal)||pt(o.asks_amtTotal))_=!0;else{var A=ct(s,n,t,0);_=x?je(A).gt(je(o.asks_amtTotal)):je(A).gt(je(o.bids_volTotal))}var R=nt,O=ct(s,n,t,0);if(_?h.isSwapEnabled&&(R=function(e,t,r,n){var a=je(e),s=je(r),o=je(n);if(a.lt(nt)||s.lt(nt)||o.lt(nt))return nt;var u=je(t),i=s.times(a).times(ot),c=o.minus(a).times(ot.minus(u));return i.div(c).plus(at)}(O,u,l,d)):R=je(ct(s,r,dt(t,f,m,0,a,x,o))),R.gt(nt)){v=it(s,r,R.toString()),I=je(O).toFixed(0,0);var b=ot.minus(je(i)).div(ot);y=je(O).times(b).toFixed(0,0)}T=R.toFixed(0,0),E=v,g=t}return{exceedDepth:_,isReverse:x,isAtoB:a,slipBips:c,takerRate:i,feeBips:u,output:v,sellAmt:E,buyAmt:g,amountS:T,amountBOut:y,amountBOutWithoutFee:I,amountBOutSlip:Tt(y,m.decimals,c),priceImpact:vt(l,d,T,f.decimals,y,m.decimals,u,0,0,x,_,o)}}}},exports.getPair=function(e,t){var r=m(t);return E(e,r.base,r.quote)},exports.getPriceImpact=_t,exports.getReserveInfo=ft,exports.getTickerArg=function(e){return{topic:exports.WsTopicType.ticker,market:e}},exports.getToPrice=ht,exports.getToken=ut,exports.getTokenInfoById=function(e,t){if(e)try{return e[t]}catch(e){return}},exports.getTokenInfoBySymbol=I,exports.getTokenInfoByToken=function(e,t,r){var n=ut(t,r),a=e.pooledMap[n.tokenId].volume;return{tokenInfo:n,tokenVol:a,reserve:je(a)}},exports.getTradeArg=function(e){return{topic:exports.WsTopicType.trade,market:e}},exports.getTransferOldTypedData=function(e,t){return{types:{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Transfer:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"tokenID",type:"uint16"},{name:"amount",type:"uint96"},{name:"feeTokenID",type:"uint16"},{name:"maxFee",type:"uint96"},{name:"validUntil",type:"uint32"},{name:"storageID",type:"uint32"}]},primaryType:"Transfer",domain:{name:"Loopring Protocol",version:"3.6.0",chainId:t,verifyingContract:e.exchange},message:{from:e.payerAddr,to:e.payeeAddr,tokenID:e.token.tokenId,amount:e.token.volume,feeTokenID:e.maxFee.tokenId,maxFee:e.maxFee.volume,validUntil:e.validUntil,storageID:e.storageId}}},exports.getTransferTypedData=Gr,exports.getUpdateAccountEcdsaTypedData=Qt,exports.getWithdrawTypedData=sr,exports.get_EddsaSig_Dual_Order=function(e,n){var a=[new r(t.toBuffer(e.exchange)).toString(),e.storageId,e.accountId,e.sellToken.tokenId,e.buyToken.tokenId,e.sellToken.volume,e.buyToken.volume,e.validUntil,e.maxFeeBips,e.fillAmountBOrS?1:0,0];return Ht(a,n)},exports.get_EddsaSig_ExitAmmPool=Qr,exports.get_EddsaSig_JoinAmmPool=Jr,exports.get_EddsaSig_NFT_Mint=Er,exports.get_EddsaSig_NFT_Order=gr,exports.get_EddsaSig_NFT_Transfer=qr,exports.get_EddsaSig_NFT_Withdraw=dr,exports.get_EddsaSig_OffChainWithdraw=ar,exports.get_EddsaSig_Transfer=Nr,exports.get_Is_Nft_Token=function(e){return e>=32768},exports.hasMarket=y,exports.hebao_abi=cn,exports.isContract=pa,exports.isEmpty=pt,exports.makeAmmPool=et,exports.makeExitAmmCoverFeeLP=function(e,t,r,n,a){void 0===a&&(a="0.001");var s=t.lp,o=r[n[s.tokenId]],u=t.pooled[1],i=r[n[u.tokenId]],c=u.volume,p=je(e&&e[i.symbol]?e[i.symbol].fee:"0").times(s.volume).div(c).plus(1),l=p.div(at.minus(je(a)));return{feeLp:p.toString(),feeLpWithSlippage:l.toString(),miniFeeLpWithSlippageVal:je(l).div("1e"+o.decimals).toString(),feeLpVal:je(p).div("1e"+o.decimals).toString()}},exports.makeExitAmmPoolMini=function(e,t,r,n,a){void 0===a&&(a=10);var s=t.lp,o=r[n[s.tokenId]],u=je(s.volume).times(2).div("1e"+a);return{miniLpVol:u.toString(),miniLpVal:je(u).div("1e"+o.decimals).toString()}},exports.makeExitAmmPoolRequest2=function(e,t,r,n,a,s,o,u,i){void 0===u&&(u=0),void 0===i&&(i=10);var c=a.lp,p=s[o[c.tokenId]],l=je(e).times("1e"+p.decimals).toFixed(0,0),d=je(l).times("1e"+i).div(c.volume).toFixed(0,1),f=a.pooled[0],m=a.pooled[1],x=at.minus(je(t)),h=je(d).times(f.volume).div("1e"+i).times(x).toFixed(0,0),_=je(d).times(m.volume).div("1e"+i).times(x).toFixed(0,0),v=s[o[f.tokenId]],T=s[o[m.tokenId]],I={owner:r,poolAddress:a.poolAddress,exitTokens:{unPooled:[{tokenId:f.tokenId,volume:h},{tokenId:m.tokenId,volume:_}],burned:{tokenId:a.lp.tokenId,volume:l}},storageId:u,maxFee:n&&n[T.symbol]?n[T.symbol].fee:"0"};return{ratio:d,volA:h,volB:_,volA_show:je(h).div("1e"+v.decimals).toString(),volB_show:je(_).div("1e"+T.decimals).toString(),request:I}},exports.makeJoinAmmPoolRequest=function(e,t,r,n,a,s,o,u,i,c,p){void 0===i&&(i=0),void 0===c&&(c=0);var l,d=s.pooled[0],f=s.pooled[1],m=o[u[d.tokenId]],x=o[u[f.tokenId]],h=a&&a[x.symbol]&&a[x.symbol].fee?a[x.symbol].fee:"0",_=It(e=je(e).times(st.pow(t?m.decimals:x.decimals)).toFixed(0,0),t,d,f),v=_.output,T=_.ratio;if("0"===v&&p)v=je(p).times(st.pow(t?x.decimals:m.decimals)).toFixed(0,0),l="1";else{var I=at.minus(je(r));l=je(s.lp.volume).times(T).times(I).toFixed(0,0)}return{request:{owner:n,poolAddress:s.poolAddress,joinTokens:{pooled:[{tokenId:d.tokenId,volume:t?e:v},{tokenId:f.tokenId,volume:t?v:e}],minimumLp:{tokenId:s.lp.tokenId,volume:l}},storageIds:[i,c],fee:h}}},exports.makeMarket=$e,exports.makeMarkets=tt,exports.mykeyWalletValid=On,exports.numberWithCommas=function(e){if(!e)return e;if(e=e.toString().replace(/,/g,""),isNaN(Number(e)))return"-";try{var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}catch(e){return"-"}},exports.padLeftEven=function(e){return e.length%2!=0?"0"+e:e},exports.personalSign=wn,exports.recoverSignType=function(e,t,r,n){return Sn(e,t,r,n).result?"03":""},exports.sendRawTx=Qn,exports.sendTransaction=ia,exports.sign=jn,exports.signEip712=function(e,t,r,n){return Yt.apply(this,arguments)},exports.signEip712WalletConnect=jt,exports.signEthereumTx=Xn,exports.signNFTMintWithDataStructure=Sr,exports.signNFTMintWithDataStructureForContract=Or,exports.signNFTMintWithoutDataStructure=Ar,exports.signNFTTransferWithDataStructureForContract=Hr,exports.signNFTTransferWithoutDataStructure=Br,exports.signNFTWithdrawWithDataStructure=hr,exports.signNFTWithdrawWithDataStructureForContract=Ir,exports.signNFTWithdrawWithoutDataStructure=vr,exports.signOffchainWithdrawWithDataStructure=or,exports.signOffchainWithdrawWithDataStructureForContract=pr,exports.signOffchainWithdrawWithoutDataStructure=ir,exports.signTNFTransferWithDataStructure=Mr,exports.signTransferWithDataStructure=wr,exports.signTransferWithDataStructureForContract=Cr,exports.signTransferWithoutDataStructure=Fr,exports.signUpdateAccountWithDataStructure=Zt,exports.signUpdateAccountWithDataStructureForContract=rr,exports.signUpdateAccountWithoutDataStructure=er,exports.sleep=function(e){return new Promise((function(t){return setTimeout(t,e)}))},exports.sortObjDictionary=Ze,exports.toBN=Ve,exports.toBig=je,exports.toBuffer=We,exports.toFixed=ze,exports.toGWEI=function(e){return je(e).div(1e9)},exports.toHex=He,exports.toNumber=Ye,exports.toWEI=ct,exports.updatePriceImpact_new=vt,exports.verifyEdDSASig=function(e,t){return!0},exports.zeroPad=function(e,t){return We(String(e).padStart(t,"0"))};
//# sourceMappingURL=loopring-sdk.cjs.production.min.js.map
